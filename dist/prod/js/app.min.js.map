{"version":3,"sources":["app.js"],"names":["angular","module","directive","$anchorScroll","restrict","link","scope","elem","attr","href","match","$","on","e","preventDefault","substr","config","$stateProvider","transition","duration","ease","css","transitionEnter","$state","enterTransition","_","cloneDeep","transitionDirection","y","x","transitionLeave","leaveTransition","pageTransitions","enter","in","out","leave","state","views","content","templateUrl","url","content@","templateProvider","$stateParams","$templateCache","html","get","slug","data","gsapifyRouter.content","controller","params","path","replace","trim","go","$rootScope","getBlurClass","isBlurrable","isMobile","currentBrowser","test","engine","name","addBlur","key","blurrables","each","elements","el","addClass","blurred","removeBlur","removeClass","blur","unblur","blurrable","push","factory","isDevelopmentBrowser","browser","toLowerCase","latestVersion","currentVersion","parseInt","version","getIcon","stableBrowsers","unstableBrowsers","firefox","chrome","opera","safari","iconIndex","indexOf","iconKey","development","getStableBrowserVersion","window","browserVersions","stable","getLatestBrowserVersion","latest","getCurrentBrowser","result","parser","getResult","stableVersion","undefined","urls","download","homepage","icon","getBrowsers","browsers","UAParser","supportedFeatures","optimizedJavaScript","asm","webAssembly","sharedArrayBuffer","simd","canvas","webGl","webGl2","webAudio","fullscreen","pointerLock","indexedDb","serviceWorker","webSocket","webRtc","domLevel3","touch","gamepad","mobile","filter","games","results","game","desktopDemo","mobileDemo","device","type","desktopTest","mobileTest","split","partition","shuffle","flatten","resources","resource","keys","vals","values","sortBy","val","folderSize","orderedGames","randomizedGames","pages","page","$timeout","easing","navigation","element","triggerArrow","direction","navigateByDirection","error","isString","event","which","triggerDiagnostic","code","$apply","triggerKonami","seq","next","konami","length","console","log","status","triggerMouseMove","triggerMouseClick","generateSmokeHtml","count","random","minSmokeCount","maxSmokeCount","i","generateContainers","smokeHtml","container","prepend","randomizeSmokePosition","selector","find","width","height","document","body","scrollHeight","minPixelShift","this","marginTop","marginLeft","generateCircles","columns","Math","floor","circleSize","rows","append","evade","evt","$this","corner","offset","center","left","outerWidth","top","outerHeight","dist","Vector","pageX","pageY","closest","delta","normal","multeq","sub","newCorner","padding","beginEvade","bind","endEvade","unbind","animate","opacity","setupEvadeEvents","destroy","remove","initialize","reInitialize","pageHasSupport","pagekey","includes","supportedPages","prototype","clone","negate","neg","addeq","v","subeq","add","c","diveq","mult","div","dot","sqrt","stateParams","$on","toState","toParams","resize","require","uniqueId","chartType","chartData","unitWidth","unitHeight","unitMargin","barChart","w","max","h","svg","preserveAspectRatio","shape-rendering","viewBox","style","rectangles","d","selectAll","circleChart","circles","prev","cy","r","cx","d3","select","JSON","parse","getResources","$filter","developerResource","byCustomResourceOrder","$compile","ua","major","os","cpu","architecture","model","vendor","features","category","categoryKey","toUpperCase","feature","featureKey","show","contents","easeInQuad","t","b","$document","onKeyboard","slider","slick","setSlides","slides","toArray","reduce","accumulator","slide","styleSlides","centerIndex","forEach","onLeftScroll","onRightScroll","centerMode","infinite","initialSlide","variableWidth","nextArrow","prevArrow","currenSlide","nextSlide","off","gameSupport","positionRow","TweenMax","to","highlightRow","positionColumn","highlightColumn","showDefinitions","hideDefinitions","selectedTab","enableFilters","enableSearch","byCustomBrowserOrder","byActiveGame","byGameFolderSizeOrder","getGames","getCurrentBrowserFeatureClass","hasFeature","getGameFeatureClass","gameKey","getBrowserFeatureClass","getResultClass","$parent","message","getFps","isNaN","fps","getTotalTime","totalTime","minutes","seconds","toString","getFramesDropped","value","numStutterEvents","rerunTest","testState","showRow","paused","showColumn","$element","position","play","reverse","yourBrowser","gameCount","resultsButton","contains","parent","normalWidth","testDefinitions","popover","$http","text","success","showConfirmation","post","cdnUrl","sponzadynamicshadows","screenshot","timeout","credits","heroesofparagon","suntemple","casino","alphabear","hurry","skisafari","medusae","featureHierarchy","getHierarchy","group","cat","obj","unloadIframe","cb","iframe","byActiveDemoGame","getFeatures","selected","filterable","concat","uniq","sort","playDemo","selectedGame","template","id","src","load","self","setTimeout","contentWindow","focus","gameContainer","onmessage","msg","showModal","stopDemo","closeModal","Back","easeOut","right","hasResults","round","stopTime","startTime","hasAsm","hasDomLevel3","hasWebAssembly","hasIndexedDb","hasServiceWorker","navigator","hasCanvas","createElement","getContext","hasWebGl","hasWebGl2","hasWebAudio","hasWebSocket","hasWebRtc","hasGamepad","hasTouch","hasMotion","DeviceMotionEvent","acceleration","hasPointer","hasKeyboard","hasFullscreen","requestFullscreen","msRequestFullscreen","mozRequestFullScreen","webkitRequestFullscreen","hasOrientation","screen","orientation","mozOrientation","webkitOrientation","msOrientation","hasBattery","battery","mozBattery","webkitBattery","hasVibrate","hasVisibility","hasGeoLocation","getLogicalCores","cores","hardwareConcurrency","hasPerformance","performance","now","hasSimd","hasMathImul","hasMathFround","hasArrayBufferTransfer","ArrayBuffer","hasPointerLock","requestPointerLock","mozRequestPointerLock","webkitRequestPointerLock","msRequestPointerLock","hasBlobConstructor","blob","Blob","hasBlobBuilder","hasSharedArrayBuffer","hasWebWorkers","hasRequestAnimationFrame","getEsVersion","es","versions","setAttribute","getElementsByTagName","appendChild","parseFloat","hasOptimizedJavaScript","advanced","_advancedHierarchy","hasFeatures","every","identity","getCategories","_basicHierarchy","hierarchy","graphics","audio","experience","storage","multiplayer","input","logicalCores","mathImul","mathFround","arrayBufferTransfer","blobConstructor","blobBuilder","webWorkers","requestAnimationFrame","esVersion","vibrate","visibility","geoLocation","motion","pointer","keyboard","md5","email","hash","$location","$window","gameBrowser","browserName","currentVersionSnippet","testStateClass","stateClass","stateName","statePath","stateUrl","absUrl","normalizeData","ga","$scope","getKeys","inputs","md5cycle","k","a","ff","gg","hh","ii","add32","cmn","q","s","md51","txt","n","md5blk","substring","tail","charCodeAt","md5blks","rhex","j","hex_chr","hex","join","lsw","msw","sampleData","$$hashKey","desktop","timer","timeoutPercentage","interval","$$state","processScheduled","$$intervalId","wrongPixels","cpuTime","cpuIdle","pageLoadTime","modalTitle","modalContent","modalButton","modal","setModalTitle","title","setModalContent","setModalButton","button","showSampleResults","stringify","fullscreenModal","getElementById","transitionIn","callback","eventCallback","transitionOut","setTransitionDirection","transitionVars","updateScope","navDescriptor","getDescriptor","nextDestination","directions","deregister","timeoutId","onEnter","once","clearTimeout","click","showMenu","querySelector","openMenu","addEventListener","closeMenu","removeEventListener","transclude","navigate","isActive","$q","map","currentPage","Error","destination","reject","media","home","rights","upgrade","faq","timeline","tests","down","up","$watch","idx","dir","description","imageUrl","keywords","setData","extend","open","confirmation","confirmationSuccess","confirmationError","resetConfirmation","scrollTop","documentElement","hideConfirmation","snippet","$provide","decorator","$delegate","origPut","put","$interval","record","isSkippable","activeGameKey","skip","stopGame","cancel","$evalAsync","activeGameIndex","start","preloadComplete","ms","m","finish","hide","run","cancelTimeout","loadIframe","frameBorder","options","postMessage","restart","viewResults","viewResultsModal","preloadGame","preloadProgress","preloadReset","loadingPercent","processProgress","preloading","preloadQueue","amount","head","slice","percent","toFixed","minimumGap","currentAmount","lastAmount","last","artificialAmount","minAmount","maxAmount","min","preloadArtificially","delay","artificialProgress","startGame","pauseGame","timeoutCountdown","countdownPromise","activeGameCount","newval","progress","initializeMouseInteractions","$futures","futures","$component","currentTarget","$components","$today","components","$futureComponent","generateHaloVars","autoAlpha","scale","getTimelineHeight","getBoundingClientRect","component","pop","halos","halo","set","transformOrigin","haloVars","merge","repeat","onRepeat","updateTo","TIMING","todayElement","todayTimeline","TimelineMax","origin","rotation","$sce","trustAsResourceUrl","experimentalBrowsers","viewportWidth","display","zIndex","stableIcons","staggerFrom","selectStableBrowsers","experimentalIcons","maxHeight","staggerTo","selectExperimentalBrowsers"],"mappings":"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","file":"app.min.js","sourcesContent":["'use strict';\n\n/**\n * @ngdoc overview\n * @name app\n * @requires ngSanitize\n * @requires ui.router\n * @description\n * AngularJS application for openwebgames.com.\n */\nangular.module('app', ['ngSanitize', 'ngAnimate', 'ui.router', 'hj.gsapifyRouter']);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name a\n * @description\n * Intercept anchor tag href requests and properly support \"anchor\" links in page\n */\nangular.module('app').directive('a', [\"$anchorScroll\", function($anchorScroll){\n\treturn {\n\t\trestrict: 'E',\n\t\tlink: function(scope, elem, attr){\n\t\t\tif (attr.href && attr.href.match(/#[^\\/]/)){\n\t\t\t\t$(elem).on('click', function(e){\n\t\t\t\t\te.preventDefault();\n\t\t\t\t\t$anchorScroll(attr.href.substr(1));\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\nangular.module('app').config([\"$stateProvider\", function config($stateProvider){\n\tvar transition = {\n\t\tduration: 0.4,\n\t\tease: 'Quart.easeInOut',\n\t\tcss: {}\n\t};\n\n\tvar transitionEnter = function($state) {\n\t\tvar enterTransition = _.cloneDeep(transition);\n\n\t\tswitch ($state.transitionDirection) {\n\t\t\tcase 'up':\n\t\t\t\tenterTransition.css.y = '-100%';\n\t\t\tbreak;\n\t\t\tcase 'down':\n\t\t\t\tenterTransition.css.y = '100%';\n\t\t\tbreak;\n\t\t\tcase 'left':\n\t\t\t\tenterTransition.css.x = '-100%';\n\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tenterTransition.css.x = '100%';\n\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\ttransition: enterTransition\n\t\t};\n\t};\n\n\tvar transitionLeave = function($state) {\n\t\tvar leaveTransition = _.cloneDeep(transition);\n\n\t\tswitch ($state.transitionDirection) {\n\t\t\tcase 'up':\n\t\t\t\tleaveTransition.css.y = '100%';\n\t\t\tbreak;\n\t\t\tcase 'down':\n\t\t\t\tleaveTransition.css.y = '-100%';\n\t\t\tbreak;\n\t\t\tcase 'left':\n\t\t\t\tleaveTransition.css.x = '100%';\n\t\t\tbreak;\n\t\t\tcase 'right':\n\t\t\t\tleaveTransition.css.x = '-100%';\n\t\t\tbreak;\n\t\t}\n\n\t\treturn {\n\t\t\ttransition: leaveTransition\n\t\t};\n\t};\n\n\tvar pageTransitions = {\n\t\tenter: {\n\t\t\tin: ['$state', transitionEnter],\n\t\t\tout: ['$state', transitionEnter]\n\t\t},\n\t\tleave: {\n\t\t\tout: ['$state', transitionLeave],\n\t\t\tin: ['$state', transitionLeave]\n\t\t}\n\t};\n\n\t$stateProvider\n\t\t.state('app', {\n\t\t\tviews: {\n\t\t\t\t'content': {\n\t\t\t\t\ttemplateUrl: 'home.html'\n\t\t\t\t}\n\t\t\t}\n\t\t})\n\t\t.state('app.page', {\n\t\t\turl: '/:slug.html',\n\t\t\tviews: {\n\t\t\t\t'content@': {\n\t\t\t\t\ttemplateProvider: [\"$stateParams\", \"$templateCache\", function($stateParams, $templateCache){\n\n\t\t\t\t\t\t// what we hope for\n\t\t\t\t\t\tvar html = $templateCache.get($stateParams.slug + '.html');\n\n\t\t\t\t\t\t// what we settle for\n\t\t\t\t\t\tif (!html){\n\t\t\t\t\t\t\thtml = $templateCache.get('unknown.html');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// moment of truth\n\t\t\t\t\t\treturn html;\n\n\t\t\t\t\t}]\n\t\t\t\t}\n\t\t\t},\n\t\t\tdata: {\n\t\t\t\t'gsapifyRouter.content': pageTransitions\n\t\t\t}\n\t\t})\n\t\t.state('app.unknown', {\n\t\t\turl: '*path',\n\t\t\tviews: {\n\t\t\t\t'content@': {\n\n\t\t\t\t\tcontroller: [\"$state\", \"$stateParams\", \"$templateCache\", function($state, $stateParams, $templateCache){\n\n\t\t\t\t\t\t// clean up page slug\n\t\t\t\t\t\tvar slug = $state.params.path.replace(/^\\//, '').trim();\n\n\t\t\t\t\t\tif ($state.params.path === ''){\n\n\t\t\t\t\t\t\t// default page\n\t\t\t\t\t\t\t$state.go('app.page', {slug: 'home'});\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\t// if just missing extension, be forgiving\n\t\t\t\t\t\t\tif ($templateCache.get(slug + '.html')){\n\t\t\t\t\t\t\t\t$state.go('app.page', {slug: slug});\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\t\t\t\t\t}],\n\n\t\t\t\t\t// last resort\n\t\t\t\t\ttemplateUrl: 'unknown.html'\n\n\t\t\t\t}\n\t\t\t}\n\t\t});\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name blurrable\n * @description\n * Defines page content elements that should be blurred during modal events\n */\nangular.module('app').directive('blurrable', [\"$rootScope\", function($rootScope){\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function(scope, elem, attr){\n\n\t\t\tif (!$rootScope.blurrables){\n\n\t\t\t\tfunction getBlurClass(){\n\t\t\t\t\tvar isBlurrable = true;\n\t\t\t\t\tif (scope.isMobile){\n\t\t\t\t\t\tisBlurrable = false;\n\t\t\t\t\t} else if (scope.currentBrowser){\n\t\t\t\t\t\tif (/edge/i.test(scope.currentBrowser.engine.name)){\n\t\t\t\t\t\t\tisBlurrable = false;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn isBlurrable ? 'blur' : 'blur-fallback';\n\t\t\t\t}\n\n\t\t\t\tfunction addBlur(key){\n\t\t\t\t\tif ($rootScope.blurrables[key]){\n\t\t\t\t\t\t_.each($rootScope.blurrables[key].elements, function(el){\n\t\t\t\t\t\t\tel.addClass(getBlurClass());\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$rootScope.blurrables[key].blurred = true;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tfunction removeBlur(key){\n\t\t\t\t\tif ($rootScope.blurrables[key]){\n\t\t\t\t\t\t_.each($rootScope.blurrables[key].elements, function(el){\n\t\t\t\t\t\t\tel.removeClass(getBlurClass());\n\t\t\t\t\t\t});\n\t\t\t\t\t\t$rootScope.blurrables[key].blurred = false;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t$rootScope.blurrables = {};\n\n\t\t\t\t$rootScope.blur = function(key){\n\t\t\t\t\taddBlur(key || 'default');\n\t\t\t\t};\n\n\t\t\t\t$rootScope.unblur = function(key){\n\t\t\t\t\tremoveBlur(key || 'default');\n\t\t\t\t};\n\n\t\t\t\t$rootScope.blurred = function(key){\n\t\t\t\t\treturn ($rootScope.blurrables[key || 'default'].blurred);\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar key = attr.blurrable || 'default';\n\n\t\t\tif (!$rootScope.blurrables[key]){\n\t\t\t\t$rootScope.blurrables[key] = {\n\t\t\t\t\tblurred: false,\n\t\t\t\t\telements: []\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t$rootScope.blurrables[key].elements.push(elem);\n\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name browser\n * @description\n * Identify web browsers\n */\nangular.module('app').factory('browser', function(){\n\n\t/**\n\t * browser parser\n\t * @var {Object}\n\t */\n\tvar parser = new UAParser();\n\n\t/**\n\t * determine if this is a development browser\n\t *\n\t * @param {Object} currentBrowser\n\t * @return {Boolean}\n\t */\n\tfunction isDevelopmentBrowser(currentBrowser){\n\n\t\tvar key = currentBrowser.browser.name.toLowerCase();\n\n\t\tif (/(firefox|chrome|opera|safari)/i.test(key)){\n\n\t\t\tif (currentBrowser.browser.latestVersion){\n\n\t\t\t\tvar currentVersion = parseInt(currentBrowser.browser.version.replace(/^(\\d+).*$/, '$1'));\n\n\t\t\t\tif (currentVersion >= currentBrowser.browser.latestVersion){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * determine if this is the latest browser (only popular browsers are tested)\n\t *\n\t * @param {Object} currentBrowser\n\t * @return {Boolean}\n\t */\n\tfunction isLatestBrowser(currentBrowser){\n\n\t\tvar key = currentBrowser.browser.name.toLowerCase();\n\n\t\tif (/(firefox|chrome|opera|safari)/i.test(key)){\n\n\t\t\tif (currentBrowser.browser.latestVersion){\n\n\t\t\t\tvar currentVersion = parseInt(currentBrowser.browser.version.replace(/^(\\d+).*$/, '$1'));\n\t\t\t\tvar stableVersion = parseInt(currentBrowser.browser.stableVersion.replace(/^(\\d+).*$/, '$1'));\n\n\t\t\t\tif (currentVersion >= stableVersion){\n\t\t\t\t\treturn true;\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn false;\n\n\t}\n\n\t/**\n\t * get browser icon url\n\t *\n\t * @param {Object} currentBrowser\n\t * @return {String}\n\t */\n\tfunction getIcon(currentBrowser){\n\n\t\tvar stableBrowsers = ['adblock', 'airweb', 'android-webview-beta', 'android', 'avant', 'boat', 'brave', 'chrome-android', 'chrome-beta-android', 'chrome-dev-android', 'chrome', 'cm', 'coast', 'coc-coc', 'diigo', 'dolphin', 'dooble', 'edge', 'epic', 'firefox-beta', 'firefox-developer-edition', 'firefox', 'icab-mobile', 'icecat', 'iceweasel', 'internet-explorer-tile', 'internet-explorer', 'k-meleon', 'konqueror', 'lightning', 'link-bubble', 'mercury', 'midori', 'mihtool', 'netsurf', 'omniweb-test-build', 'omniweb', 'opera-beta', 'opera-mini-beta', 'opera-mini', 'opera', 'orbitum', 'pale-moon', 'puffin', 'qupzilla', 'rekong', 'roccat', 'safari-ios', 'safari', 'seamonkey', 'silk', 'sleipnir-mac', 'sleipnir-mobile', 'sleipnir-windows', 'sogou-mobile', 'tor', 'uc', 'vivaldi', 'waterfox', 'web', 'yandex'];\n\n\t\tvar unstableBrowsers = {\n\t\t\tfirefox\t: 'firefox-nightly',\n\t\t\tchrome\t: 'chrome-canary',\n\t\t\topera\t: 'opera-developer',\n\t\t\tsafari\t: 'webkit-nightly'\n\t\t};\n\n\t\tvar key = currentBrowser.browser.name.toLowerCase();\n\t\tvar iconIndex = _.indexOf(stableBrowsers, key);\n\t\tvar iconKey = stableBrowsers[iconIndex] || null;\n\n\t\tif (iconKey){\n\n\t\t\tif (currentBrowser.browser.development){\n\t\t\t\ticonKey = unstableBrowsers[iconKey];\n\t\t\t}\n\n\t\t\treturn '/assets/img/browsers/' + iconKey + '_256x256.png';\n\n\t\t}\n\n\t\treturn null;\n\n\t}\n\n\t/**\n\t * get the stable browser version (for known browsers)\n\t *\n\t * @param {String} key\n\t * @return {String}\n\t */\n\tfunction getStableBrowserVersion(key){\n\t\tkey = key.toLowerCase();\n\t\tvar version = null;\n\t\tif ('browserVersions' in window){\n\t\t\tif (window.browserVersions[key]){\n\t\t\t\tversion = window.browserVersions[key].stable;\n\t\t\t}\n\t\t}\n\t\treturn version;\n\t}\n\n\t/**\n\t * get the latest browser version (for known browsers)\n\t *\n\t * @param {String} key\n\t * @return {String}\n\t */\n\tfunction getLatestBrowserVersion(key){\n\t\tkey = key.toLowerCase();\n\t\tvar version = null;\n\t\tif ('browserVersions' in window){\n\t\t\tif (window.browserVersions[key]){\n\t\t\t\tversion = window.browserVersions[key].latest;\n\t\t\t}\n\t\t}\n\t\treturn version;\n\t}\n\n\t/**\n\t * get the current browser (and supporting data)\n\t *\n\t * @param {Void}\n\t * @return {Object}\n\t */\n\tfunction getCurrentBrowser(){\n\n\t\tvar result = parser.getResult();\n\n\t\t// use external browser version data\n\t\tresult.browser.stableVersion = undefined;\n\t\tvar key = result.browser.name.toLowerCase();\n\t\tif ('browserVersions' in window){\n\t\t\tif (window.browserVersions[key]){\n\t\t\t\tresult.browser.stableVersion = window.browserVersions[key].stable;\n\t\t\t\tresult.browser.latestVersion = window.browserVersions[key].latest;\n\t\t\t}\n\t\t}\n\n\t\t// development browser test\n\t\tresult.browser.development = isDevelopmentBrowser(result);\n\n\t\t// useful browser assets/urls\n\t\t// @todo: add download url\n\t\t// @todo: add homepage url\n\t\tresult.browser.urls = {\n\t\t\tdownload\t: undefined,\n\t\t\thomepage\t: undefined,\n\t\t\ticon\t\t: getIcon(result)\n\t\t};\n\n\t\treturn result;\n\n\t}\n\n\tvar browsers = [\n\n\t\t{\n\t\t\tname: 'Google Chrome',\n\t\t\tslug: 'chrome',\n\t\t\ticon: '/assets/img/browsers/chrome_256x256.png',\n\t\t\tdevelopment: false,\n\t\t\turl: 'https://www.google.com/chrome/browser/desktop/index.html',\n\t\t\tstableVersion: getStableBrowserVersion('chrome'),\n\t\t\tlatestVersion: getLatestBrowserVersion('chrome'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: false,\n\t\t\t\tsharedArrayBuffer\t: false,\n\t\t\t\tsimd\t\t\t\t: false,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: false,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: true,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: true,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: true,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: true,\n\t\t\t\tgamepad\t\t\t\t: true\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t\t{\n\t\t\tname: 'Microsoft Edge',\n\t\t\tslug: 'edge',\n\t\t\ticon: '/assets/img/browsers/edge_256x256.png',\n\t\t\tdevelopment: false,\n\t\t\turl: 'https://www.microsoft.com/en-us/download/details.aspx?id=48126',\n\t\t\tstableVersion: getStableBrowserVersion('edge'),\n\t\t\tlatestVersion: getLatestBrowserVersion('edge'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: false,\n\t\t\t\tsharedArrayBuffer\t: false,\n\t\t\t\tsimd\t\t\t\t: false,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: false,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: true,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: true,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: true,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: true,\n\t\t\t\tgamepad\t\t\t\t: true\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t\t{\n\t\t\tname: 'Mozilla Firefox',\n\t\t\tslug: 'firefox',\n\t\t\ticon: '/assets/img/browsers/firefox_256x256.png',\n\t\t\tdevelopment: false,\n\t\t\turl: 'https://www.mozilla.org/en-US/firefox/new/',\n\t\t\tstableVersion: getStableBrowserVersion('firefox'),\n\t\t\tlatestVersion: getLatestBrowserVersion('firefox'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: false,\n\t\t\t\tsharedArrayBuffer\t: false,\n\t\t\t\tsimd\t\t\t\t: false,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: false,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: true,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: true,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: true,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: false,\n\t\t\t\tgamepad\t\t\t\t: true\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t\t{\n\t\t\tname: 'Apple Safari',\n\t\t\tslug: 'safari',\n\t\t\ticon: '/assets/img/browsers/safari_256x256.png',\n\t\t\tdevelopment: false,\n\t\t\turl: 'https://support.apple.com/en-us/HT204416',\n\t\t\tstableVersion: getStableBrowserVersion('safari'),\n\t\t\tlatestVersion: getLatestBrowserVersion('safari'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: false,\n\t\t\t\tsharedArrayBuffer\t: false,\n\t\t\t\tsimd\t\t\t\t: false,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: false,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: false,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: false,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: false,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: false,\n\t\t\t\tgamepad\t\t\t\t: false\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t\t{\n\t\t\tname: 'Webkit Nightly',\n\t\t\tslug: 'webkit',\n\t\t\ticon: '/assets/img/browsers/webkit-nightly_256x256.png',\n\t\t\tdevelopment: true,\n\t\t\turl: 'https://nightly.webkit.org/',\n\t\t\tstableVersion: getLatestBrowserVersion('safari'),\n\t\t\tlatestVersion: getLatestBrowserVersion('safari'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: false,\n\t\t\t\tsharedArrayBuffer\t: false,\n\t\t\t\tsimd\t\t\t\t: false,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: false,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: false,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: false,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: true,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: false,\n\t\t\t\tgamepad\t\t\t\t: true\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t\t{\n\t\t\tname: 'Google Chrome Canary',\n\t\t\tslug: 'chrome',\n\t\t\ticon: '/assets/img/browsers/chrome-canary_256x256.png',\n\t\t\tdevelopment: true,\n\t\t\turl: 'https://www.google.com/chrome/browser/canary.html',\n\t\t\tstableVersion: getLatestBrowserVersion('chrome'),\n\t\t\tlatestVersion: getLatestBrowserVersion('chrome'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: false,\n\t\t\t\tsharedArrayBuffer\t: false,\n\t\t\t\tsimd\t\t\t\t: false,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: false,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: true,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: true,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: true,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: true,\n\t\t\t\tgamepad\t\t\t\t: true\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t\t{\n\t\t\tname: 'Mozilla Firefox Nightly',\n\t\t\tslug: 'firefox',\n\t\t\ticon: '/assets/img/browsers/firefox-nightly_256x256.png',\n\t\t\tdevelopment: true,\n\t\t\turl: 'https://nightly.mozilla.org/',\n\t\t\tstableVersion: getLatestBrowserVersion('firefox'),\n\t\t\tlatestVersion: getLatestBrowserVersion('firefox'),\n\t\t\tsupportedFeatures: {\n\t\t\t\toptimizedJavaScript\t: true,\n\t\t\t\tasm\t\t\t\t\t: true,\n\t\t\t\twebAssembly\t\t\t: true,\n\t\t\t\tsharedArrayBuffer\t: true,\n\t\t\t\tsimd\t\t\t\t: true,\n\t\t\t\tcanvas\t\t\t\t: true,\n\t\t\t\twebGl\t\t\t\t: true,\n\t\t\t\twebGl2\t\t\t\t: true,\n\t\t\t\twebAudio\t\t\t: true,\n\t\t\t\tfullscreen\t\t\t: true,\n\t\t\t\tpointerLock\t\t\t: true,\n\t\t\t\tindexedDb\t\t\t: true,\n\t\t\t\tserviceWorker\t\t: true,\n\t\t\t\twebSocket\t\t\t: true,\n\t\t\t\twebRtc\t\t\t\t: true,\n\t\t\t\tdomLevel3\t\t\t: true,\n\t\t\t\ttouch\t\t\t\t: false,\n\t\t\t\tgamepad\t\t\t\t: true\n\t\t\t},\n\t\t\tmobile: false\n\t\t},\n\n\t];\n\n\tfunction getBrowsers(){\n\t\treturn browsers;\n\t}\n\n\treturn {\n\t\tgetCurrentBrowser\t: getCurrentBrowser,\n\t\tgetBrowsers\t\t\t: getBrowsers\n\t};\n\n});\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byActiveDemoGame\n * @description\n * Get active demo-friendly games.\n */\nangular.module('app').filter('byActiveDemoGame', function(){\n\treturn function(games, currentBrowser){\n\t\tvar results = {};\n\t\t_.each(games, function(game, key){\n\t\t\tif (game.desktopDemo || game.mobileDemo){\n\t\t\t\tif (!currentBrowser){\n\t\t\t\t\tresults[key] = game;\n\t\t\t\t}\n\t\t\t\tvar isMobile = currentBrowser && (currentBrowser.device.type === 'mobile');\n\t\t\t\tif (isMobile && game.mobileDemo || !isMobile && game.desktopDemo){\n\t\t\t\t\tresults[key] = game;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn results;\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byActiveGame\n * @description\n * Get active games.\n */\nangular.module('app').filter('byActiveGame', function(){\n\treturn function(games, currentBrowser){\n\t\tvar results = {};\n\t\t_.each(games, function(game, key){\n\t\t\tif (game.desktopTest || game.mobileTest){\n\t\t\t\tif (!currentBrowser){\n\t\t\t\t\tresults[key] = game;\n\t\t\t\t}\n\t\t\t\tvar isMobile = currentBrowser && (currentBrowser.device.type === 'mobile');\n\t\t\t\tif (isMobile && game.mobileTest || !isMobile && game.desktopTest){\n\t\t\t\t\tresults[key] = game;\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t\treturn results;\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byCustomBrowserOrder\n * @description\n * Get recommended browsers via a custom (client-defined) order.\n */\nangular.module('app').filter('byCustomBrowserOrder', function(){\n\treturn function(browsers){\n\t\tvar split = _.partition(browsers, function(browser){\n\t\t\treturn !browser.development;\n\t\t});\n\t\tsplit[0] = _.shuffle(split[0]);\n\t\tsplit[1] = _.shuffle(split[1]);\n\t\treturn _.flatten(split);\n\t};\n});\n\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byCustomResourceOrder\n * @description\n * Get developer resources via a custom (client-defined) order.\n */\nangular.module('app').filter('byCustomResourceOrder', function(){\n\treturn function(resources){\n\t\tvar split = _.partition(resources, function(resource){\n\t\t\treturn !/github\\.com/i.test(resource.url);\n\t\t});\n\t\tsplit[0] = _.shuffle(split[0]);\n\t\treturn _.flatten(split);\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byGameFolderSizeOrder\n * @description\n * Get back games ordered by folder size (smallest to largest).\n */\nangular.module('app').filter('byGameFolderSizeOrder', function(){\n\treturn function(games){\n\n\t\tvar keys = _.keys(games);\n\n\t\t// remember keys\n\t\t_.each(keys, function(key){\n\t\t\tgames[key].key = key;\n\t\t});\n\n\t\t// deconstruct object values\n\t\tvar vals = _.values(games);\n\n\t\t// sort by folder size\n\t\tvals = _.sortBy(vals, function(val){\n\t\t\treturn val.folderSize;\n\t\t});\n\n\t\t// re-stitch objects\n\t\tvar orderedGames = {};\n\t\t_.each(vals, function(val){\n\t\t\torderedGames[val.key] = val;\n\t\t\tdelete orderedGames[val.key].key;\n\t\t});\n\n\t\treturn orderedGames;\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byRandomGameOrder\n * @description\n * Get back games in a random order.\n */\nangular.module('app').filter('byRandomGameOrder', function(){\n\treturn function(games){\n\n\t\t// randomize game order\n\t\tvar keys = _.shuffle(_.keys(games));\n\t\tvar randomizedGames = {};\n\t\t_.each(keys, function(key){\n\t\t\trandomizedGames[key] = games[key];\n\t\t});\n\n\t\treturn randomizedGames;\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc filter\n * @name byPageType\n * @description\n * Get pages by type.\n */\nangular.module('app').filter('byPageType', function(){\n\treturn function(pages, type){\n\t\treturn _.filter(pages, function(page){\n\t\t\treturn page.type && page.type === type;\n\t\t});\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name capture-arrows\n * @description\n * Capture arrow key events\n */\nangular.module('app').directive('captureArrows', [\"$timeout\", \"$rootScope\", \"easing\", \"navigation\", function($timeout, $rootScope, easing, navigation){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope, element){\n\n\t\t\tscope.triggerArrow = function(direction){\n\n\t\t\t\t// temporarily add arrow direction class (css animations)\n\t\t\t\tangular.element('body').addClass('arrow-' + direction);\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tangular.element('body').removeClass('arrow-' + direction);\n\t\t\t\t}, 250);\n\n\t\t\t\t// perform navigation\n\t\t\t\tnavigation.navigateByDirection(direction).catch(function (error){\n\t\t\t\t\tif (!_.isString(error)) {\n\t\t\t\t\t\tthrow error;\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t};\n\n\t\t\telement.on('keydown', function(event){\n\n\t\t\t\tif (!$rootScope.blurred()){\n\n\t\t\t\t\tvar direction;\n\n\t\t\t\t\tswitch(event.which){\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\t\tdirection = 'left';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 38:\n\t\t\t\t\t\t\tdirection = 'up';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\t\tdirection = 'right';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 40:\n\t\t\t\t\t\t\tdirection = 'down';\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tscope.triggerArrow(direction);\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name capture-diagnostic-key\n * @description\n * Capture diagnostic hotkey (f12)\n */\nangular.module('app').directive('captureDiagnosticKey', [\"$state\", function($state){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\t\t\tfunction triggerDiagnostic(code){\n\t\t\t\tif (code === 123){\n\t\t\t\t\t$state.go('app.page', {slug: 'diagnostics'});\n\t\t\t\t\tscope.$apply();\n\t\t\t\t}\n\t\t\t}\n\n\t\t\telem.on('keydown', function(e){\n\t\t\t\ttriggerDiagnostic(e.which);\n\t\t\t});\n\n\t\t}\n\t};\n}]);\n\n\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name capture-konami\n * @description\n * Capture konami key sequence events\n */\nangular.module('app').directive('captureKonami', function(){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\t\t\tvar konami = [];\n\n\t\t\tfunction triggerKonami(code){\n\n\t\t\t\tvar seq = [38, 38, 40, 40, 37, 39, 37, 39, 66, 65];\n\t\t\t\tvar next = konami.length || 0;\n\n\t\t\t\tif (next === 10){\n\t\t\t\t\tif (code === 32 || code === 13){\n\t\t\t\t\t\tconsole.log('KONAMI!!!!');\n\t\t\t\t\t\tscope.status = 'KONAMI!!!';\n\t\t\t\t\t\tscope.$apply();\n\t\t\t\t\t}\n\t\t\t\t\tkonami = [];\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (seq[next] === code){\n\t\t\t\t\tkonami.push(code);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\telem.on('keydown', function(e){\n\t\t\t\ttriggerKonami(e.which);\n\t\t\t});\n\n\t\t}\n\t};\n});\n\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name capture-mouse\n * @description\n * Capture mouse events\n */\nangular.module('app').directive('captureMouse', [\"$timeout\", function($timeout){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\t\t\tfunction triggerMouseMove(){\n\t\t\t\tangular.element('body').addClass('mouse-move');\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tangular.element('body').removeClass('mouse-move');\n\t\t\t\t}, 250);\n\t\t\t}\n\n\t\t\tfunction triggerMouseClick(){\n\t\t\t\tangular.element('body').addClass('mouse-click');\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tangular.element('body').removeClass('mouse-click');\n\t\t\t\t}, 250);\n\t\t\t}\n\n\t\t\telem.on('mousemove', function(){\n\t\t\t\ttriggerMouseMove();\n\t\t\t});\n\n\t\t\telem.on('click', function(){\n\t\t\t\ttriggerMouseClick();\n\t\t\t});\n\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name circle-grid\n * @description\n * Circle Grid (Animated Backdrop)\n */\nangular.module('app').directive('circleGrid', [\"$timeout\", function($timeout){\n\treturn {\n\t\trestrict: 'C',\n\t\tlink: function(scope, elem){\n\n\t\t\tvar minSmokeCount\t= 5;\n\t\t\tvar maxSmokeCount\t= 10;\n\t\t\tvar circleSize\t\t= 45;\n\t\t\tvar supportedPages\t= ['faq', 'home', 'media', 'resources', 'rights', 'upgrade'];\n\n\t\t\t/**\n\t\t\t * Geometry Vector library (x,y based)\n\t\t\t */\n\t\t\tMath.Vector = function(x, y) {\n\t\t\t\tthis.x = x;\n\t\t\t\tthis.y = y;\n\t\t\t};\n\t\t\tMath.Vector.prototype = {\n\t\t\t\tclone: function() {\n\t\t\t\t\treturn new Math.Vector(this.x, this.y);\n\t\t\t\t},\n\t\t\t\tnegate: function() {\n\t\t\t\t\tthis.x = -this.x;\n\t\t\t\t\tthis.y = -this.y;\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tneg: function() {\n\t\t\t\t\treturn this.clone().negate();\n\t\t\t\t},\n\t\t\t\taddeq: function(v) {\n\t\t\t\t\tthis.x += v.x;\n\t\t\t\t\tthis.y += v.y;\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tsubeq: function(v) {\n\t\t\t\t\treturn this.addeq(v.neg());\n\t\t\t\t},\n\t\t\t\tadd: function(v) {\n\t\t\t\t\treturn this.clone().addeq(v);\n\t\t\t\t},\n\t\t\t\tsub: function(v) {\n\t\t\t\t\treturn this.clone().subeq(v);\n\t\t\t\t},\n\t\t\t\tmulteq: function(c) {\n\t\t\t\t\tthis.x *= c;\n\t\t\t\t\tthis.y *= c;\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tdiveq: function(c) {\n\t\t\t\t\tthis.x /= c;\n\t\t\t\t\tthis.y /= c;\n\t\t\t\t\treturn this;\n\t\t\t\t},\n\t\t\t\tmult: function(c) {\n\t\t\t\t\treturn this.clone().multeq(c);\n\t\t\t\t},\n\t\t\t\tdiv: function(c) {\n\t\t\t\t\treturn this.clone().diveq(c);\n\t\t\t\t},\n\t\t\t\tdot: function(v) {\n\t\t\t\t\treturn this.x * v.x + this.y * v.y;\n\t\t\t\t},\n\t\t\t\tlength: function() {\n\t\t\t\t\treturn Math.sqrt(this.dot(this));\n\t\t\t\t},\n\t\t\t\tnormal: function() {\n\t\t\t\t\treturn this.clone().diveq(this.length());\n\t\t\t\t}\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * generate random smoke containers html\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {String} html\n\t\t\t */\n\t\t\tfunction generateSmokeHtml(){\n\n\t\t\t\tvar count = _.random(minSmokeCount, maxSmokeCount);\n\t\t\t\tvar type = null;\n\t\t\t\tvar html = '';\n\n\t\t\t\tfor (var i = 0; i < count; i++){\n\t\t\t\t\ttype = _.random(1, 2);\n\t\t\t\t\thtml += '<div class=\"smoke' + type + '\"></div>';\n\t\t\t\t}\n\n\t\t\t\treturn html;\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * generate container elements\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction generateContainers(){\n\n\t\t\t\t// create random smoke elements\n\t\t\t\tvar smokeHtml = generateSmokeHtml();\n\n\t\t\t\t// create master container(s)\n\t\t\t\tvar container = $('<div class=\"grid-container\">' + smokeHtml + '<div class=\"circle-container\"></div></div>');\n\n\t\t\t\t// prepend to directive container\n\t\t\t\t$(elem).prepend(container);\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * randomize smoke positions\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction randomizeSmokePosition(){\n\n\t\t\t\tvar selector\t\t= $(elem).find('.smoke1,.smoke2'),\n\t\t\t\t\twidth \t\t\t= $(window).width(),\n\t\t\t\t\theight \t\t\t= document.body.scrollHeight,\n\t\t\t\t\tminPixelShift \t= -100;\n\n\t\t\t\tselector.each(function(){\n\t\t\t\t\t$(this).css({\n\t\t\t\t\t\tmarginTop\t: _.random(minPixelShift, height),\n\t\t\t\t\t\tmarginLeft\t: _.random(minPixelShift, width)\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * generate circle elements\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction generateCircles(){\n\n\t\t\t\tvar width \t= $(window).width(),\n\t\t\t\t\theight \t= document.body.scrollHeight,\n\t\t\t\t\tcolumns\t= Math.floor(width / circleSize),\n\t\t\t\t\trows\t= Math.floor(height / circleSize),\n\t\t\t\t\tcount \t= columns * rows;\n\n\t\t\t\tfor (var i = 0; i < count; i++){\n\t\t\t\t\t$( '.circle-container' ).append('<div class=\"circle-outer\"><div class=\"circle-inner\"></div></div>');\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * teach an element to evade mouse focus\n\t\t\t *\n\t\t\t * @param {DOMEvent}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction evade(evt) {\n\n\t\t\t\tvar $this = $(this),\n\t\t\t\t\tcorner = $this.offset(),\n\t\t\t\t\tcenter = {\n\t\t\t\t\t\tx: corner.left + $this.outerWidth() / 2,\n\t\t\t\t\t\ty: corner.top + $this.outerHeight() / 2\n\t\t\t\t\t},\n\t\t\t\t\tdist = new Math.Vector(center.x - evt.pageX, center.y - evt.pageY),\n\t\t\t\t\tclosest = $this.outerWidth() / 2;\n\n\t\t\t\t// proximity test\n\t\t\t\tif (dist.length() >= closest) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t// calculate new position\n\t\t\t\tvar delta = dist.normal().multeq(closest).sub(dist),\n\t\t\t\t\tnewCorner = {\n\t\t\t\t\t\tleft: corner.left + delta.x,\n\t\t\t\t\t\ttop: corner.top + delta.y\n\t\t\t\t\t};\n\n\t\t\t\t// bounds check\n\t\t\t\tvar padding = parseInt($this.css('padding-left'));\n\t\t\t\tif (newCorner.left < -padding) {\n\t\t\t\t\tnewCorner.left = -padding;\n\t\t\t\t} else if (newCorner.left + $this.outerWidth() - padding > $(document).width()) {\n\t\t\t\t\tnewCorner.left = $(document).width() - $this.outerWidth() + padding;\n\t\t\t\t}\n\t\t\t\tif (newCorner.top < -padding) {\n\t\t\t\t\tnewCorner.top = -padding;\n\t\t\t\t} else if (newCorner.top + $this.outerHeight() - padding > $(document).height()) {\n\t\t\t\t\tnewCorner.top = $(document).height() - $this.outerHeight() + padding;\n\t\t\t\t}\n\n\t\t\t\t// move bumper\n\t\t\t\t$this.css('opacity', 0.25);\n\t\t\t\t$this.offset(newCorner);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * bind mouse movement to evade\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction beginEvade() {\n\t\t\t\t$(this).bind('mousemove', evade);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * unbind mousemove from evade and animate bumper back to original spot\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction endEvade() {\n\t\t\t\tvar $this = $(this);\n\t\t\t\t$this.unbind('mousemove', evade);\n\t\t\t\t$this.animate({\n\t\t\t\t\ttop\t\t: 0,\n\t\t\t\t\tleft\t: 0,\n\t\t\t\t\topacity\t: 0.07\n\t\t\t\t}, {\n\t\t\t\t\teasing: 'swing',\n\t\t\t\t\tduration: 500\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * setup evade events for each circle\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction setupEvadeEvents() {\n\t\t\t\t$('.circle-outer').bind('mouseover', beginEvade);\n\t\t\t\t$('.circle-outer').bind('mouseout', endEvade);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * kill the background animations\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction destroy(){\n\t\t\t\t$('.grid-container').remove();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * initialize the background animations\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction initialize(){\n\t\t\t\tgenerateContainers();\n\t\t\t\tgenerateCircles();\n\t\t\t\trandomizeSmokePosition();\n\t\t\t\tsetupEvadeEvents();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * re-initialize the background animations\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction reInitialize(){\n\t\t\t\tdestroy();\n\t\t\t\tinitialize();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * determine if a page has support for this animation experience\n\t\t\t *\n\t\t\t * @param {String} pagekey\n\t\t\t * @return {Boolean}\n\t\t\t */\n\t\t\tfunction pageHasSupport(pagekey){\n\t\t\t\treturn _.includes(supportedPages, pagekey);\n\t\t\t}\n\n\t\t\t// execute between digest cycles\n\t\t\t$timeout(function(){\n\n\t\t\t\tif (scope.isMobile === false){\n\n\t\t\t\t\t// not on this page\n\t\t\t\t\tif (!pageHasSupport(scope.stateParams.slug)){\n\t\t\t\t\t\treturn destroy();\n\t\t\t\t\t}\n\n\t\t\t\t\t// first time!\n\t\t\t\t\tinitialize();\n\n\t\t\t\t\tscope.$on('$stateChangeSuccess', function(event, toState, toParams){\n\n\t\t\t\t\t\t// not on this page\n\t\t\t\t\t\tif (!pageHasSupport(toParams.slug)){\n\t\t\t\t\t\t\treturn destroy();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// been here before, and ready to do it again\n\t\t\t\t\t\treInitialize();\n\n\t\t\t\t\t});\n\n\t\t\t\t\t$(window).resize(function(){\n\t\t\t\t\t\tdestroy();\n\t\t\t\t\t\tif (pageHasSupport(scope.stateParams.slug)){\n\t\t\t\t\t\t\tinitialize();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t});\n\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name d3-charts\n * @description\n * Generates data visualization charts using D3.js.\n */\nangular.module('app').directive('chartType', function(){\n\treturn {\n\t\trestrict: 'A',\n\t\trequire: ['?chartData', '?unitWidth', '?unitHeight', '?unitMargin'],\n\t\tlink: function(scope, elem, attr){\n\n\t\t\t// always use a uniqueid\n\t\t\tif (!elem.attr('id')){\n\t\t\t\telem.attr('id', _.uniqueId('d3-'));\n\t\t\t}\n\n\t\t\t// basic options\n\t\t\tvar type\t\t= attr.chartType;\n\t\t\tvar data\t\t= attr.chartData;\n\t\t\tvar unitWidth\t= attr.unitWidth || 10;\n\t\t\tvar unitHeight\t= attr.unitHeight || unitWidth;\n\t\t\tvar unitMargin\t= attr.unitMargin || 1;\n\n\t\t\t/**\n\t\t\t * generate a simple bar chart\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tvar barChart = function(){\n\n\t\t\t\t// svg container\n\t\t\t\tvar w = unitWidth * _.max(data);\n\t\t\t\tvar h = (unitHeight * data.length) + (unitMargin * (data.length - 1));\n\t\t\t\tvar svg = el.append('svg')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\t'preserveAspectRatio': 'none',\n\t\t\t\t\t\t'shape-rendering': 'crispEdges',\n\t\t\t\t\t\t'width': w,\n\t\t\t\t\t\t'height': h,\n\t\t\t\t\t\t'viewBox': function(){\n\t\t\t\t\t\t\treturn '0 0 ' + w + ' ' + h;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.style({\n\t\t\t\t\t\t'width': '100%',\n\t\t\t\t\t\t'height': '100%'\n\t\t\t\t\t});\n\n\t\t\t\t// rectangles\n\t\t\t\tvar rectangles = [];\n\t\t\t\t_.each(data, function(d, i){\n\t\t\t\t\trectangles.push({\n\t\t\t\t\t\tx: 0,\n\t\t\t\t\t\ty: (i * unitHeight) + (i * unitMargin),\n\t\t\t\t\t\twidth: d * unitWidth,\n\t\t\t\t\t\theight: unitHeight\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t// draw\n\t\t\t\tsvg.selectAll('rect')\n\t\t\t\t\t.data(rectangles)\n\t\t\t\t\t.enter()\n\t\t\t\t\t.append('rect')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\tx: function(d){ return d.x; },\n\t\t\t\t\t\ty: function(d){ return d.y; },\n\t\t\t\t\t\twidth: function(d){ return d.width; },\n\t\t\t\t\t\theight: function(d){ return d.height; }\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t/**\n\t\t\t * generate a circle chart (experimental)\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tvar circleChart = function(){\n\n\t\t\t\t// container dimensions\n\t\t\t\tvar w = 0;\n\t\t\t\tvar h = 0;\n\n\t\t\t\t// circles\n\t\t\t\tvar circles = [];\n\t\t\t\t_.each(data, function(d, i){\n\t\t\t\t\tvar prev = (i > 0) ? (circles[i - 1].cy + circles[i - 1].r) : 0;\n\t\t\t\t\tcircles.push({\n\t\t\t\t\t\tcx: d * unitWidth,\n\t\t\t\t\t\tcy: d * unitWidth + prev,\n\t\t\t\t\t\tr: d * unitWidth\n\t\t\t\t\t});\n\t\t\t\t\tw = _.max([w, (d * unitWidth * 2)]);\n\t\t\t\t\th = d * unitWidth + prev + (d * unitWidth);\n\t\t\t\t});\n\n\t\t\t\t// svg container\n\t\t\t\tvar svg = el.append('svg')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\t'preserveAspectRatio': 'none',\n\t\t\t\t\t\t//'shape-rendering': 'crispEdges',\n\t\t\t\t\t\t'width': w,\n\t\t\t\t\t\t'height': h,\n\t\t\t\t\t\t'viewBox': function(){\n\t\t\t\t\t\t\treturn '0 0 ' + w + ' ' + h;\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t\t.style({\n\t\t\t\t\t\t'width': '100%',\n\t\t\t\t\t\t'height': '100%'\n\t\t\t\t\t});\n\n\t\t\t\t// draw\n\t\t\t\tsvg.selectAll('circle')\n\t\t\t\t\t.data(circles)\n\t\t\t\t\t.enter()\n\t\t\t\t\t.append('circle')\n\t\t\t\t\t.attr({\n\t\t\t\t\t\tcx: function(d){ return d.cx; },\n\t\t\t\t\t\tcy: function(d){ return d.cy; },\n\t\t\t\t\t\tr: function(d){ return d.r; }\n\t\t\t\t\t});\n\t\t\t};\n\n\t\t\t// make it happen cap'n\n\t\t\tif (type && data){\n\n\t\t\t\t// self\n\t\t\t\tvar el = d3.select('#' + elem.attr('id'));\n\n\t\t\t\t// @todo: support external json files\n\t\t\t\t// @todo: validate data\n\t\t\t\tdata = JSON.parse(data);\n\n\t\t\t\tswitch(type){\n\n\t\t\t\t\t// bar chart\n\t\t\t\t\tcase 'bar':\n\t\t\t\t\t\tbarChart();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t// circle chart\n\t\t\t\t\tcase 'circle':\n\t\t\t\t\t\tcircleChart();\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name developer-resource\n * @description\n * Identify developer resources\n */\nangular.module('app').factory('developerResource', function(){\n\n\tvar resources = [\n\t\t{\n\t\t\tname: 'Mozilla Developer Network',\n\t\t\ticon: '/assets/img/resources/mdn.png',\n\t\t\turl: 'https://developer.mozilla.org/'\n\t\t},\n\t\t{\n\t\t\tname: 'Microsoft Developer Network',\n\t\t\ticon: '/assets/img/resources/msdn.png',\n\t\t\turl: 'https://insider.windows.com/'\n\t\t},\n\t\t{\n\t\t\tname: 'Google Developer Network',\n\t\t\ticon: '/assets/img/resources/chromium.png',\n\t\t\turl: 'https://developers.google.com/games/'\n\t\t},\n\t];\n\n\tfunction getResources(){\n\t\treturn resources;\n\t}\n\n\treturn {\n\t\tgetResources : getResources\n\t};\n\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name developer-resource-listing\n * @description\n * List developer resources\n */\nangular.module('app').directive('developerResourceListing', [\"$filter\", \"developerResource\", function($filter, developerResource){\n\treturn {\n\t\trestrict: 'C',\n\t\tlink: function(scope){\n\t\t\tvar byCustomResourceOrder = $filter('byCustomResourceOrder');\n\t\t\tscope.resources = byCustomResourceOrder(developerResource.getResources());\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name diagnostic-chart\n * @description\n * Output a diagnostic chart outlining information about the current browser.\n */\nangular.module('app').directive('diagnosticChart', [\"$compile\", function($compile){\n\treturn {\n\t\trestrict: 'C',\n\t\tlink: function(scope, elem){\n\n\t\t\t// current browser\n\t\t\tconsole.log(scope.currentBrowser);\n\n\t\t\t// generete template\n\t\t\tvar html = '<img style=\"float: right; max-width:60px;\" src=\"' + scope.currentBrowser.browser.urls.icon + '\"/>';\n\t\t\thtml += '<p>' + scope.currentBrowser.ua + '</p>';\n\t\t\thtml += '<table class=\"table table-compact\">';\n\n\t\t\t// browser\n\t\t\thtml += '<tr><th colspan=\"2\">BROWSER</th></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser name</td><td>' + scope.currentBrowser.browser.name + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser major</td><td>' + scope.currentBrowser.browser.major + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser version</td><td>' + scope.currentBrowser.browser.version + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser stable</td><td>' + scope.currentBrowser.browser.stableVersion + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser latest</td><td>' + scope.currentBrowser.browser.latestVersion + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;latest</td><td>' + scope.currentBrowser.browser.latest + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;development</td><td>' + scope.currentBrowser.browser.development + '</td></tr>';\n\n\t\t\t// engine\n\t\t\thtml += '<tr><th colspan=\"2\">ENGINE</th></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;name</td><td>' + scope.currentBrowser.engine.name + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;version</td><td>' + scope.currentBrowser.engine.version + '</td></tr>';\n\n\t\t\t// os\n\t\t\thtml += '<tr><th colspan=\"2\">OS</th></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;name</td><td>' + scope.currentBrowser.os.name + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;version</td><td>' + scope.currentBrowser.os.version + '</td></tr>';\n\n\t\t\t// separator\n\t\t\t//html += '<tr><td colspan=\"2\">&nbsp;</td></tr>';\n\n\t\t\t// cpu\n\t\t\thtml += '<tr><th colspan=\"2\">CPU</th></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;architecture</td><td>' + scope.currentBrowser.cpu.architecture + '</td></tr>';\n\n\t\t\t// device\n\t\t\thtml += '<tr><th colspan=\"2\">DEVICE</th></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;model</td><td>' + scope.currentBrowser.device.model + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;type</td><td>' + scope.currentBrowser.device.type + '</td></tr>';\n\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;vendor</td><td>' + scope.currentBrowser.device.vendor + '</td></tr>';\n\n\t\t\t// separator\n\t\t\t//html += '<tr><td colspan=\"2\">&nbsp;</td></tr>';\n\n\t\t\thtml += '<tr><th colspan=\"2\">FEATURES</th></tr>';\n\n\t\t\t// feature hierarchy\n\t\t\t_.each(scope.currentBrowser.browser.features, function(category, categoryKey){\n\t\t\t\thtml += '<tr><th colspan=\"2\">' + categoryKey.toUpperCase() + ' SUPPORT</th></tr>';\n\t\t\t\t_.each(category, function(feature, featureKey){\n\t\t\t\t\thtml += '<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;' + featureKey + '</td><td>' + feature + '</td></tr>';\n\t\t\t\t});\n\t\t\t});\n\n\t\t\thtml += '</table>';\n\n\t\t\t// show template\n\t\t\telem.html(html).show();\n\n\t\t\t// link the scope to template\n\t\t\t$compile(elem.contents())(scope);\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name easing\n * @description\n * Easing equations\n */\nangular.module('app').factory('easing', function(){\n\n\tfunction easeInQuad(t, b, c, d){\n\t\treturn c*(t/=d)*t + b;\n\t}\n\n\treturn {\n\t\teaseInQuad : easeInQuad\n\t};\n\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name view-faq\n * @description\n * View directive\n */\nangular.module('app').directive('viewFaq', [\"$timeout\", \"$document\", \"$rootScope\", function($timeout, $document, $rootScope){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: true,\n\t\tlink: function(scope, element){\n\n\t\t\t// @TODO: Temporary mobile check\n\t\t\tif(element.width() < 1099) {\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\t$timeout(function(){\n\t\t\t\t$rootScope.onLeftScroll = function(){ slider.slick('slickPrev'); };\n\t\t\t\t$rootScope.onRightScroll = function(){ slider.slick('slickNext'); };\n\t\t\t});\n\n\t\t\tvar slides;\n\n\t\t\tvar slider = element.find('.js-slick').slick({\n\t\t\t\tcenterMode: true,\n\t\t\t\tinfinite: false,\n\t\t\t\tinitialSlide: 0,\n\t\t\t\tvariableWidth: true,\n\t\t\t\tnextArrow: '<div class=\"nav-arrow nav-right slick-next\"><button class=\"nav-button\"></button></div>',\n\t\t\t\tprevArrow: '<div class=\"nav-arrow nav-left slick-prev\"><button class=\"nav-button\"></button></div>'\n\t\t\t});\n\n\t\t\t$timeout(function(){\n\t\t\t\tsetSlides();\n\t\t\t\tstyleSlides(0);\n\n\t\t\t\t$document.on('keydown', onKeyboard);\n\t\t\t});\n\n\t\t\tslider.on('beforeChange', function(event, slick, currenSlide, nextSlide){\n\t\t\t\tstyleSlides(nextSlide);\n\t\t\t});\n\n\t\t\tfunction onKeyboard(event){\n\t\t\t\tif (!$rootScope.blurred()){\n\t\t\t\t\tswitch(event.which){\n\t\t\t\t\t\tcase 37:\n\t\t\t\t\t\t\tslider.slick('slickPrev');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 39:\n\t\t\t\t\t\t\tslider.slick('slickNext');\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tfunction setSlides() {\n\t\t\t\tslides = element.find('.slick-slide').toArray()\n\t\t\t\t.reduce(function(accumulator, slide){\n\t\t\t\t\tslide = $(slide);\n\t\t\t\t\taccumulator[slide.data('slick-index')] = slide;\n\n\t\t\t\t\treturn accumulator;\n\t\t\t\t}, {});\n\t\t\t}\n\n\t\t\tfunction styleSlides(centerIndex){\n\t\t\t\t_.forEach(slides, function(slide, key){\n\n\t\t\t\t\tif (key === centerIndex - 1 || key === centerIndex + 1) {\n\t\t\t\t\t\tslide.addClass('secondary');\n\t\t\t\t\t\tslide.removeClass('tertiary');\n\t\t\t\t\t} else if (key === centerIndex - 2 || key === centerIndex + 2) {\n\t\t\t\t\t\tslide.addClass('tertiary');\n\t\t\t\t\t\tslide.removeClass('secondary');\n\t\t\t\t\t} else {\n\t\t\t\t\t\tslide.removeClass('secondary');\n\t\t\t\t\t\tslide.removeClass('tertiary');\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\telement.on('$destroy', function() {\n\t\t\t\t$document.off('keydown', onKeyboard);\n\t\t\t\t$rootScope.onLeftScroll = null;\n\t\t\t\t$rootScope.onRightScroll = null;\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name features\n * @description\n * View directive\n */\nangular.module('app').directive('viewFeatures', [\"$filter\", \"$state\", \"$timeout\", \"browser\", \"game\", \"gameSupport\", function($filter, $state, $timeout, browser, game, gameSupport){\n\treturn {\n\t\trestrict: 'C',\n\t\tlink: function(scope, elem){\n\t\t\tif (!scope.selectedTab) {\n\n\t\t\t\tscope.selectedTab = 'games';\n\n\t\t\t\t// @todo: build logic for these and re-enable them, styling is\n\t\t\t\t// already done\n\t\t\t\tscope.enableFilters = false;\n\t\t\t\tscope.enableSearch = false;\n\n\t\t\t\t// filters\n\t\t\t\tvar byCustomBrowserOrder = $filter('byCustomBrowserOrder');\n\t\t\t\tvar byActiveGame = $filter('byActiveGame');\n\t\t\t\tvar byGameFolderSizeOrder = $filter('byGameFolderSizeOrder');\n\n\t\t\t\t// browsers\n\t\t\t\tscope.browsers = byCustomBrowserOrder(browser.getBrowsers());\n\n\t\t\t\t// games\n\t\t\t\tscope.games = byActiveGame(game.getGames(), scope.currentBrowser);\n\t\t\t\tscope.games = byGameFolderSizeOrder(scope.games);\n\n\t\t\t\tscope.getCurrentBrowserFeatureClass = function(feature){\n\t\t\t\t\tif (gameSupport.hasFeature(feature)){\n\t\t\t\t\t\treturn 'supported';\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn 'not-supported';\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t\tscope.getGameFeatureClass = function(key, feature){\n\t\t\t\t\tvar result = 'not-in-use';\n\t\t\t\t\t_.each(scope.games, function(game, gameKey){\n\t\t\t\t\t\tif (gameKey === key){\n\t\t\t\t\t\t\tif (_.includes(game.features, feature)){\n\t\t\t\t\t\t\t\tresult = 'in-use';\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t\treturn result;\n\t\t\t\t};\n\n\t\t\t\tscope.getBrowserFeatureClass = function(browser, feature){\n\t\t\t\t\tif (/edge/i.test(browser.name) && feature === 'webRtc'){\n\t\t\t\t\t\t// @todo: improve webrtc test and remove this\n\t\t\t\t\t\treturn 'not-supported';\n\t\t\t\t\t}\n\t\t\t\t\treturn (browser.supportedFeatures[feature]) ? 'supported' : 'not-supported';\n\t\t\t\t};\n\n\t\t\t\tscope.getResultClass = function(key){\n\t\t\t\t\tvar results = scope.$parent.results;\n\n\t\t\t\t\tif (!results) {\n\t\t\t\t\t\treturn 'test-failed';\n\t\t\t\t\t}\n\n\t\t\t\t\tvar game = results[key];\n\n\t\t\t\t\tif (!game) {\n\t\t\t\t\t\treturn 'test-failed';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (game.error) {\n\t\t\t\t\t\tif (game.error.message === 'Game timed out') {\n\t\t\t\t\t\t\treturn 'test-timeout';\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\treturn 'test-failed';\n\t\t\t\t\t}\n\n\t\t\t\t\tif (!game.status || game.status.length === 0 || !game.results) {\n\t\t\t\t\t\treturn 'test-failed';\n\t\t\t\t\t}\n\n\t\t\t\t\treturn 'test-' + game.status;\n\t\t\t\t};\n\n\t\t\t\tscope.getFps = function(key){\n\t\t\t\t\tvar results = scope.$parent.results;\n\n\t\t\t\t\tif (!results) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar game = results[key];\n\n\t\t\t\t\tif (!game || !game.results || isNaN(game.results.fps)) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\treturn Math.floor(game.results.fps);\n\t\t\t\t};\n\n\t\t\t\tscope.getTotalTime = function(key){\n\t\t\t\t\tvar results = scope.$parent.results;\n\n\t\t\t\t\tif (!results) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar game = results[key];\n\n\t\t\t\t\tif (!game || !game.results || isNaN(game.results.totalTime)) {\n\t\t\t\t\t\treturn 0;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar totalTime = Math.floor(game.results.totalTime);\n\t\t\t\t\tvar minutes = totalTime / 1000 / 60;\n\t\t\t\t\tvar seconds = Math.floor(minutes % 1 * 60).toString();\n\n\t\t\t\t\treturn Math.floor(minutes) + ':' + (seconds.length === 1 ? '0' + seconds : seconds);\n\t\t\t\t};\n\n\t\t\t\tscope.getFramesDropped = function(key){\n\t\t\t\t\tvar value = 0;\n\t\t\t\t\tif (scope.$parent.results){\n\t\t\t\t\t\tvar game = scope.$parent.results[key];\n\t\t\t\t\t\tif (game && game.results && !isNaN(game.results.numStutterEvents)) {\n\t\t\t\t\t\t\tvalue = Math.floor(game.results.numStutterEvents);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn value;\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tscope.rerunTest = function(){\n\t\t\t\tscope.$parent.testState = 'intro';\n\t\t\t\t$state.go('app.page', {slug: 'tests'});\n\t\t\t};\n\n\t\t\tvar highlightRow = elem.find('.highlight-row');\n\t\t\tvar showRow = TweenMax.to(highlightRow, 0.5, {\n\t\t\t\tpaused: true,\n\t\t\t\tease: 'Cubic.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\topacity: 0.15\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tvar highlightColumn = elem.find('.highlight-column');\n\t\t\tvar showColumn = TweenMax.to(highlightColumn, 0.5, {\n\t\t\t\tpaused: true,\n\t\t\t\tease: 'Cubic.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\topacity: 0.15\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tfunction positionRow(y){\n\t\t\t\tTweenMax.to(highlightRow, 0.3, {\n\t\t\t\t\tease: 'Quint.easeOut',\n\t\t\t\t\tcss: {\n\t\t\t\t\t\ty: y\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction positionColumn(x){\n\t\t\t\tTweenMax.to(highlightColumn, 0.3, {\n\t\t\t\t\tease: 'Quint.easeOut',\n\t\t\t\t\tcss: {\n\t\t\t\t\t\tx: x\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tfunction showDefinitions(){\n\t\t\t\t$('div.msg-results').addClass('show-definitions');\n\t\t\t};\n\n\t\t\tfunction hideDefinitions(){\n\t\t\t\t$('div.msg-results').removeClass('show-definitions');\n\t\t\t};\n\n\t\t\t$timeout(function(){\n\t\t\t\telem.find('.feature-set').toArray().forEach(function(element){\n\t\t\t\t\tvar $element = $(element);\n\n\t\t\t\t\t$element.on('mouseover', function(){\n\t\t\t\t\t\tpositionRow(parseInt($element.css('margin-top').replace('px', '')) + $element.position().top + $element.height() * 0.5);\n\t\t\t\t\t\tshowRow.play();\n\t\t\t\t\t});\n\n\t\t\t\t\t$element.on('mouseout', function(){\n\t\t\t\t\t\tshowRow.reverse();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\tvar yourBrowser = elem.find('.feature-set.your-browser')[0];\n\n\t\t\t\t// position test button position based on games being tested\n\t\t\t\tvar gameCount = elem.find('.game').length;\n\n\t\t\t\tvar resultsButton = $('.show-test-results .msg-results .btn');\n\t\t\t\tresultsButton.css({marginTop: 54 + (gameCount * 90)});\n\n\t\t\t\telem.find('.feature-set .js-column').toArray().forEach(function(element){\n\t\t\t\t\tvar $element = $(element);\n\n\t\t\t\t\t$element.on('mouseover', function(){\n\t\t\t\t\t\tvar position;\n\n\t\t\t\t\t\tif ($.contains(yourBrowser, element)) {\n\t\t\t\t\t\t\tposition = $element.position().left + $element.width();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tposition = $element.position().left + $element.width() * 0.5;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tpositionColumn(position);\n\t\t\t\t\t\tshowColumn.play();\n\t\t\t\t\t});\n\n\t\t\t\t\t$element.on('mouseout', function(){\n\t\t\t\t\t\tshowColumn.reverse();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\telem.find('.header li:not(.section-title)').toArray().forEach(function(element){\n\t\t\t\t\tvar $element = $(element);\n\n\t\t\t\t\t$element.on('mouseover', function(){\n\t\t\t\t\t\tpositionColumn(($element.parent().position().left + $element.position().left + $element.width() * 0.4) * 0.995);\n\t\t\t\t\t\tshowColumn.play();\n\t\t\t\t\t});\n\n\t\t\t\t\t$element.on('mouseout', function(){\n\t\t\t\t\t\tshowColumn.reverse();\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\telem.find('.your-browser').toArray().forEach(function(element){\n\t\t\t\t\tvar $element = $(element);\n\t\t\t\t\tvar normalWidth = 900;\n\n\t\t\t\t\t$element.on('mouseover', function(){\n\t\t\t\t\t\tTweenMax.to(highlightRow, 0.2, {\n\t\t\t\t\t\t\tease: 'Cubic.easeInOut',\n\t\t\t\t\t\t\twidth: normalWidth\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t\t$element.on('mouseout', function(){\n\t\t\t\t\t\tTweenMax.to(highlightRow, 0.2, {\n\t\t\t\t\t\t\tease: 'Cubic.easeInOut',\n\t\t\t\t\t\t\twidth: '100%'\n\t\t\t\t\t\t});\n\t\t\t\t\t});\n\n\t\t\t\t});\n\n\t\t\t\t// show/hide definition popover\n\t\t\t\tvar testDefinitions = elem.find('svg.test-definitions');\n\t\t\t\ttestDefinitions.bind('click', showDefinitions);\n\t\t\t\ttestDefinitions.bind('mouseover', showDefinitions);\n\t\t\t\ttestDefinitions.bind('mouseout', hideDefinitions);\n\n\t\t\t\t// hide mobile popover on click\n\t\t\t\tvar popover = elem.find('.popover');\n\t\t\t\tpopover.bind('click', hideDefinitions);\n\n\t\t\t}, 0);\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name feedback\n * @description\n * Submit feedback to API and updated feedback form\n */\nangular.module('app').directive('feedback', [\"$http\", function($http){\n\treturn {\n\t\trestrict: 'C',\n\t\tlink: function(scope, elem){\n\t\t\telem.on('submit', function(){\n\n\t\t\t\tvar text = elem.find('textarea');\n\t\t\t\tif (!text.val()){\n\t\t\t\t\treturn console.error('nothing to submit');\n\t\t\t\t}\n\n\t\t\t\tvar success = function(){\n\t\t\t\t\ttext.val('');\n\t\t\t\t\tscope.showConfirmation(true);\n\t\t\t\t};\n\n\t\t\t\tvar error = function(){\n\t\t\t\t\tscope.showConfirmation(false);\n\t\t\t\t};\n\n\t\t\t\t$http.post('/feedback', {text: text.val()}).success(success).error(error);\n\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name game\n * @description\n * Identify web games\n */\nangular.module('app').factory('game', function(){\n\n\tvar cdnUrl = 'https://s3.amazonaws.com/owg/';\n\tvar games = {\n\n\t\tsponzadynamicshadows: {\n\t\t\tname: 'Sponza Dynamic Shadows',\n\t\t\ticon: cdnUrl + 'sponza/icon.png',\n\t\t\tscreenshot: cdnUrl + 'sponza/reference.png',\n\t\t\turl: cdnUrl + 'sponza/Demos/SponzaDynamicShadows/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'webGl',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 78560,\n\t\t\ttimeout: 60000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'WebGL JavaScript Framework',\n\t\t\t\t\tname: 'BabylonJS',\n\t\t\t\t\turl: 'http://www.babylonjs.com/'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: true,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: false,\n\t\t\tfullscreen: true\n\t\t},\n\n\t\theroesofparagon: {\n\t\t\tname: 'Heroes of Paragon',\n\t\t\ticon: cdnUrl + 'heroesofparagon/icon.png',\n\t\t\tscreenshot: cdnUrl + 'heroesofparagon/reference.png',\n\t\t\turl: cdnUrl + 'heroesofparagon/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'optimizedJavaScript',\n\t\t\t\t'webGl',\n\t\t\t\t'webAudio',\n\t\t\t\t'indexedDb',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 244488,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'Unity3D',\n\t\t\t\t\tname: 'EVERYDAYiPLAY',\n\t\t\t\t\turl: 'https://everydayiplay.com/'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: false,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: true,\n\t\t\tfullscreen: true\n\t\t},\n\n\t\tsuntemple: {\n\t\t\tname: 'Sun Temple',\n\t\t\ticon: cdnUrl + 'suntemple/icon.jpg',\n\t\t\tscreenshot: cdnUrl + 'suntemple/reference.png',\n\t\t\turl: cdnUrl + 'suntemple/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'optimizedJavaScript',\n\t\t\t\t'webGl',\n\t\t\t\t'indexedDb',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 203144,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'Unreal Engine 4.10',\n\t\t\t\t\tname: 'Sun Temple',\n\t\t\t\t\turl: 'https://www.unrealengine.com/'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: false,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: false,\n\t\t\tfullscreen: false\n\t\t},\n\n\t\tcasino: {\n\t\t\tname: 'Casino',\n\t\t\ticon: cdnUrl + 'casino/icon.jpg',\n\t\t\tscreenshot: cdnUrl + 'casino/reference.png',\n\t\t\turl: cdnUrl + 'casino/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'webGl',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 157720,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'PlayCanvas',\n\t\t\t\t\tname: 'Casino',\n\t\t\t\t\turl: 'https://playcanvas.com/industries/gambling'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: false,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: true,\n\t\t\tfullscreen: true\n\t\t},\n\n\t\talphabear: {\n\t\t\tname: 'Alphabear',\n\t\t\ticon: cdnUrl + 'alphabear/icon.jpg',\n\t\t\tscreenshot: cdnUrl + 'alphabear/reference.png',\n\t\t\turl: cdnUrl + 'alphabear/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'webGl',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 51968,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'SpryFox',\n\t\t\t\t\tname: 'Alphabear',\n\t\t\t\t\turl: 'http://spryfox.com/our-games/alphabear/'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: false,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: true,\n\t\t\tfullscreen: false\n\t\t},\n\n\t\thurry: {\n\t\t\tname: 'Hurry!',\n\t\t\ticon: cdnUrl + 'hurry/icon.jpg',\n\t\t\tscreenshot: cdnUrl + 'hurry/reference.png',\n\t\t\turl: cdnUrl + 'hurry/index.html',\n\t\t\twidth: 1117,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'canvas',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 2712,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'Hugh Kennedy',\n\t\t\t\t\tname: 'Hurry!',\n\t\t\t\t\turl: 'https://github.com/hughsk/ludum-dare-27'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: true,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: false,\n\t\t\tfullscreen: false\n\t\t},\n\n\t\tskisafari: {\n\t\t\tname: 'Ski Safari',\n\t\t\ticon: cdnUrl + 'skisafari/icon.jpg',\n\t\t\tscreenshot: cdnUrl + 'skisafari/reference.png',\n\t\t\turl: cdnUrl + 'skisafari/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'webGl',\n\t\t\t\t'domLevel3'\n\t\t\t],\n\t\t\tfolderSize: 96512,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'Sleepy Z Studios',\n\t\t\t\t\tname: 'Ski Safari',\n\t\t\t\t\turl: 'http://skisafari2.com/'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: false,\n\t\t\tmobileDemo: false,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: true,\n\t\t\tfullscreen: false\n\t\t},\n\n\t\tmedusae: {\n\t\t\tname: 'Medusae',\n\t\t\ticon: cdnUrl + 'medusae/icon.jpg',\n\t\t\tscreenshot: cdnUrl + 'medusae/reference.png',\n\t\t\turl: cdnUrl + 'medusae/index.html',\n\t\t\twidth: 1366,\n\t\t\theight: 768,\n\t\t\tfeatures: [\n\t\t\t\t'webGl'\n\t\t\t],\n\t\t\tfolderSize: 9328,\n\t\t\ttimeout: 120000,\n\t\t\tcredits: [\n\t\t\t\t{\n\t\t\t\t\tcategory: 'Jay Weeks',\n\t\t\t\t\tname: 'Medusae',\n\t\t\t\t\turl: 'https://github.com/jpweeks/particulate-medusae'\n\t\t\t\t}\n\t\t\t],\n\t\t\tmobileTest: true,\n\t\t\tmobileDemo: true,\n\t\t\tdesktopTest: true,\n\t\t\tdesktopDemo: true,\n\t\t\tfullscreen: true\n\t\t},\n\n\t};\n\n\tfunction getGames(){\n\t\treturn games;\n\t}\n\n\treturn {\n\t\tgetGames : getGames\n\t};\n\n});\n\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name game-browser\n * @description\n * Identify web browsers and their supported gaming features\n */\nangular.module('app').factory('gameBrowser', [\"browser\", \"gameSupport\", function(browser, gameSupport){\n\n\tfunction getCurrentBrowser(){\n\n\t\tvar currentBrowser = browser.getCurrentBrowser();\n\t\tvar featureHierarchy = gameSupport.getHierarchy(true);\n\t\tvar supportedFeatures = {};\n\t\tcurrentBrowser.browser.features = featureHierarchy;\n\t\t_.each(currentBrowser.browser.features, function(group, cat){\n\t\t\t_.each(group, function(obj, key){\n\t\t\t\tsupportedFeatures[key] = obj;\n\t\t\t});\n\t\t});\n\t\tcurrentBrowser.browser.supportedFeatures = supportedFeatures;\n\t\treturn currentBrowser;\n\n\t}\n\n\treturn {\n\t\tgetCurrentBrowser : getCurrentBrowser\n\t};\n\n}]);\n\n\n\n/**\n * @ngdoc directive\n * @name game-demos\n * @description\n * Game Demos\n */\nangular.module('app').directive('gameDemos', [\"game\", \"gameSupport\", \"$compile\", \"$filter\", \"$templateCache\", \"$timeout\", function(game, gameSupport, $compile, $filter, $templateCache, $timeout){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: true,\n\t\tlink: function(scope, element, attr){\n\n\t\t\t/**\n\t\t\t * unload the game test iframe\n\t\t\t *\n\t\t\t * @param {Function} cb\n\t\t\t */\n\t\t\tfunction unloadIframe(cb){\n\t\t\t\tvar container = $('.demo-viewer');\n\t\t\t\tvar iframe = $('iframe');\n\t\t\t\tif (!iframe || !iframe.attr('src')){\n\t\t\t\t\tcontainer.html('');\n\t\t\t\t\treturn cb();\n\t\t\t\t}\n\t\t\t\tiframe.attr('src', '/assets/games/blank.html');\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tiframe.remove();\n\t\t\t\t\tcontainer.html('');\n\t\t\t\t\tcb();\n\t\t\t\t}, 100);\n\t\t\t}\n\n\t\t\t// use active demo filter\n\t\t\tvar byActiveDemoGame = $filter('byActiveDemoGame');\n\n\t\t\t// get/expose games\n\t\t\tscope.games = byActiveDemoGame(game.getGames(), scope.currentBrowser);\n\n\t\t\t// get features\n\t\t\tvar features = {};\n\t\t\t_.each(gameSupport.getFeatures(), function(feature){\n\t\t\t\tfeatures[feature] = {\n\t\t\t\t\tselected   : false,\n\t\t\t\t\tfilterable : false\n\t\t\t\t};\n\t\t\t});\n\n\t\t\t// identify filterable features\n\t\t\tvar filterable = [];\n\t\t\t_.each(scope.games, function(game){\n\t\t\t\tfilterable = filterable.concat(game.features);\n\t\t\t});\n\t\t\tfilterable = _.uniq(filterable).sort();\n\n\t\t\t// update feature states\n\t\t\t_.each(filterable, function(feature){\n\t\t\t\tfeatures[feature].selected   = true;\n\t\t\t\tfeatures[feature].filterable = true;\n\t\t\t});\n\n\t\t\t// expose features\n\t\t\tscope.features = features;\n\n\t\t\tscope.playDemo = function(gameKey){\n\n\t\t\t\t// get selected game\n\t\t\t\tscope.selectedGame = scope.games[gameKey];\n\n\t\t\t\t// get demo template, populate with scope, add to modal\n\t\t\t\tvar template = $templateCache.get('demo.html');\n\n\t\t\t\tvar container = $('.modal-body');\n\n\t\t\t\tif (container){\n\n\t\t\t\t\tvar iframe = $('<iframe>', {\n\t\t\t\t\t\tid: 'game-frame',\n\t\t\t\t\t\tsrc: scope.selectedGame.url\n\t\t\t\t\t});\n\t\t\t\t\tiframe.load(function(){\n\t\t\t\t\t\tvar self = this;\n\t\t\t\t\t\tsetTimeout(function(){\n\t\t\t\t\t\t\tself.contentWindow.focus();\n\t\t\t\t\t\t}, 100);\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.html(template).show();\n\t\t\t\t\t$compile(container.contents())(scope);\n\n\t\t\t\t\tvar gameContainer = $('.game-container');\n\t\t\t\t\tif (gameContainer){\n\t\t\t\t\t\tgameContainer.html(iframe);\n\t\t\t\t\t}\n\n\t\t\t\t\twindow.onmessage = function(e){\n\t\t\t\t\t\tswitch(e.data.msg){\n\t\t\t\t\t\t\tcase 'inheritCanvasSize':\n\t\t\t\t\t\t\t\tconsole.log('inheritCanvasSize', e.data);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\n\t\t\t\t\t// show modal\n\t\t\t\t\tscope.showModal();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tscope.stopDemo = function(){\n\n\t\t\t\t// close modal\n\t\t\t\tscope.closeModal();\n\n\t\t\t\t// wipe modal body contents\n\t\t\t\tunloadIframe(function(){\n\t\t\t\t\t$('.demo-viewer').html('');\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t}\n\t};\n}]);\n\n\n/**\n * @ngdoc directive\n * @name sidebar\n * @description\n * Sidebar interactions for the Demo page on mobile.\n */\n\nangular.module('app').directive('gameDemosControl', [\"$timeout\", \"$rootScope\", function($timeout, $rootScope){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\t\t\t// When the button is clicked\n\t\t\t$('.intro button').on('click', function() {\n\n\t\t\t\t// Mark as opened\n\t\t\t\telem.addClass('open');\n\n\t\t\t\t// Animate the targeted sidebar\n\t\t\t\tif ($(this).data('target') == 'tags') {\n\t\t\t\t\tTweenMax.to($('.tags'), .5, { left: -20, ease: Back.easeOut.config(0.7) });\n\t\t\t\t} else {\n\t\t\t\t\tTweenMax.to($('.search'), .5, { right: -20, ease: Back.easeOut.config(0.7) });\n\t\t\t\t\t$('.search input').focus();\n\t\t\t\t}\n\n\t\t\t\t// Lock scrolling\n\t\t\t\t$('.view-demos').addClass('lock');\n\n\t\t\t\t// Blur content\n\t\t\t\t$rootScope.blur('mobile-demos');\n\n\t\t\t\t// What happens when you close the sidebar\n\t\t\t\telem.find('.close').on('click', function() {\n\n\t\t\t\t\t// Mark as closed\n\t\t\t\t\telem.removeClass('open');\n\n\t\t\t\t\t// Unlock scroll\n\t\t\t\t\t$('.view-demos').removeClass('lock');\n\n\t\t\t\t\t// Reset sidebar\n\t\t\t\t\tTweenMax.to($('.tags'), .5, { left: '-120%', ease: Back.easeOut.config(0.7) });\n\t\t\t\t\tTweenMax.to($('.search'), .5, { right: '-120%', ease: Back.easeOut.config(0.7) });\n\n\t\t\t\t\t// Unblur content\n\t\t\t\t\t$rootScope.unblur('mobile-demos');\n\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name game-chart\n * @description\n * Output a game support chart comparing features to the current browser\n */\nangular.module('app').directive('gameChart', [\"$compile\", \"game\", function($compile, game){\n\treturn {\n\t\trestrict: 'C',\n\t\tlink: function(scope, elem){\n\n\t\t\t// games\n\t\t\tvar games = game.getGames();\n\n\t\t\t// generete template\n\t\t\tvar html = '<table class=\"table\">';\n\n\t\t\tvar hasResults = !!(scope.results);\n\n\t\t\t// create a custom feature collection\n\t\t\tvar features = ['canvas', 'webgl', 'webgl2', 'gamepad'];\n\n\t\t\t// feature headers\n\t\t\thtml += '<tr><th colspan=\"2\"></th>';\n\t\t\t_.each(features, function(feature){\n\t\t\t\thtml += '<th>' + feature + '</th>';\n\t\t\t});\n\t\t\tif (hasResults){\n\t\t\t\thtml += '<th>results</th>';\n\t\t\t}\n\t\t\thtml += '</tr>';\n\n\t\t\t// each game\n\t\t\t_.each(games, function(game, key){\n\t\t\t\thtml += '<tr><td>' + game.name + '</td><td><img style=\"max-width:100px;\" src=\"' + game.icon + '\"/></td>';\n\t\t\t\t_.each(features, function(feature){\n\t\t\t\t\tif (_.contains(game.features, feature)){\n\t\t\t\t\t\thtml += '<td>yes</td>';\n\t\t\t\t\t} else {\n\t\t\t\t\t\thtml += '<td>no</td>';\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t\tif (hasResults){\n\t\t\t\t\thtml += '<td>' + (Math.round((scope.results[key].stopTime - scope.results[key].startTime) * 100) / 100) + 'ms</td>';\n\t\t\t\t}\n\t\t\t\thtml += '</tr>';\n\t\t\t});\n\n\t\t\thtml += '</table>';\n\n\t\t\t// show template\n\t\t\telem.html(html).show();\n\n\t\t\t// link the scope to template\n\t\t\t$compile(elem.contents())(scope);\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name gamesupport\n * @description\n * Tests game support features for the current web browser environment.\n */\nangular.module('app').factory('gameSupport', function(){\n\n\t/**\n\t * determine if current browser has asm.js support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasAsm(){\n\t\treturn true;\n\t}\n\n\t/**\n\t * determine if current browser has DOM Level 3 support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasDomLevel3(){\n\t\treturn true;\n\t}\n\n\t/**\n\t * determine if current browser has WebAssembly support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasWebAssembly(){\n\t\treturn false;\n\t}\n\n\t/**\n\t * determine if current browser has IndexedDB storage support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasIndexedDb(){\n\t\treturn !!('indexedDB' in window || 'mozIndexedDB' in window || 'webkitIndexedDB' in window || 'msIndexedDB' in window);\n\t}\n\n\t/**\n\t * determine if current browser has serviceWorker support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasServiceWorker(){\n\t\treturn !!(navigator.serviceWorker);\n\t}\n\n\t/**\n\t * determine if current browser has Canvas support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasCanvas(){\n\t\tvar canvas = document.createElement('canvas');\n\t\treturn !!(canvas && canvas.getContext && canvas.getContext('2d'));\n\t}\n\n\t/**\n\t * determine if current browser has WebGL1 support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasWebGl(){\n\t\tif ('WebGLRenderingContext' in window){\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tif (canvas){\n\t\t\t\treturn !!(canvas.getContext('webgl'));\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * determine if current browser has WebGL2 support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasWebGl2(){\n\t\tif ('WebGL2RenderingContext' in window){\n\t\t\tvar canvas = document.createElement('canvas');\n\t\t\tif (canvas){\n\t\t\t\treturn !!(canvas.getContext('webgl', {version: 2}));\n\t\t\t}\n\t\t}\n\t\treturn false;\n\t}\n\n\t/**\n\t * determine if current browser has Audio support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasWebAudio(){\n\t\treturn !!('AudioContext' in window || 'webkitAudioContext' in window);\n\t}\n\n\t/**\n\t * determine if current browser has WebSocket support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasWebSocket(){\n\t\treturn !!('WebSocket' in window);\n\t}\n\n\t/**\n\t * determine if current browser has WebRTC support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasWebRtc(){\n\t\treturn !!('RTCPeerConnection' in window || 'mozRTCPeerConnection' in window || 'webkitRTCPeerConnection' in window || 'msRTCPeerConnection' in window);\n\t}\n\n\t/**\n\t * determine if current browser has gamepad support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasGamepad(){\n\t\treturn !!('Gamepad' in window);\n\t}\n\n\t/**\n\t * determine if current browser has touch support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasTouch(){\n\t\treturn !!('Touch' in window);\n\t}\n\n\t/**\n\t * determine if current browser has motion support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasMotion(){\n\t\treturn !!('DeviceMotionEvent' in window && window.DeviceMotionEvent.acceleration);\n\t}\n\n\t/**\n\t * determine if current browser has pointer support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasPointer(){\n\t\treturn !!('onmousemove' in window);\n\t}\n\n\t/**\n\t * determine if current browser has keyboard support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasKeyboard(){\n\t\treturn !!(KeyboardEvent);\n\t}\n\n\t/**\n\t * determine if current browser has fullscreen support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasFullscreen(){\n\t\tvar div = document.createElement('div');\n\t\treturn !!(div && div.requestFullscreen || div.msRequestFullscreen || div.mozRequestFullScreen || div.webkitRequestFullscreen);\n\t}\n\n\t/**\n\t * determine if current browser has orientation support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasOrientation(){\n\t\treturn !!('screen' in window && (window.screen.orientation || window.screen.mozOrientation || window.screen.webkitOrientation || window.screen.msOrientation));\n\t}\n\n\t/**\n\t * determine if current browser has battery support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasBattery(){\n\t\treturn !!(navigator.battery || navigator.mozBattery || navigator.webkitBattery);\n\t}\n\n\t/**\n\t * determine if current browser has vibrate support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasVibrate(){\n\t\treturn !!(navigator.vibrate);\n\t}\n\n\t/**\n\t * determine if current browser has page visibility support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasVisibility(){\n\t\treturn !!('visibilityState' in document || 'hidden' in document);\n\t}\n\n\t/**\n\t * determine if current browser has geolocation support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasGeoLocation(){\n\t\treturn !!(navigator.geolocation);\n\t}\n\n\t/**\n\t * determine how many logical cores the current browser has access to\n\t *\n\t * @param {Void}\n\t * @return {Integer}\n\t */\n\tfunction getLogicalCores(){\n\t\tvar cores = -1;\n\t\tif ('hardwareConcurrency' in navigator){\n\t\t\tcores = navigator.hardwareConcurrency;\n\t\t}\n\t\treturn cores;\n\t}\n\n\t/**\n\t * determine if current browser has performance measurement support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasPerformance(){\n\t\treturn !!('performance' in window && performance.now);\n\t}\n\n\t/**\n\t * determine if current browser has SIMD support\n\t *\n\t * @param {Void}\n\t * @return {Boolean}\n\t */\n\tfunction hasSimd(){\n\t\treturn !!('SIMD' in window);\n\t}\n\n\tfunction hasMathImul(){\n\t\treturn !!('imul' in Math);\n\t}\n\n\tfunction hasMathFround(){\n\t\treturn !!('fround' in Math);\n\t}\n\n\tfunction hasArrayBufferTransfer(){\n\t\treturn !!('ArrayBuffer' in window && 'transfer' in ArrayBuffer);\n\t}\n\n\tfunction hasPointerLock(){\n\t\tvar div = document.createElement('div');\n\t\treturn !!(div.requestPointerLock || div.mozRequestPointerLock || div.webkitRequestPointerLock || div.msRequestPointerLock);\n\t}\n\n\tfunction hasBlobConstructor(){\n\t\ttry {\n\t\t\tvar blob = new Blob();\n\t\t\treturn !!(blob);\n\t\t} catch(e){\n\t\t}\n\t\treturn false;\n\t}\n\n\tfunction hasBlobBuilder(){\n\t\treturn !!(!hasBlobConstructor() && ('BlobBuilder' in window || 'MozBlobBuilder' in window || 'WebKitBlobBuilder' in window));\n\t}\n\n\tfunction hasSharedArrayBuffer(){\n\t\treturn !!('SharedArrayBuffer' in window);\n\t}\n\n\tfunction hasWebWorkers(){\n\t\treturn !!('Worker' in window);\n\t}\n\n\tfunction hasRequestAnimationFrame(){\n\t\treturn !!('requestAnimationFrame' in window);\n\t}\n\n\tfunction getEsVersion(){\n\n\t\twindow.es = {\n\t\t\tversions: [\n\t\t\t\t'1.1', '1.2', '1.3', '1.4', '1.5', '1.6', '1.7', '1.8', '1.9', '2.0'\n\t\t\t],\n\t\t\tversion: ''\n\t\t};\n\n\t\tfor (var i = 0; i < window.es.versions.length; i++){\n\t\t\tvar el = document.createElement('script');\n\t\t\tel.setAttribute('language', 'JavaScript' + window.es.versions[i]);\n\t\t\tel.text = 'window.es.version = \"' + window.es.versions[i] + '\";';\n\t\t\tdocument.getElementsByTagName('head')[0].appendChild(el);\n\t\t}\n\n\t\treturn parseFloat(window.es.version);\n\n\t}\n\n\tfunction hasOptimizedJavaScript(){\n\t\treturn (getEsVersion() >= 1.5);\n\t}\n\n\t/**\n\t * determine if the current web browser has a particular feature\n\t *\n\t * @param {String} feature\n\t * @param {Boolean} [advanced] default=false\n\t * @return {Boolean} null if unrecognized\n\t */\n\tfunction hasFeature(feature, advanced){\n\n\t\tvar result = null;\n\t\tvar features = getFeatures(advanced);\n\n\t\tif (_.includes(features, feature)){\n\t\t\t_.each(_advancedHierarchy, function(category){\n\t\t\t\t_.each(category, function(obj, featureKey){\n\t\t\t\t\tif (featureKey.toLowerCase() === feature.toLowerCase()){\n\t\t\t\t\t\tresult = obj;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\treturn result;\n\n\t}\n\n\t/**\n\t * determine if the current browser has a particular combination of features\n\t *\n\t * @param {Array} features\n\t * @return {Boolean}\n\t */\n\tfunction hasFeatures(features){\n\n\t\tvar results = [];\n\t\t_.each(features, function(feature){\n\t\t\tresults.push(hasFeature(feature));\n\t\t});\n\t\treturn _.every(results, _.identity);\n\n\t}\n\n\t/**\n\t * get a list of feature categories\n\t *\n\t * @param {Boolean} [advanced] default=false\n\t * @return {Array}\n\t */\n\tfunction getCategories(advanced){\n\t\tif (advanced){\n\t\t\treturn _.keys(_advancedHierarchy);\n\t\t} else {\n\t\t\treturn _.keys(_basicHierarchy);\n\t\t}\n\t}\n\n\t/**\n\t * get a list of features\n\t *\n\t * @param {Boolean} [advanced] default=false\n\t * @return {Array}\n\t */\n\tfunction getFeatures(advanced){\n\t\tvar features = [];\n\t\tvar hierarchy = (advanced) ? _advancedHierarchy : _basicHierarchy;\n\t\t_.each(hierarchy, function(category){\n\t\t\t_.each(category, function(feature, featureKey){\n\t\t\t\tfeatures.push(featureKey);\n\t\t\t});\n\t\t});\n\t\treturn features;\n\t}\n\n\t/**\n\t * get the feature hierarchy\n\t *\n\t * @param {Boolean} [advanced] default=false\n\t * @return {Object}\n\t */\n\tfunction getHierarchy(advanced){\n\t\treturn (advanced) ? _advancedHierarchy : _basicHierarchy;\n\t}\n\n\t/**\n\t * basic game support feature hierarchy\n\t * @var {Object}\n\t */\n\tvar _basicHierarchy = {\n\t\tcpu: {\n\t\t\tasm\t\t\t\t\t: hasAsm(),\n\t\t\toptimizedJavaScript\t: hasOptimizedJavaScript(),\n\t\t\twebAssembly\t\t\t: hasWebAssembly(),\n\t\t\tsharedArrayBuffer\t: hasSharedArrayBuffer(),\n\t\t\tsimd\t\t\t\t: hasSimd(),\n\t\t},\n\t\tgraphics: {\n\t\t\tcanvas\t\t\t\t: hasCanvas(),\n\t\t\twebGl\t\t\t\t: hasWebGl(),\n\t\t\twebGl2\t\t\t\t: hasWebGl2(),\n\t\t},\n\t\taudio: {\n\t\t\twebAudio\t\t\t: hasWebAudio(),\n\t\t},\n\t\texperience: {\n\t\t\tfullscreen\t\t\t: hasFullscreen(),\n\t\t\tpointerLock\t\t\t: hasPointerLock(),\n\t\t},\n\t\tstorage: {\n\t\t\tindexedDb\t\t\t: hasIndexedDb(),\n\t\t\tserviceWorker\t\t: hasServiceWorker(),\n\t\t},\n\t\tmultiplayer: {\n\t\t\twebSocket\t\t\t: hasWebSocket(),\n\t\t\twebRtc\t\t\t\t: hasWebRtc(),\n\t\t},\n\t\tinput: {\n\t\t\tdomLevel3\t\t\t: hasDomLevel3(),\n\t\t\ttouch\t\t\t\t: hasTouch(),\n\t\t\tgamepad\t\t\t\t: hasGamepad(),\n\t\t}\n\t};\n\n\t/**\n\t * advanced game support feature hierarchy\n\t * @var {Object}\n\t */\n\tvar _advancedHierarchy = {\n\t\tcpu: {\n\t\t\tasm\t\t\t\t\t\t: hasAsm(),\n\t\t\toptimizedJavaScript\t\t: hasOptimizedJavaScript(),\n\t\t\twebAssembly\t\t\t\t: hasWebAssembly(),\n\t\t\tsharedArrayBuffer\t\t: hasSharedArrayBuffer(),\n\t\t\tsimd\t\t\t\t\t: hasSimd(),\n\t\t\tlogicalCores\t\t\t: getLogicalCores(),\n\t\t\tperformance\t\t\t\t: hasPerformance(),\n\t\t\tmathImul\t\t\t\t: hasMathImul(),\n\t\t\tmathFround\t\t\t\t: hasMathFround(),\n\t\t\tarrayBufferTransfer\t\t: hasArrayBufferTransfer(),\n\t\t\tblobConstructor\t\t\t: hasBlobConstructor(),\n\t\t\tblobBuilder\t\t\t\t: hasBlobBuilder(),\n\t\t\twebWorkers\t\t\t\t: hasWebWorkers(),\n\t\t\trequestAnimationFrame\t: hasRequestAnimationFrame(),\n\t\t\tesVersion\t\t\t\t: getEsVersion()\n\t\t},\n\t\tgraphics: {\n\t\t\tcanvas\t\t\t\t\t: hasCanvas(),\n\t\t\twebGl\t\t\t\t\t: hasWebGl(),\n\t\t\twebGl2\t\t\t\t\t: hasWebGl2(),\n\t\t},\n\t\taudio: {\n\t\t\twebAudio\t\t\t\t: hasWebAudio(),\n\t\t},\n\t\texperience: {\n\t\t\tfullscreen\t\t\t\t: hasFullscreen(),\n\t\t\tpointerLock\t\t\t\t: hasPointerLock(),\n\t\t\torientation\t\t\t\t: hasOrientation(),\n\t\t\tbattery\t\t\t\t\t: hasBattery(),\n\t\t\tvibrate\t\t\t\t\t: hasVibrate(),\n\t\t\tvisibility\t\t\t\t: hasVisibility(),\n\t\t\tgeoLocation\t\t\t\t: hasGeoLocation(),\n\t\t},\n\t\tstorage: {\n\t\t\tindexedDb\t\t\t\t: hasIndexedDb(),\n\t\t\tserviceWorker\t\t\t: hasServiceWorker(),\n\t\t},\n\t\tmultiplayer: {\n\t\t\twebSocket\t\t\t\t: hasWebSocket(),\n\t\t\twebRtc\t\t\t\t\t: hasWebRtc(),\n\t\t},\n\t\tinput: {\n\t\t\tdomLevel3\t\t\t\t: hasDomLevel3(),\n\t\t\ttouch\t\t\t\t\t: hasTouch(),\n\t\t\tgamepad\t\t\t\t\t: hasGamepad(),\n\t\t\tmotion\t\t\t\t\t: hasMotion(),\n\t\t\tpointer\t\t\t\t\t: hasPointer(),\n\t\t\tkeyboard\t\t\t\t: hasKeyboard()\n\t\t}\n\t};\n\n\treturn {\n\t\tgetCategories\t: getCategories,\n\t\tgetFeatures\t\t: getFeatures,\n\t\tgetHierarchy\t: getHierarchy,\n\t\thasFeature\t\t: hasFeature,\n\t\thasFeatures\t\t: hasFeatures\n\t};\n\n});\n\n\n'use strict';\n\nangular.module('app').filter('gravatar', [\"md5\", function(md5){\n\treturn function(email){\n\t\treturn '//www.gravatar.com/avatar/' + md5.hash(email);\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name html\n * @description\n * Monitor page and state changes, record activity in scope, and report results to Google Analytics.\n */\nangular.module('app').directive('html', [\"$location\", \"$state\", \"$window\", \"page\", \"gameBrowser\", function($location, $state, $window, page, gameBrowser){\n\treturn {\n\t\trestrict: 'E',\n\t\tlink: function(scope){\n\n\t\t\t// maintain page data at the highest level\n\t\t\tscope.page = page.data;\n\n\t\t\t// utility (only use in templates for development purposes)\n\t\t\tscope._ = _;\n\n\t\t\t// test results\n\t\t\tscope.results = null;\n\n\t\t\t// status message\n\t\t\tscope.status = null;\n\n\t\t\t// setup browser info\n\t\t\tscope.currentBrowser = gameBrowser.getCurrentBrowser();\n\t\t\tscope.browserName = scope.currentBrowser.browser.name.toLowerCase();\n\n\t\t\t// used in feature chart\n\t\t\tscope.currentVersionSnippet = scope.currentBrowser.browser.version;\n\t\t\tif (scope.currentVersionSnippet.toString().length <= 6){\n\t\t\t\tscope.currentVersionSnippet = 'Version ' + scope.currentVersionSnippet;\n\t\t\t}\n\n\t\t\t// set mobile test\n\t\t\tscope.isMobile = (scope.currentBrowser.device.type === 'mobile');\n\n\t\t\t// state object\n\t\t\tscope.state = $state;\n\n\t\t\t// game testing state\n\t\t\tscope.testStateClass = null;\n\n\t\t\t// before view render\n\t\t\t// set scope info for state and page data\n\t\t\tscope.$on('$stateChangeStart', function(event, toState, toParams){\n\t\t\t\tscope.stateClass = toParams.slug;\t\t// bind to body for \"page\" styling\n\t\t\t\tscope.stateName = toState.name;\t\t\t// state.go('this')\n\t\t\t\tscope.statePath = $location.url();\t\t// state switch key\n\t\t\t\tscope.stateUrl = $location.absUrl();\t// uri (absolute url)\n\t\t\t\tscope.stateParams = toParams;\t\t\t// state path params (e.g. /my/path/:param)\n\t\t\t\tscope.page = page.normalizeData(scope.pages[scope.stateClass]);\n\t\t\t});\n\n\t\t\t// after view render\n\t\t\t// make state views synonymous with page views in google analytics\n\t\t\tscope.$on('$stateChangeSuccess', function(event, toState){\n\t\t\t\t$window.ga('send', 'pageview', {page: toState.url});\n\t\t\t});\n\t\t},\n\t\tcontroller: [\"$scope\", \"$templateCache\", function($scope, $templateCache){\n\n\t\t\t// clean slate\n\t\t\tvar data = {};\n\n\t\t\t// get keys from templateCache (using custom decorator)\n\t\t\tvar keys = $templateCache.getKeys();\n\t\t\t_.each(keys, function(key){\n\n\t\t\t\t// initialize template object\n\t\t\t\tvar self = {\n\t\t\t\t\tslug: key.replace(/\\.html$/, ''),\n\t\t\t\t\thtml: $templateCache.get(key),\n\t\t\t\t\ttext: $('<div>'+$templateCache.get(key)+'</div>').text().replace(/[\\r\\n\\s]+/g, ' ').trim()\n\t\t\t\t};\n\n\t\t\t\t// extract metadata from input fields\n\t\t\t\tvar inputs = $(self.html).filter('input[metadata]');\n\t\t\t\t_.each(inputs, function(input){\n\t\t\t\t\tself[input.name] = input.value;\n\t\t\t\t});\n\n\t\t\t\t// assign normalized template data\n\t\t\t\tdata[self.slug] = page.normalizeData(self);\n\n\t\t\t});\n\n\t\t\t// final results\n\t\t\t$scope.pages = data;\n\t\t}]\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name logo\n * @description\n * OpenWebGames Logo\n */\nangular.module('app').directive('logo', function(){\n\treturn {\n\t\trestrict: 'C',\n\t\ttemplateUrl: 'logo.html'\n\t};\n});\n\n\n'use strict';\n\n/**\n * Joseph Myers JavaScript MD5 Algorithm converted into an Angular Factory\n * http://www.myersdaily.org/joseph/javascript/md5-text.html\n */\nangular.module('app').factory('md5', function(){\n\n\tfunction md5cycle(x, k){\n\t\tvar a = x[0], b = x[1], c = x[2], d = x[3];\n\n\t\ta = ff(a, b, c, d, k[0], 7, -680876936);\n\t\td = ff(d, a, b, c, k[1], 12, -389564586);\n\t\tc = ff(c, d, a, b, k[2], 17,  606105819);\n\t\tb = ff(b, c, d, a, k[3], 22, -1044525330);\n\t\ta = ff(a, b, c, d, k[4], 7, -176418897);\n\t\td = ff(d, a, b, c, k[5], 12,  1200080426);\n\t\tc = ff(c, d, a, b, k[6], 17, -1473231341);\n\t\tb = ff(b, c, d, a, k[7], 22, -45705983);\n\t\ta = ff(a, b, c, d, k[8], 7,  1770035416);\n\t\td = ff(d, a, b, c, k[9], 12, -1958414417);\n\t\tc = ff(c, d, a, b, k[10], 17, -42063);\n\t\tb = ff(b, c, d, a, k[11], 22, -1990404162);\n\t\ta = ff(a, b, c, d, k[12], 7,  1804603682);\n\t\td = ff(d, a, b, c, k[13], 12, -40341101);\n\t\tc = ff(c, d, a, b, k[14], 17, -1502002290);\n\t\tb = ff(b, c, d, a, k[15], 22,  1236535329);\n\n\t\ta = gg(a, b, c, d, k[1], 5, -165796510);\n\t\td = gg(d, a, b, c, k[6], 9, -1069501632);\n\t\tc = gg(c, d, a, b, k[11], 14,  643717713);\n\t\tb = gg(b, c, d, a, k[0], 20, -373897302);\n\t\ta = gg(a, b, c, d, k[5], 5, -701558691);\n\t\td = gg(d, a, b, c, k[10], 9,  38016083);\n\t\tc = gg(c, d, a, b, k[15], 14, -660478335);\n\t\tb = gg(b, c, d, a, k[4], 20, -405537848);\n\t\ta = gg(a, b, c, d, k[9], 5,  568446438);\n\t\td = gg(d, a, b, c, k[14], 9, -1019803690);\n\t\tc = gg(c, d, a, b, k[3], 14, -187363961);\n\t\tb = gg(b, c, d, a, k[8], 20,  1163531501);\n\t\ta = gg(a, b, c, d, k[13], 5, -1444681467);\n\t\td = gg(d, a, b, c, k[2], 9, -51403784);\n\t\tc = gg(c, d, a, b, k[7], 14,  1735328473);\n\t\tb = gg(b, c, d, a, k[12], 20, -1926607734);\n\n\t\ta = hh(a, b, c, d, k[5], 4, -378558);\n\t\td = hh(d, a, b, c, k[8], 11, -2022574463);\n\t\tc = hh(c, d, a, b, k[11], 16,  1839030562);\n\t\tb = hh(b, c, d, a, k[14], 23, -35309556);\n\t\ta = hh(a, b, c, d, k[1], 4, -1530992060);\n\t\td = hh(d, a, b, c, k[4], 11,  1272893353);\n\t\tc = hh(c, d, a, b, k[7], 16, -155497632);\n\t\tb = hh(b, c, d, a, k[10], 23, -1094730640);\n\t\ta = hh(a, b, c, d, k[13], 4,  681279174);\n\t\td = hh(d, a, b, c, k[0], 11, -358537222);\n\t\tc = hh(c, d, a, b, k[3], 16, -722521979);\n\t\tb = hh(b, c, d, a, k[6], 23,  76029189);\n\t\ta = hh(a, b, c, d, k[9], 4, -640364487);\n\t\td = hh(d, a, b, c, k[12], 11, -421815835);\n\t\tc = hh(c, d, a, b, k[15], 16,  530742520);\n\t\tb = hh(b, c, d, a, k[2], 23, -995338651);\n\n\t\ta = ii(a, b, c, d, k[0], 6, -198630844);\n\t\td = ii(d, a, b, c, k[7], 10,  1126891415);\n\t\tc = ii(c, d, a, b, k[14], 15, -1416354905);\n\t\tb = ii(b, c, d, a, k[5], 21, -57434055);\n\t\ta = ii(a, b, c, d, k[12], 6,  1700485571);\n\t\td = ii(d, a, b, c, k[3], 10, -1894986606);\n\t\tc = ii(c, d, a, b, k[10], 15, -1051523);\n\t\tb = ii(b, c, d, a, k[1], 21, -2054922799);\n\t\ta = ii(a, b, c, d, k[8], 6,  1873313359);\n\t\td = ii(d, a, b, c, k[15], 10, -30611744);\n\t\tc = ii(c, d, a, b, k[6], 15, -1560198380);\n\t\tb = ii(b, c, d, a, k[13], 21,  1309151649);\n\t\ta = ii(a, b, c, d, k[4], 6, -145523070);\n\t\td = ii(d, a, b, c, k[11], 10, -1120210379);\n\t\tc = ii(c, d, a, b, k[2], 15,  718787259);\n\t\tb = ii(b, c, d, a, k[9], 21, -343485551);\n\n\t\tx[0] = add32(a, x[0]);\n\t\tx[1] = add32(b, x[1]);\n\t\tx[2] = add32(c, x[2]);\n\t\tx[3] = add32(d, x[3]);\n\t}\n\n\tfunction cmn(q, a, b, x, s, t) {\n\t\ta = add32(add32(a, q), add32(x, t));\n\t\treturn add32((a << s) | (a >>> (32 - s)), b);\n\t}\n\n\tfunction ff(a, b, c, d, x, s, t) {\n\t\treturn cmn((b & c) | ((~b) & d), a, b, x, s, t);\n\t}\n\n\tfunction gg(a, b, c, d, x, s, t) {\n\t\treturn cmn((b & d) | (c & (~d)), a, b, x, s, t);\n\t}\n\n\tfunction hh(a, b, c, d, x, s, t) {\n\t\treturn cmn(b ^ c ^ d, a, b, x, s, t);\n\t}\n\n\tfunction ii(a, b, c, d, x, s, t) {\n\t\treturn cmn(c ^ (b | (~d)), a, b, x, s, t);\n\t}\n\n\tfunction md51(s) {\n\t\ttxt = '';\n\t\tvar n = s.length,\n\t\tstate = [1732584193, -271733879, -1732584194, 271733878], i;\n\t\tfor (i=64; i<=s.length; i+=64) {\n\t\t\tmd5cycle(state, md5blk(s.substring(i-64, i)));\n\t\t}\n\t\ts = s.substring(i-64);\n\t\tvar tail = [0,0,0,0, 0,0,0,0, 0,0,0,0, 0,0,0,0];\n\t\tfor (i=0; i<s.length; i++)\n\t\t\ttail[i>>2] |= s.charCodeAt(i) << ((i%4) << 3);\n\t\ttail[i>>2] |= 0x80 << ((i%4) << 3);\n\t\tif (i > 55) {\n\t\t\tmd5cycle(state, tail);\n\t\t\tfor (i=0; i<16; i++) tail[i] = 0;\n\t\t}\n\t\ttail[14] = n*8;\n\t\tmd5cycle(state, tail);\n\t\treturn state;\n\t}\n\n\t/* there needs to be support for Unicode here,\n\t * unless we pretend that we can redefine the MD-5\n\t * algorithm for multi-byte characters (perhaps\n\t * by adding every four 16-bit characters and\n\t * shortening the sum to 32 bits). Otherwise\n\t * I suggest performing MD-5 as if every character\n\t * was two bytes--e.g., 0040 0025 = @%--but then\n\t * how will an ordinary MD-5 sum be matched?\n\t * There is no way to standardize text to something\n\t * like UTF-8 before transformation; speed cost is\n\t * utterly prohibitive. The JavaScript standard\n\t * itself needs to look at this: it should start\n\t * providing access to strings as preformed UTF-8\n\t * 8-bit unsigned value arrays.\n\t */\n\tfunction md5blk(s) { /* I figured global was faster.   */\n\t\tvar md5blks = [], i; /* Andy King said do it this way. */\n\t\tfor (i=0; i<64; i+=4) {\n\t\t\tmd5blks[i>>2] = s.charCodeAt(i)\n\t\t\t+ (s.charCodeAt(i+1) << 8)\n\t\t\t+ (s.charCodeAt(i+2) << 16)\n\t\t\t+ (s.charCodeAt(i+3) << 24);\n\t\t}\n\t\treturn md5blks;\n\t}\n\n\tvar hex_chr = '0123456789abcdef'.split('');\n\n\tfunction rhex(n){\n\t\tvar s='', j=0;\n\t\tfor(; j<4; j++)\n\t\t\ts += hex_chr[(n >> (j * 8 + 4)) & 0x0F]\n\t\t\t+ hex_chr[(n >> (j * 8)) & 0x0F];\n\t\treturn s;\n\t}\n\n\tfunction hex(x) {\n\t\tfor (var i=0; i<x.length; i++)\n\t\tx[i] = rhex(x[i]);\n\t\treturn x.join('');\n\t}\n\n\tfunction md5(s) {\n\t\treturn hex(md51(s));\n\t}\n\n\t/* this function is much faster,\n\tso if possible we use it. Some IEs\n\tare the only ones I know of that\n\tneed the idiotic second function,\n\tgenerated by an if clause.  */\n\n\tfunction add32(a, b) {\n\t\treturn (a + b) & 0xFFFFFFFF;\n\t}\n\n\tif (md5('hello') != '5d41402abc4b2a76b9719d911017c592') {\n\t\tfunction add32(x, y) {\n\t\t\tvar lsw = (x & 0xFFFF) + (y & 0xFFFF),\n\t\t\tmsw = (x >> 16) + (y >> 16) + (lsw >> 16);\n\t\t\treturn (msw << 16) | (lsw & 0xFFFF);\n\t\t}\n\t}\n\n\treturn {\n\t\thash: md5\n\t};\n\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name metadata\n * @description\n * Define page metadata via hidden input fields.\n * Note: This directive is a documentation placeholder, the implementation is found in the html directive's controller.\n */\nangular.module('app').directive('metadata', function(){\n\treturn {};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name modal\n * @description\n * OpenWebGames Modal Component\n */\nangular.module('app').directive('modal', [\"$rootScope\", function($rootScope){\n\tvar sampleData = {'sponzadynamicshadows':{'name':'Sponza Dynamic Shadows','icon':'/assets/games/sponza.jpg','url':'/assets/games/sponza.html','width':1366,'height':768,'features':['optimizedJavaScript','webGl'],'timeout':60000,'credits':[{'category':'WebGL JavaScript Framework','name':'BabylonJS','url':'http://www.babylonjs.com/','$$hashKey':'object:39'}],'mobile':false,'desktop':true,'status':'success','startTime':4134.35,'timer':'00:35','timeoutPercentage':0,'interval':{'$$state':{'status':2,'value':'cancelled','processScheduled':false},'$$intervalId':36},'stopTime':39645.955,'results':{'totalTime':35535,'wrongPixels':34,'cpuTime':14013,'cpuIdle':0.6056595835690157,'fps':56.28206318787234,'pageLoadTime':162.35000000000002,'numStutterEvents':32,'result':'FAIL'}},'suntemple':{'name':'Sun Temple','icon':'/assets/games/suntemple.png','url':'/assets/games/suntemple.html','width':1366,'height':768,'features':['optimizedJavaScript','webGl'],'timeout':120000,'credits':[{'category':'Unreal Engine 4.10','name':'Sun Temple','url':'https://www.unrealengine.com/','$$hashKey':'object:59'}],'mobile':false,'desktop':true,'status':'success','startTime':102041.78,'timer':'01:12','timeoutPercentage':0,'interval':{'$$state':{'status':2,'value':'cancelled','processScheduled':false},'$$intervalId':252},'stopTime':175307.795,'results':{'totalTime':73291,'wrongPixels':3,'cpuTime':69251,'cpuIdle':0.05512089924838826,'fps':38.203880054279516,'pageLoadTime':60899.490000000005,'numStutterEvents':99,'result':'PASS'}}};\n\n\treturn {\n\t\trestrict: 'E',\n\t\ttemplateUrl: 'modal.html',\n\t\tscope: false,\n\t\tlink: function(scope){\n\t\t\tscope.modalTitle = '';\n\t\t\tscope.modalContent = '';\n\t\t\tscope.modalButton = 'Close';\n\n\t\t\tscope.showModal = function(){\n\t\t\t\t$('#modal').modal('show');\n\t\t\t\t$('#modal div.modal-header').css('display', scope.modalTitle ? 'block' : 'none');\n\t\t\t\t$('#modal div.modal-footer').css('display', scope.modalButton ? 'block' : 'none');\n\t\t\t};\n\n\t\t\tscope.closeModal = function(){\n\t\t\t\t$('#modal').modal('hide');\n\t\t\t};\n\n\t\t\tscope.setModalTitle = function(title){\n\t\t\t\tscope.modalTitle = title;\n\t\t\t};\n\n\t\t\tscope.setModalContent = function(content){\n\t\t\t\tscope.modalContent = content;\n\t\t\t};\n\n\t\t\tscope.setModalButton = function(button){\n\t\t\t\tscope.modalButton = button;\n\t\t\t};\n\n\t\t\tscope.showSampleResults = function(){\n\t\t\t\tscope.setModalTitle('Sample Data');\n\t\t\t\tscope.setModalContent('<pre>' + JSON.stringify(sampleData, null, 4) + '</pre>');\n\t\t\t\tscope.setModalButton('Close Sample');\n\t\t\t\tscope.showModal();\n\t\t\t};\n\n\t\t\tscope.fullscreenModal = function(id){\n\n\t\t\t\tvar el = document.getElementById(id);\n\n\t\t\t\tif(el.requestFullscreen) {\n\t\t\t\t\tel.requestFullscreen();\n\t\t\t\t} else if(el.mozRequestFullScreen) {\n\t\t\t\t\tel.mozRequestFullScreen();\n\t\t\t\t} else if(el.webkitRequestFullscreen) {\n\t\t\t\t\tel.webkitRequestFullscreen();\n\t\t\t\t} else if(el.msRequestFullscreen) {\n\t\t\t\t\tel.msRequestFullscreen();\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t$('#modal').on('show.bs.modal', function(){\n\n\t\t\t\t// blur page underneath\n\t\t\t\t$rootScope.blur();\n\n\t\t\t\t// disable page scroll\n\t\t\t\t$('body').css('overflow', 'hidden');\n\n\t\t\t\t// hide visual arrows\n\t\t\t\t$('nav-arrow').addClass('hidden');\n\n\t\t\t});\n\n\t\t\t$('#modal').on('hide.bs.modal', function(){\n\n\t\t\t\t// remove page blur\n\t\t\t\t$rootScope.unblur();\n\n\t\t\t\t// enable page scroll\n\t\t\t\t$('body').css('overflow', 'auto');\n\n\t\t\t\t// show visual arrows (as were hidden by this modal)\n\t\t\t\t$('nav-arrow').removeClass('hidden');\n\n\t\t\t});\n\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name nav-arrow\n * @description\n * OpenWebGames Down Navigation UI Component\n */\nangular.module('app').directive('navArrow', [\"navigation\", \"$state\", function(navigation, $state){\n\treturn {\n\t\trestrict: 'E',\n\t\ttemplateUrl: 'navArrowButton.html',\n\t\tscope: {},\n\t\tlink: function(scope, element, attr){\n\t\t\tvar direction = scope.direction = attr.direction;\n\t\t\tvar transitionVars = {\n\t\t\t\tpaused: true,\n\t\t\t\tease: 'Quart.easeInOut',\n\t\t\t\tcss: {}\n\t\t\t};\n\n\t\t\tswitch (direction) {\n\t\t\t\tcase 'up':\n\t\t\t\t\ttransitionVars.css.y = '-120';\n\t\t\t\tbreak;\n\t\t\t\tcase 'down':\n\t\t\t\t\ttransitionVars.css.y = '120';\n\t\t\t\tbreak;\n\t\t\t\tcase 'left':\n\t\t\t\t\ttransitionVars.css.x = '-150%';\n\t\t\t\tbreak;\n\t\t\t\tcase 'right':\n\t\t\t\t\ttransitionVars.css.x = '150%';\n\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar transition = TweenMax.to(element.find('.nav-arrow'), 0.2, transitionVars);\n\n\t\t\tfunction transitionIn(callback){\n\t\t\t\ttransition.eventCallback('onReverseComplete', callback);\n\t\t\t\ttransition.reverse();\n\t\t\t}\n\n\t\t\tfunction transitionOut(callback){\n\t\t\t\ttransition.eventCallback('onComplete', callback);\n\t\t\t\ttransition.play();\n\t\t\t}\n\n\t\t\tscope.$on('$stateChangeStart', function(event, toState, toParams){\n\t\t\t\tfunction updateScope(){\n\t\t\t\t\tvar navDescriptor = navigation.getDescriptor(toParams.slug);\n\n\t\t\t\t\tif (!navDescriptor || !direction){\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tvar nextDestination = navDescriptor.directions[direction];\n\n\t\t\t\t\tif (nextDestination){\n\t\t\t\t\t\tscope.slug = nextDestination.id;\n\t\t\t\t\t\tscope.name = nextDestination.name;\n\t\t\t\t\t} else {\n\t\t\t\t\t\tscope.slug = null;\n\t\t\t\t\t\tscope.name = null;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Update the navigation arrow immediately\n\t\t\t\tif (!$state.params.slug) {\n\t\t\t\t\treturn updateScope();\n\t\t\t\t}\n\n\t\t\t\ttransitionOut(function(){\n\t\t\t\t\tvar deregister;\n\t\t\t\t\tvar timeoutId;\n\n\t\t\t\t\tvar onEnter = _.once(function() {\n\t\t\t\t\t\tif (deregister) {\n\t\t\t\t\t\t\tderegister();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tclearTimeout(timeoutId);\n\n\t\t\t\t\t\tupdateScope();\n\t\t\t\t\t\ttransitionIn();\n\t\t\t\t\t});\n\n\t\t\t\t\tderegister = scope.$on('gsapifyRouter:enterSuccess', onEnter);\n\t\t\t\t\ttimeoutId = setTimeout(onEnter, 201);\n\t\t\t\t});\n\t\t\t});\n\n\t\t\tfunction setTransitionDirection(){\n\t\t\t\t$state.transitionDirection = direction;\n\t\t\t}\n\n\t\t\telement.click(setTransitionDirection);\n\n\t\t\telement.on('$destroy', function(){\n\t\t\t\telement.unbind('click', setTransitionDirection);\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name nav-main\n * @description\n * OpenWebGames Main Navigation UI Component\n */\nangular.module('app').directive('navMain', [\"$document\", \"$timeout\", \"$rootScope\", function($document, $timeout, $rootScope){\n\treturn {\n\t\trestrict: 'E',\n\t\ttemplateUrl: 'navMain.html',\n\t\tscope: {},\n\t\tlink: function(scope, element){\n\t\t\tscope.showMenu = false;\n\n\t\t\tvar document = $document[0];\n\t\t\tvar icon = element[0].querySelector('.nav-main__icon');\n\n\t\t\tvar openMenu = function(){\n\t\t\t\tscope.showMenu = true;\n\t\t\t\t$rootScope.blur();\n\n\t\t\t\t$timeout(function(){ document.addEventListener('click', closeMenu); });\n\t\t\t};\n\n\t\t\tvar closeMenu = function(){\n\t\t\t\tdocument.removeEventListener('click', closeMenu);\n\n\t\t\t\tscope.showMenu = false;\n\t\t\t\t$rootScope.unblur();\n\t\t\t};\n\n\t\t\ticon.addEventListener('click', openMenu);\n\n\t\t\t// Cleanup listeners\n\t\t\telement.on('$destroy', function(){\n\t\t\t\ticon.removeEventListener('click', openMenu);\n\t\t\t\tdocument.removeEventListener('click', closeMenu);\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name nav-main-button\n * @description\n * OpenWebGames Main Navigation UI Component's Button\n */\nangular.module('app').directive('navMainButton', [\"$state\", function($state){\n\treturn {\n\t\trestrict: 'E',\n\t\ttemplateUrl: 'navMainButton.html',\n\t\ttransclude: true,\n\t\tscope: {},\n\t\tlink: function(scope, elem, attr){\n\t\t\tif (attr.slug !== null) {\n\t\t\t\tscope.slug = attr.slug;\n\t\t\t}\n\n\t\t\tscope.navigate = function(){\n\t\t\t\tif (!scope.slug) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\t$state.go('app.page', {slug: scope.slug});\n\t\t\t};\n\n\t\t\tscope.isActive = !scope.slug ? false : $state.params.slug === scope.slug;\n\n\t\t\tscope.$on('$stateChangeSuccess', function(event, toState, toParams){\n\t\t\t\tscope.isActive = !scope.slug ? false : toParams.slug === scope.slug;\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name nav-button-group\n * @description\n * OpenWebGames Button Group Navigation UI Component\n */\nangular.module('app').directive('navSecondary', function(){\n\treturn {\n\t\trestrict: 'C',\n\t\ttemplateUrl: 'navSecondary.html'\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name navigation\n * @description\n * Provide directional navigation through the site\n */\nangular.module('app').factory('navigation', [\"$state\", \"$q\", function($state, $q){\n\n\tvar resources = {\n\t\tid: 'resources',\n\t\tname: 'Resources',\n\t\tdirections: {}\n\t};\n\n\tvar media = {\n\t\tid: 'media',\n\t\tname: 'Logos & Font',\n\t\tdirections: {}\n\t};\n\n\tvar home = {\n\t\tid: 'home',\n\t\tname: 'Home',\n\t\tdirections: {}\n\t};\n\n\tvar features = {\n\t\tid: 'features',\n\t\tname: 'Features',\n\t\tdirections: {}\n\t};\n\n\tvar rights = {\n\t\tid: 'rights',\n\t\tname: 'Content Rights',\n\t\tdirections: {}\n\t};\n\n\tvar upgrade = {\n\t\tid: 'upgrade',\n\t\tname: 'Upgrade Your Browser',\n\t\tdirections: {}\n\t};\n\n\tvar faq = {\n\t\tid: 'faq',\n\t\tname: 'FAQ',\n\t\tdirections: {}\n\t};\n\n\tvar timeline = {\n\t\tid: 'timeline',\n\t\tname: 'Timeline',\n\t\tdirections: {}\n\t};\n\n\tvar tests = {\n\t\tid: 'tests',\n\t\tname: 'Run Test',\n\t\tdirections: {}\n\t};\n\n\tvar demos = {\n\t\tid: 'demos',\n\t\tname: 'Play Demos',\n\t\tdirections: {}\n\t};\n\n\tresources.directions.right = home;\n\tresources.directions.down = media;\n\n\tmedia.directions.right = features;\n\tmedia.directions.up = resources;\n\tmedia.directions.down = rights;\n\n\thome.directions.right = timeline;\n\thome.directions.left = resources;\n\thome.directions.down = _.clone(features);\n\thome.directions.down.name = 'Run the Test';\n\n\tfeatures.directions.up = home;\n\tfeatures.directions.down = upgrade;\n\tfeatures.directions.left = media;\n\n\tupgrade.directions.up = features;\n\tupgrade.directions.left = rights;\n\n\trights.directions.up = media;\n\trights.directions.right = upgrade;\n\n\tfaq.directions.down = timeline;\n\n\ttimeline.directions.up = faq;\n\ttimeline.directions.left = home;\n\n\tvar map = {\n\t\tresources: resources,\n\t\tmedia: media,\n\t\thome: home,\n\t\tfeatures: features,\n\t\trights: rights,\n\t\tupgrade: upgrade,\n\t\tfaq: faq,\n\t\ttimeline: timeline,\n\t\ttests: tests\n\t};\n\n\t/**\n\t * get the current descriptor\n\t *\n\t * @param {String} id\n\t * @return {Object}\n\t */\n\tfunction getDescriptor(id){\n\t\treturn map[id];\n\t}\n\n\t/**\n\t * navigate to a destination based on direction\n\t *\n\t * @param {String} direction\n\t * @return {Promise}\n\t */\n\tfunction navigateByDirection(direction){\n\t\tvar currentPage = $state.params.slug;\n\n\t\tif (!currentPage) {\n\t\t\tthrow new Error('`$state.params.slug` was undefined.');\n\t\t}\n\n\t\tif (!$state.params.slug){\n\t\t\t// hidden pages are null\n\t\t\treturn;\n\t\t}\n\n\t\tvar destination = getDescriptor($state.params.slug).directions[direction];\n\n\t\tif (!destination) {\n\t\t\treturn $q.reject('Invalid direction specified: ' + direction);\n\t\t}\n\n\t\t$state.transitionDirection = direction;\n\n\t\treturn $state.go('app.page', {slug: destination.id});\n\t}\n\n\treturn {\n\t\tgetDescriptor: getDescriptor,\n\t\tnavigateByDirection : navigateByDirection\n\t};\n\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name notification\n * @description\n * OpenWebGames Notification Bar UI Component\n */\nangular.module('app').directive('notification', function(){\n\treturn {\n\t\trestrict: 'C',\n\t\ttemplateUrl: 'notification.html',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\n\t\t\tif (!scope.currentBrowser.browser.latest){\n\t\t\t\tvar name = scope.currentBrowser.browser.name;\n\t\t\t\tvar stable = scope.currentBrowser.browser.stable.replace(/\\..*$/, '');\n\t\t\t\tscope.status = 'Upgrade ' + name + ' to ' + stable + '!';\n\t\t\t}\n\n\t\t\tscope.$watch('status', function(value){\n\t\t\t\tif (value){\n\t\t\t\t\telem.parent('body').addClass('notification');\n\t\t\t\t\telem.find('.inner').addClass('active');\n\t\t\t\t} else {\n\t\t\t\t\telem.parent('body').removeClass('notification');\n\t\t\t\t\telem.find('.inner').removeClass('active');\n\t\t\t\t}\n\t\t\t});\n\n\t\t}\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name pad\n * @description\n * Create a functional game pad experience for the home page\n */\nangular.module('app').directive('pad', function(){\n\treturn {\n\t\trestrict: 'A',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\t\t\telem.find('g[direction]').each(function(idx, el){\n\t\t\t\tvar dir = angular.element(el).attr('direction');\n\t\t\t\tangular.element(el).on('click', function(){\n\t\t\t\t\tscope.triggerArrow(dir);\n\t\t\t\t});\n\t\t\t});\n\n\t\t}\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc service\n * @name page\n * @description\n * Maintains knowledge about the currently loaded page.\n */\nangular.module('app').factory('page', function(){\n\n\tvar data = {};\n\n\tvar normalizeData = function(obj){\n\t\tif (obj && obj.slug){\n\t\t\treturn {\n\t\t\t\tslug\t\t: obj.slug,\n\t\t\t\ttitle\t\t: obj.title || '',\n\t\t\t\tdescription\t: obj.description || '',\n\t\t\t\ttype\t\t: obj.type || 'page',\n\t\t\t\turl\t\t\t: obj.url || '/' + obj.slug + '.html',\n\t\t\t\timageUrl\t: obj.imageUrl || '',\n\t\t\t\thtml\t\t: obj.html || '',\n\t\t\t\ttext\t\t: obj.text || '',\n\t\t\t\tkeywords\t: obj.keywords || ''\n\t\t\t};\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t};\n\n\tvar setData = function(obj){\n\t\tdata = normalizeData(_.extend(data, obj));\n\t};\n\n\treturn {\n\t\tdata: data,\n\t\tnormalizeData: normalizeData,\n\t\tsetData: setData\n\t};\n\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name privacy-link\n * @description\n * Open privacy policy from nav item\n */\nangular.module('app').directive('privacyLink', [\"$window\", function($window){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope, elem){\n\n\t\t\telem.on('click', function(){\n\t\t\t\t$window.open('https://www.mozilla.org/privacy/websites/');\n\t\t\t});\n\n\t\t}\n\t};\n}]);\n\n\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name view-report\n * @description\n * Report directive\n */\nangular.module('app').directive('viewReport', function(){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: true,\n\t\tlink: function(scope, element){\n\n\t\t\tvar content = $('.content');\n\t\t\tvar confirmation = element.find('.confirmation');\n\t\t\tvar confirmationSuccess = element.find('.confirmation .success');\n\t\t\tvar confirmationError = element.find('.confirmation .error');\n\t\t\tvar button = element.find('.confirmation button.close');\n\n\t\t\tscope.resetConfirmation = function(){\n\t\t\t\tconfirmation.addClass('is-hidden');\n\t\t\t\tconfirmationSuccess.addClass('is-hidden');\n\t\t\t\tconfirmationError.addClass('is-hidden');\n\t\t\t};\n\n\t\t\tscope.showConfirmation = function(success){\n\t\t\t\tscope.resetConfirmation();\n\t\t\t\tdocument.body.scrollTop = document.documentElement.scrollTop = 0;\n\t\t\t\tif (success){\n\t\t\t\t\tconfirmationSuccess.removeClass('is-hidden');\n\t\t\t\t} else {\n\t\t\t\t\tconfirmationError.removeClass('is-hidden');\n\t\t\t\t}\n\t\t\t\tcontent.addClass('blur');\n\t\t\t\tconfirmation.removeClass('is-hidden');\n\t\t\t};\n\n\t\t\tscope.hideConfirmation = function(){\n\t\t\t\tcontent.removeClass('blur');\n\t\t\t\tconfirmation.addClass('is-hidden');\n\t\t\t};\n\n\t\t\tbutton.on('click', function(){\n\t\t\t\tscope.hideConfirmation();\n\t\t\t});\n\n\t\t}\n\t};\n});\n\n\n'use strict';\n\nangular.module('app').filter('slugify', function(){\n\treturn function(text){\n\t\treturn text.toString().toLowerCase()\n\t\t\t.replace(/\\s+/g, '-')\t\t// spaces as dashes\n\t\t\t.replace(/[^\\w-]+/g, '')\t// ignore non-words\n\t\t\t.replace(/-+/g, '-')\t\t// only one dash\n\t\t\t.replace(/_+/g, '_')\t\t// only one underscore\n\t\t\t.replace(/^[_-]/, '')\t\t// only chars at start\n\t\t\t.replace(/[_-]$/g, '');\t\t// only chars at end\n\t};\n});\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name snippet\n * @description\n * Generic snippet include functionality\n */\nangular.module('app').directive('snippet', [\"$compile\", \"$templateCache\", function($compile, $templateCache){\n\treturn {\n\t\trestrict: 'A',\n\t\tlink: function(scope, elem, attr){\n\n\t\t\tvar html = $templateCache.get(attr.snippet + '.html');\n\t\t\tif (html){\n\n\t\t\t\t// show template\n\t\t\t\telem.html(html).show();\n\n\t\t\t\t// compile scope\n\t\t\t\t$compile(elem.contents())(scope);\n\n\t\t\t}\n\n\t\t}\n\t};\n}]);\n\n\n'use strict';\n\n/**\n * @ngdoc interface\n * @name $templateCache.getKeys\n * @description\n * Adds getKeys to $templateCache.\n */\nangular.module('app')\n\t.config([\"$provide\", function config($provide){\n\t\t$provide.decorator('$templateCache', [\"$delegate\", function($delegate){\n\t\t\tvar keys = [], origPut = $delegate.put;\n\t\t\t$delegate.put = function(key, value) {\n\t\t\t\torigPut(key, value);\n\t\t\t\tkeys.push(key);\n\t\t\t};\n\t\t\t$delegate.getKeys = function() {\n\t\t\t\treturn keys;\n\t\t\t};\n\t\t\treturn $delegate;\n\t\t}]);\n\t}]);\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name testDrive\n * @description\n * Automated test drive experience which plays games and captures performance results.\n */\nangular.module('app').directive('testDrive', [\"$compile\", \"$filter\", \"$state\", \"$templateCache\", \"$interval\", \"$timeout\", \"game\", function($compile, $filter, $state, $templateCache, $interval, $timeout, game){\n\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: false,\n\t\tlink: function(scope){\n\n\t\t\t/**\n\t\t\t * record game test results\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction record(){\n\t\t\t\t// @todo: record results here\n\t\t\t\tconsole.log('record() not implemented');\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * determine if the current game is skippable right now\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Boolean}\n\t\t\t */\n\t\t\tfunction isSkippable(){\n\t\t\t\tif (scope.activeGameKey){\n\t\t\t\t\treturn (scope.games[scope.activeGameKey].status === 'running');\n\t\t\t\t}\n\t\t\t\treturn false;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * skip the currently active game\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction skip(){\n\t\t\t\tif (isSkippable()){\n\t\t\t\t\tscope.games[scope.activeGameKey].error = new Error('Player skipped game');\n\t\t\t\t\tstopGame(scope.activeGameKey);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * cancel the current game test sequence\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction cancel(){\n\t\t\t\tscope.$evalAsync(function(){\n\t\t\t\t\tscope.$parent.testState = 'cancelled';\n\t\t\t\t\tscope.activeGameIndex = keys.length - 1;\n\t\t\t\t\tscope.games[scope.activeGameKey].error = new Error('Player cancelled test');\n\t\t\t\t\tstopGame(scope.activeGameKey);\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * start a specific game\n\t\t\t *\n\t\t\t * @param {String} key\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction start(key){\n\t\t\t\tpreloadComplete(function(){\n\t\t\t\t\tscope.$evalAsync(function(){\n\t\t\t\t\t\tif (!(key in scope.games)){\n\t\t\t\t\t\t\treturn console.error(new Error('Unrecognized game: ' + key));\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tscope.activeGameKey = key;\n\t\t\t\t\t\tscope.games[key].startTime = window.performance.now();\n\t\t\t\t\t\tscope.games[key].timer = '';\n\t\t\t\t\t\tscope.games[key].timeoutPercentage = 0;\n\t\t\t\t\t\tscope.games[key].status = 'running';\n\t\t\t\t\t\tscope.games[key].interval = $interval(function(){\n\t\t\t\t\t\t\tvar now = window.performance.now();\n\t\t\t\t\t\t\tvar ms = (now - scope.games[key].startTime);\n\t\t\t\t\t\t\tif (ms > scope.games[key].timeout){\n\t\t\t\t\t\t\t\tscope.games[key].error = new Error('Game timed out');\n\t\t\t\t\t\t\t\tscope.games[key].status = 'timeout';\n\t\t\t\t\t\t\t\tstopGame(key);\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\tvar m = ('0' + Math.floor((ms / 1000) / 60)).substr(-2);\n\t\t\t\t\t\t\tvar s = ('0' + Math.floor((ms / 1000) - (m * 60))).substr(-2);\n\t\t\t\t\t\t\tscope.games[key].timer = m + ':' + s;\n\t\t\t\t\t\t}, 1000);\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * finish the current game test sequence\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction finish(){\n\t\t\t\tscope.$evalAsync(function(){\n\t\t\t\t\trecord();\n\t\t\t\t\tscope.$parent.results = scope.games;\n\n\t\t\t\t\tscope.activeGameKey = null;\n\t\t\t\t\tif (scope.$parent.testState !== 'cancelled'){\n\t\t\t\t\t\tscope.$parent.testState = 'completed';\n\t\t\t\t\t}\n\n\t\t\t\t\t$('.status .timer').show();\n\t\t\t\t\t$('.game-tracker').hide();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * start running a new game test sequence\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction run(){\n\t\t\t\tif (cancelTimeout !== null) {\n\t\t\t\t\t$timeout.cancel(cancelTimeout);\n\t\t\t\t\tcancelTimeout = null;\n\t\t\t\t}\n\n\t\t\t\tscope.$evalAsync(function(){\n\t\t\t\t\tscope.$parent.testState = 'in-progress';\n\t\t\t\t\tscope.activeGameKey = scope.activeGameKey || keys[0];\n\t\t\t\t\tloadIframe(scope.games[scope.activeGameKey].url + '?playback', {\n\t\t\t\t\t\twidth\t\t: scope.games[scope.activeGameKey].width,\n\t\t\t\t\t\theight\t\t: scope.games[scope.activeGameKey].height,\n\t\t\t\t\t\tframeBorder\t: 0\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * load the game test iframe\n\t\t\t *\n\t\t\t * @param {String} url\n\t\t\t * @param {Object} options\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction loadIframe(url, options){\n\t\t\t\toptions.src = url;\n\t\t\t\tvar container = $('#game-container');\n\t\t\t\tif (container){\n\t\t\t\t\tvar iframe = $('<iframe>', options);\n\t\t\t\t\tiframe.load(function(){\n\n\t\t\t\t\t\t// share iframe dimensions with contentWindow\n\t\t\t\t\t\tif (options.width && options.height){\n\t\t\t\t\t\t\tthis.contentWindow.postMessage({\n\t\t\t\t\t\t\t\tmsg\t: 'iframeSize',\n\t\t\t\t\t\t\t\twidth\t: options.width,\n\t\t\t\t\t\t\t\theight\t: options.height\n\t\t\t\t\t\t\t}, '*');\n\t\t\t\t\t\t}\n\n\t\t\t\t\t});\n\t\t\t\t\tcontainer.html(iframe);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * unload the game test iframe\n\t\t\t *\n\t\t\t * @param {Function} cb\n\t\t\t */\n\t\t\tfunction unloadIframe(cb){\n\t\t\t\tvar container = $('#game-container');\n\t\t\t\tvar iframe = $('iframe');\n\t\t\t\tif (!iframe || !iframe.attr('src')){\n\t\t\t\t\tcontainer.html('');\n\t\t\t\t\treturn cb();\n\t\t\t\t}\n\t\t\t\tiframe.attr('src', '/assets/games/blank.html');\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tiframe.remove();\n\t\t\t\t\tcontainer.html('');\n\t\t\t\t\tcb();\n\t\t\t\t}, 100);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * restart the game test sequence\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction restart(){\n\t\t\t\tunloadIframe(function(){\n\t\t\t\t\tscope.activeGameKey = null;\n\t\t\t\t\tscope.activeGameIndex = 0;\n\t\t\t\t\trun();\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * view the game test results on the features page\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction viewResults(){\n\t\t\t\t$state.go('app.page', {slug: 'features'});\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * view the game test results on the JSON modal overlay\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction viewResultsModal(){\n\t\t\t\tscope.$parent.setModalTitle('Your Test Results');\n\t\t\t\tscope.$parent.setModalContent('<pre>' + JSON.stringify(scope.$parent.results, null, 4) + '</pre>');\n\t\t\t\tscope.setModalButton('Close Results');\n\t\t\t\tscope.$parent.showModal();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * prime the loading status for the current game\n\t\t\t *\n\t\t\t * @param {String} key\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction preloadGame(){\n\t\t\t\tpreloadProgress(0);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * reset the loading status for the next game\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction preloadReset(){\n\t\t\t\tscope.$evalAsync(function(){\n\t\t\t\t\tscope.loadingPercent = '';\n\t\t\t\t});\n\t\t\t}\n\n\t\t\tvar preloading = false;\n\t\t\tvar preloadQueue = [];\n\n\t\t\t/**\n\t\t\t * process the loading status for the current game\n\t\t\t *\n\t\t\t * @param {Void}\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction processProgress(){\n\t\t\t\tif (preloading){\n\t\t\t\t\tif (!preloadQueue.length){\n\t\t\t\t\t\treturn $timeout(processProgress, 50);\n\t\t\t\t\t}\n\t\t\t\t\tscope.$evalAsync(function(){\n\t\t\t\t\t\tvar amount = _.head(preloadQueue) || 0;\n\t\t\t\t\t\tpreloadQueue = _.slice(preloadQueue, 1).sort();\n\t\t\t\t\t\tvar percent = (amount * 100).toFixed(2);\n\t\t\t\t\t\tscope.loadingPercent = percent + '%';\n\t\t\t\t\t\t$timeout(processProgress, 50);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * update the loading status for the current game\n\t\t\t *\n\t\t\t * @param {Float} amount (0 to 1)\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction preloadProgress(amount){\n\n\t\t\t\t// first time, fire it up\n\t\t\t\tif (amount === 0){\n\t\t\t\t\tpreloading = true;\n\t\t\t\t\tpreloadQueue = [0];\n\t\t\t\t\tprocessProgress();\n\t\t\t\t}\n\n\t\t\t\tvar minimumGap = 0.15;\n\t\t\t\tvar currentAmount = parseInt(scope.loadingPercent.replace(/\\%$/, '') || 0) / 100;\n\t\t\t\tvar lastAmount = _.last(preloadQueue);\n\n\t\t\t\tif (lastAmount === currentAmount){\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tif (amount - Math.max(lastAmount, currentAmount) <= minimumGap){\n\t\t\t\t\treturn preloadQueue.push(amount);\n\t\t\t\t}\n\n\t\t\t\t// fill gap with artifical amounts\n\t\t\t\tvar artificialAmount = currentAmount * 10000;\n\t\t\t\tvar minAmount = 200;\n\t\t\t\tvar maxAmount = 1000;\n\t\t\t\twhile (artificialAmount < (amount * 10000)){\n\t\t\t\t\tartificialAmount = Math.min(_.random(minAmount, maxAmount) + artificialAmount, 10000);\n\t\t\t\t\tpreloadQueue.push(artificialAmount / 10000);\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * complete the current preload sequence\n\t\t\t *\n\t\t\t * @param {Function} cb\n\t\t\t */\n\t\t\tfunction preloadComplete(cb){\n\t\t\t\t$timeout(function(){\n\t\t\t\t\tpreloadProgress(1);\n\t\t\t\t\tif (preloadQueue.length === 0){\n\t\t\t\t\t\tpreloading = false;\n\t\t\t\t\t\tcb();\n\t\t\t\t\t} else {\n\t\t\t\t\t\tpreloadComplete(cb);\n\t\t\t\t\t}\n\t\t\t\t}, 50);\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * create an artifical loading experience\n\t\t\t *\n\t\t\t * @param {String} key\n\t\t\t */\n\t\t\tfunction preloadArtificially(key){\n\n\t\t\t\tvar percent = 0;\n\t\t\t\tvar delay = 50;\n\t\t\t\tvar min = 200;\n\t\t\t\tvar max = 1000;\n\n\t\t\t\t// prime\n\t\t\t\tpreloadProgress(percent);\n\n\t\t\t\t// loop\n\t\t\t\tvar artificialProgress = function(){\n\t\t\t\t\tif (percent < 10000){\n\t\t\t\t\t\tpercent = Math.min(_.random(min, max) + percent, 10000);\n\t\t\t\t\t\tpreloadProgress(percent / 10000);\n\t\t\t\t\t\tsetTimeout(artificialProgress, delay);\n\t\t\t\t\t} else {\n\t\t\t\t\t\tstart(key);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tartificialProgress();\n\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * start the game playback experience and complete the loader experience\n\t\t\t *\n\t\t\t * @param {String} key\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction startGame(key){\n\t\t\t\tif (!scope.loadingPercent){\n\t\t\t\t\tconsole.log('starting game (artificial load)', key);\n\t\t\t\t\tpreloadArtificially(key);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('starting game', key);\n\t\t\t\t\tstart(key);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * pause the game playback experience\n\t\t\t *\n\t\t\t * @param {String} key\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction pauseGame(){\n\t\t\t\tconsole.log('pauseGame has not been implemented yet');\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * update the current game test ui to reflect active game completion\n\t\t\t *\n\t\t\t * @param {String} key\n\t\t\t * @param {Object} results\n\t\t\t * @return {Void}\n\t\t\t */\n\t\t\tfunction stopGame(key, results){\n\n\t\t\t\tconsole.log('stopping game', key, results);\n\n\t\t\t\t// prepare the preloader for the next game\n\t\t\t\tpreloadReset();\n\n\t\t\t\tscope.games[key].stopTime = window.performance.now();\n\t\t\t\t$interval.cancel(scope.games[key].interval);\n\n\t\t\t\tif (scope.games[key].error && scope.games[key].error.message === 'Game timed out'){\n\t\t\t\t\tscope.games[key].status = 'timeout';\n\t\t\t\t\tscope.$parent.testState = 'timeout';\n\t\t\t\t}\n\n\t\t\t\t// @todo: confirm that this does what we expect even when there are errors\n\t\t\t\tif (results){\n\t\t\t\t\tscope.games[key].results = results;\n\t\t\t\t\tscope.games[key].status = 'success';\n\t\t\t\t} else {\n\t\t\t\t\tif (scope.games[key].status !== 'timeout'){\n\t\t\t\t\t\tscope.games[key].status = 'failed';\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tunloadIframe(function(){\n\n\t\t\t\t\tif ((scope.activeGameIndex + 1) === keys.length){\n\n\t\t\t\t\t\t// done\n\t\t\t\t\t\tfinish();\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// queueing up next game\n\t\t\t\t\t\tscope.activeGameIndex = scope.activeGameIndex + 1;\n\t\t\t\t\t\tscope.activeGameKey = keys[scope.activeGameIndex];\n\t\t\t\t\t\tscope.games[scope.activeGameKey].status = 'loading';\n\n\t\t\t\t\t\tif (scope.$parent.testState === 'timeout'){\n\n\t\t\t\t\t\t\tscope.timeoutCountdown = 5;\n\n\t\t\t\t\t\t\tvar countdownPromise = $interval(function(){\n\t\t\t\t\t\t\t\tif (scope.timeoutCountdown <= 0) {\n\t\t\t\t\t\t\t\t\treturn $interval.cancel(countdownPromise);\n\t\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\t\tscope.timeoutCountdown--;\n\t\t\t\t\t\t\t}, 1000, 5);\n\n\t\t\t\t\t\t\tcancelTimeout = $timeout(function(){\n\t\t\t\t\t\t\t\tcancelTimeout = null;\n\t\t\t\t\t\t\t\t$interval.cancel(countdownPromise);\n\n\t\t\t\t\t\t\t\trun();\n\t\t\t\t\t\t\t}, 5000);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\trun();\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tvar cancelTimeout = null;\n\n\t\t\t// filters\n\t\t\tvar byActiveGame = $filter('byActiveGame');\n\t\t\tvar byGameFolderSizeOrder = $filter('byGameFolderSizeOrder');\n\n\t\t\tscope.isSkippable = isSkippable;\n\n\t\t\tscope.loadingPercent = '';\n\n\t\t\t// get games\n\t\t\tscope.games = game.getGames();\n\t\t\tscope.games = byActiveGame(scope.games, scope.currentBrowser);\n\t\t\tscope.games = byGameFolderSizeOrder(scope.games);\n\n\t\t\t// add properties\n\t\t\t_.each(scope.games, function(obj, key){\n\t\t\t\tscope.games[key].status = 'queue';\n\t\t\t});\n\n\t\t\tvar keys = _.keys(scope.games);\n\n\t\t\t// active game\n\t\t\tscope.activeGameKey = null;\n\t\t\tscope.activeGameIndex = 0;\n\t\t\tscope.activeGameCount = keys.length;\n\n\t\t\t// add a game test state class to the body (for styling purposes)\n\t\t\tscope.$parent.$watch('testState', function(newval) {\n\t\t\t\tscope.$parent.testStateClass = 'test-state-' + newval;\n\t\t\t});\n\n\t\t\tif (!scope.$parent.testState || scope.$parent.testState === 'in-progress' || scope.$parent.testState === 'intro' || scope.$parent.testState === 'timeout') {\n\t\t\t\tif (scope.$parent.results !== null) {\n\t\t\t\t\tscope.$parent.testState = 'in-progress';\n\t\t\t\t\t$timeout(restart, 0);\n\t\t\t\t} else {\n\t\t\t\t\tscope.$parent.testState = 'intro';\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tscope.run = run;\n\t\t\tscope.skip = skip;\n\t\t\tscope.cancel = cancel;\n\t\t\tscope.restart = restart;\n\t\t\tscope.viewResults = viewResults;\n\t\t\tscope.viewResultsModal = viewResultsModal;\n\n\t\t\twindow.onmessage = function(e){\n\t\t\t\tswitch(e.data.msg){\n\t\t\t\t\tcase 'startGame':\n\t\t\t\t\t\tstartGame(e.data.key);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'pauseGame':\n\t\t\t\t\t\tpauseGame(e.data.key);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'stopGame':\n\t\t\t\t\t\tstopGame(e.data.key,  e.data.results);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'preloadGame':\n\t\t\t\t\t\tpreloadGame(e.data.key);\n\t\t\t\t\t\tbreak;\n\t\t\t\t\tcase 'preloadProgress':\n\t\t\t\t\t\tpreloadProgress(e.data.progress);\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t};\n\n\t\t}\n\t};\n}]);\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name view-timeline\n * @description\n * View directive\n */\nangular.module('app').directive('viewTimeline', [\"$timeout\", function($timeout){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: true,\n\t\tlink: function(scope, element){\n\n\t\t\tfunction initializeMouseInteractions(){\n\t\t\t\t$futures.on('mouseover', function(event){\n\t\t\t\t\tfutures.forEach(function($component){\n\t\t\t\t\t\tif ($component[0] === event.currentTarget) {\n\t\t\t\t\t\t\t$component.addClass('active');\n\t\t\t\t\t\t\t$component.removeClass('inactive');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$component.removeClass('active');\n\t\t\t\t\t\t\t$component.addClass('inactive');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t$futures.on('mouseout', function(){\n\t\t\t\t\tfutures.forEach(function($component){\n\t\t\t\t\t\t$component.removeClass('inactive');\n\t\t\t\t\t\t$component.removeClass('active');\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t$components.on('mouseover', function(event){\n\t\t\t\t\t$today.removeClass('show-content');\n\n\t\t\t\t\tcomponents.forEach(function($component){\n\t\t\t\t\t\tif ($component[0] === event.currentTarget) {\n\t\t\t\t\t\t\t$component.addClass('active');\n\t\t\t\t\t\t\t$component.removeClass('inactive');\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t$component.removeClass('active');\n\t\t\t\t\t\t\t$component.addClass('inactive');\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\t$today.addClass('active');\n\n\t\t\t\t\tif ($futureComponent[0] === event.currentTarget) {\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\n\t\t\t\t\tfutures.forEach(function($component){\n\t\t\t\t\t\tif ($component[0] === $today[0]) {\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t$component.removeClass('active');\n\t\t\t\t\t\t$component.addClass('inactive');\n\t\t\t\t\t});\n\t\t\t\t});\n\n\t\t\t\t$components.on('mouseout', function(){\n\t\t\t\t\t$today.removeClass('active');\n\n\t\t\t\t\tcomponents.forEach(function($component){\n\t\t\t\t\t\t$component.removeClass('inactive');\n\t\t\t\t\t\t$component.removeClass('active');\n\t\t\t\t\t});\n\n\t\t\t\t\tfutures.forEach(function($component){\n\t\t\t\t\t\t$component.removeClass('active');\n\t\t\t\t\t\t$component.removeClass('inactive');\n\t\t\t\t\t});\n\t\t\t\t});\n\t\t\t}\n\n\t\t\t// Halo Animations\n\t\t\tfunction generateHaloVars(){\n\t\t\t\treturn {\n\t\t\t\t\tdelay: 0.5 + Math.random() * 8,\n\t\t\t\t\tcss: {\n\t\t\t\t\t\tautoAlpha: 0,\n\t\t\t\t\t\tscale: 0.666 + Math.random() * 1.333\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tfunction getTimelineHeight() {\n\t\t\t\tsetTimeout(function() {\n\t\t\t\t\telement.find('.components').height(element.find('.timeline-bg-polyfill')[0].getBoundingClientRect().height);\n\t\t\t\t}, 500);\n\t\t\t}\n\n\t\t\tvar $components = element.find('.component');\n\t\t\tvar components = $components.toArray().map(function(component){ return $(component); });\n\t\t\t// Remove the Today / Future component\n\t\t\tvar $futureComponent = components.pop();\n\t\t\tvar $futures = $futureComponent.find('.component-content > div');\n\t\t\tvar futures = $futures.toArray().map(function(component){ return $(component); });\n\t\t\tvar $today = element.find('.future-today');\n\n\t\t\t$timeout(initializeMouseInteractions, 0);\n\n\t\t\tif(scope.browserName === 'ie' || scope.browserName === 'edge') {\n\n\t\t\t\t// Edge 12 & IE 11 need a set height on the container in order to display the SVG.\n\t\t\t\t// Furthermore, both browsers are unable to get the height of an absolutely positioned\n\t\t\t\t// SVG so `.timeline-bg-polyfill` is used to get height.\n\t\t\t\tgetTimelineHeight();\n\t\t\t\t$(window).resize(function() {\n\t\t\t\t\tgetTimelineHeight();\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t\tvar halos = element.find('.dot-halo').toArray();\n\n\t\t\thalos.forEach(function(halo){\n\t\t\t\tTweenMax.set(halo, {\n\t\t\t\t\tcss: {\n\t\t\t\t\t\tautoAlpha: 1,\n\t\t\t\t\t\tscale: 0,\n\t\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tvar haloVars = _.merge(generateHaloVars(), {\n\t\t\t\t\tease: 'Quint.easeOut',\n\t\t\t\t\trepeat: -1,\n\t\t\t\t\tonRepeat: function() {\n\t\t\t\t\t\tthis.updateTo(generateHaloVars(), true);\n\t\t\t\t\t}\n\t\t\t\t});\n\n\t\t\t\tTweenMax.to(halo, 3, haloVars);\n\t\t\t});\n\n\t\t\t// Today Animations\n\t\t\tvar TIMING = 3;\n\t\t\tvar todayElement = element.find('.today-dot');\n\t\t\tvar todayTimeline = new TimelineMax({ repeat: -1 });\n\n\t\t\t// Setup\n\t\t\tTweenMax.set(todayElement.find('#inner-halo-1'), {\n\t\t\t\tcss: {\n\t\t\t\t\tautoAlpha: 0.7,\n\t\t\t\t\tscale: 0.7,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tTweenMax.set(todayElement.find('#inner-halo-2'), {\n\t\t\t\tcss: {\n\t\t\t\t\tautoAlpha: 0.7,\n\t\t\t\t\tscale: 0.7,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t});\n\n\t\t\t// Timeline\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('#inner-halo-1'), TIMING * 0.625, {\n\t\t\t\tease: 'Power2.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tautoAlpha: 0,\n\t\t\t\t\tscale: 1.9,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), 0);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('#inner-halo-1'), TIMING * 0.75, {\n\t\t\t\tease: 'Power2.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tautoAlpha: 0.7,\n\t\t\t\t\tscale: 0.7,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), TIMING);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('#inner-halo-2'), TIMING, {\n\t\t\t\tease: 'Power2.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tautoAlpha: 0,\n\t\t\t\t\tscale: 1.75,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), 0);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('#inner-halo-2'), TIMING, {\n\t\t\t\tease: 'Power2.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tautoAlpha: 0.7,\n\t\t\t\t\tscale: 0.7,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), TIMING);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('#outter-halo'), TIMING, {\n\t\t\t\tease: 'Back.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tscale: 1.35,\n\t\t\t\t\tautoAlpha: 0.12,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), 0);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('#outter-halo'), TIMING, {\n\t\t\t\tease: 'Back.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tscale: 1,\n\t\t\t\t\tautoAlpha: 0.5,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), TIMING);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('.dot-blue'), TIMING, {\n\t\t\t\tease: 'Back.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tscale: 1.3,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), 0);\n\n\t\t\ttodayTimeline.add(TweenMax.to(todayElement.find('.dot-blue'), TIMING, {\n\t\t\t\tease: 'Back.easeInOut',\n\t\t\t\tcss: {\n\t\t\t\t\tscale: 1,\n\t\t\t\t\ttransformOrigin: '50% 50%'\n\t\t\t\t}\n\t\t\t}), TIMING);\n\n\t\t\t// Future\n\t\t\telement.find('.future .future-dot').toArray().forEach(function(dot){\n\t\t\t\tvar origin = (50 + Math.random() * 15) + '% ' + (50 + Math.random() * 15) + '%';\n\n\t\t\t\tTweenMax.to(element.find(dot), 12 + Math.random() * 13, {\n\t\t\t\t\tease: 'Power0.easeIn',\n\t\t\t\t\trepeat: -1,\n\t\t\t\t\tcss: {\n\t\t\t\t\t\trotation: 360,\n\t\t\t\t\t\ttransformOrigin: origin\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\t};\n}]);\n\n'use strict';\n\nangular.module('app').filter('trustAsResourceUrl', [\"$sce\", function($sce){\n\treturn function(url){\n\t\treturn $sce.trustAsResourceUrl(url);\n\t};\n}]);\n\n\n\n'use strict';\n\n/**\n * @ngdoc directive\n * @name view-upgrade\n * @description\n * OpenWebGames Upgrade Page UI\n */\nangular.module('app').directive('viewUpgrade', [\"browser\", \"$timeout\", function(browser, $timeout){\n\treturn {\n\t\trestrict: 'C',\n\t\tscope: true,\n\t\tlink: function(scope){\n\n\t\t\t// default to tab selection to stable\n\t\t\tif (!scope.selectedTab) {\n\t\t\t\tscope.selectedTab = 'stable';\n\t\t\t}\n\n\t\t\t// organize browsers by stable and experimental\n\t\t\tvar browsers = _.partition(_.shuffle(browser.getBrowsers()), function(browser){\n\t\t\t\treturn !browser.development;\n\t\t\t});\n\t\t\tscope.stableBrowsers = browsers[0];\n\t\t\tscope.experimentalBrowsers = browsers[1];\n\n\t\t\t// perform browser measurements after digest cycle has completed\n\t\t\t$timeout(function(){\n\n\t\t\t\t// examine viewport\n\t\t\t\tvar viewportWidth = $(window).width();\n\n\t\t\t\t// hide experimental browsers\n\t\t\t\tif (viewportWidth >= 1100){\n\n\t\t\t\t\t// large screens\n\t\t\t\t\t$('.experimentalBrowsers').css({\n\t\t\t\t\t\tdisplay\t\t: 'block',\n\t\t\t\t\t\tposition\t: 'relative',\n\t\t\t\t\t\ttop\t\t\t: 0,\n\t\t\t\t\t\tmarginTop\t: -343,\n\t\t\t\t\t\topacity\t\t: 0,\n\t\t\t\t\t\tzIndex\t\t: -10\n\t\t\t\t\t});\n\n\t\t\t\t} else {\n\n\t\t\t\t\t// small screens\n\t\t\t\t\t$('.experimentalBrowsers').css({\n\t\t\t\t\t\tdisplay\t\t: 'block',\n\t\t\t\t\t\tposition\t: 'absolute',\n\t\t\t\t\t\topacity\t\t: 0,\n\t\t\t\t\t\tzIndex\t\t: -10\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t\t// show stable browsers\n\t\t\t\t$('.stableBrowsers').css({\n\t\t\t\t\tdisplay\t: 'block',\n\t\t\t\t\topacity\t: 1\n\t\t\t\t});\n\n\t\t\t\t// animate stable browsers in\n\t\t\t\tvar stableIcons = $('a.browser-stable');\n\t\t\t\tTweenMax.staggerFrom(stableIcons, 0.8, {opacity:0, y:600, ease:Back.easeOut.config(0.7)}, 0.1);\n\n\t\t\t\t/**\n\t\t\t\t * select stable browsers for user\n\t\t\t\t *\n\t\t\t\t * @param {Void}\n\t\t\t\t * @return {Void}\n\t\t\t\t */\n\t\t\t\tscope.selectStableBrowsers = function(){\n\n\t\t\t\t\tscope.selectedTab = 'stable';\n\n\t\t\t\t\tvar stableIcons = $('a.browser-stable');\n\t\t\t\t\tvar experimentalIcons = $('a.browser-experimental');\n\n\t\t\t\t\t// place stable browsers in front of experimental browsers\n\t\t\t\t\t$('.stableBrowsers').css({display: 'block', opacity: 1, zIndex: 10});\n\t\t\t\t\t$('.experimentalBrowsers').css({zIndex: -10});\n\n\t\t\t\t\t// prevent excessive height on small screens\n\t\t\t\t\tif (viewportWidth < 1100){\n\t\t\t\t\t\t$('.view-upgrade .container').css({maxHeight: 2000});\n\t\t\t\t\t}\n\n\t\t\t\t\tTweenMax.staggerTo(stableIcons, 0.8, {opacity:1, y:0, ease:Back.easeOut.config(0.7)}, 0.1);\n\t\t\t\t\tTweenMax.staggerTo(experimentalIcons, 0.8, {opacity:0, y:600, ease:Back.easeOut.config(0.7)}, 0.1);\n\t\t\t\t};\n\n\t\t\t\t/**\n\t\t\t\t * select experimental browsers for user\n\t\t\t\t *\n\t\t\t\t * @param {Void}\n\t\t\t\t * @return {Void}\n\t\t\t\t */\n\t\t\t\tscope.selectExperimentalBrowsers = function(){\n\n\t\t\t\t\tscope.selectedTab = 'experimental';\n\n\t\t\t\t\tvar stableIcons = $('a.browser-stable');\n\t\t\t\t\tvar experimentalIcons = $('a.browser-experimental');\n\n\t\t\t\t\t// show experimental browsers\n\t\t\t\t\tif (viewportWidth >= 1100){\n\n\t\t\t\t\t\t// large screens\n\t\t\t\t\t\t$('.experimentalBrowsers').css({\n\t\t\t\t\t\t\tposition\t: 'relative',\n\t\t\t\t\t\t\ttop\t\t\t: 0,\n\t\t\t\t\t\t\tmarginTop\t: -343,\n\t\t\t\t\t\t\topacity\t\t: 1,\n\t\t\t\t\t\t\tzIndex\t\t: 10\n\t\t\t\t\t\t});\n\n\t\t\t\t\t} else {\n\n\t\t\t\t\t\t// small screens\n\t\t\t\t\t\t$('.experimentalBrowsers').css({\n\t\t\t\t\t\t\tposition\t: 'absolute',\n\t\t\t\t\t\t\topacity\t\t: 1,\n\t\t\t\t\t\t\tzIndex\t\t: 10\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\t// prevent excessive height on small screens\n\t\t\t\t\t\t$('.view-upgrade .container').css({maxHeight: 1300});\n\t\t\t\t\t}\n\n\t\t\t\t\t// animate stable browsers out and experimental browsers in\n\t\t\t\t\tTweenMax.staggerTo(experimentalIcons, 0.8, {opacity:1, y:0, ease:Back.easeOut.config(0.7)}, 0.1);\n\t\t\t\t\tTweenMax.staggerTo(stableIcons, 0.8, {opacity:0, y:600, ease:Back.easeOut.config(0.7)}, 0.1);\n\n\t\t\t\t};\n\n\t\t\t});\n\n\t\t}\n\t};\n\n}]);\n"],"sourceRoot":"/source/"}