"use strict";angular.module("app",["ngSanitize","ngAnimate","ui.router","hj.gsapifyRouter"]),angular.module("app").directive("a",["$anchorScroll",function(e){return{restrict:"E",link:function(t,n,r){r.href&&r.href.match(/#[^\/]/)&&$(n).on("click",function(t){t.preventDefault(),e(r.href.substr(1))})}}}]),angular.module("app").config(["$stateProvider",function(e){var t={duration:.4,ease:"Quart.easeInOut",css:{}},n=function(e){var n=_.cloneDeep(t);switch(e.transitionDirection){case"up":n.css.y="-100%";break;case"down":n.css.y="100%";break;case"left":n.css.x="-100%";break;case"right":n.css.x="100%"}return{transition:n}},r=function(e){var n=_.cloneDeep(t);switch(e.transitionDirection){case"up":n.css.y="100%";break;case"down":n.css.y="-100%";break;case"left":n.css.x="100%";break;case"right":n.css.x="-100%"}return{transition:n}},o={enter:{"in":["$state",n],out:["$state",n]},leave:{out:["$state",r],"in":["$state",r]}};e.state("app",{views:{content:{templateUrl:"home.html"}}}).state("app.page",{url:"/:slug.html",views:{"content@":{templateProvider:["$stateParams","$templateCache",function(e,t){var n=t.get(e.slug+".html");return n||(n=t.get("unknown.html")),n}]}},data:{"gsapifyRouter.content":o}}).state("app.unknown",{url:"*path",views:{"content@":{controller:["$state","$stateParams","$templateCache",function(e,t,n){var r=e.params.path.replace(/^\//,"").trim();""===e.params.path?e.go("app.page",{slug:"home"}):n.get(r+".html")&&e.go("app.page",{slug:r})}],templateUrl:"unknown.html"}}})}]),angular.module("app").directive("blurrable",["$rootScope",function(e){return{restrict:"A",link:function(t,n,r){function o(){var e=!0;return t.isMobile?e=!1:t.currentBrowser&&/edge/i.test(t.currentBrowser.engine.name)&&(e=!1),e?"blur":"blur-fallback"}function a(t){e.blurrables[t]&&(_.each(e.blurrables[t].elements,function(e){e.addClass(o())}),e.blurrables[t].blurred=!0)}function i(t){e.blurrables[t]&&(_.each(e.blurrables[t].elements,function(e){e.removeClass(o())}),e.blurrables[t].blurred=!1)}e.blurrables||(e.blurrables={},e.blur=function(e){a(e||"default")},e.unblur=function(e){i(e||"default")},e.blurred=function(t){return e.blurrables[t||"default"].blurred});var s=r.blurrable||"default";e.blurrables[s]||(e.blurrables[s]={blurred:!1,elements:[]}),e.blurrables[s].elements.push(n)}}}]),angular.module("app").factory("browser",function(){function e(e){var t=e.browser.name.toLowerCase();if(/(firefox|chrome|opera|safari)/i.test(t)&&e.browser.latestVersion){var n=parseInt(e.browser.version.replace(/^(\d+).*$/,"$1"));if(n>=e.browser.latestVersion)return!0}return!1}function t(e){var t=["adblock","airweb","android-webview-beta","android","avant","boat","brave","chrome-android","chrome-beta-android","chrome-dev-android","chrome","cm","coast","coc-coc","diigo","dolphin","dooble","edge","epic","firefox-beta","firefox-developer-edition","firefox","icab-mobile","icecat","iceweasel","internet-explorer-tile","internet-explorer","k-meleon","konqueror","lightning","link-bubble","mercury","midori","mihtool","netsurf","omniweb-test-build","omniweb","opera-beta","opera-mini-beta","opera-mini","opera","orbitum","pale-moon","puffin","qupzilla","rekong","roccat","safari-ios","safari","seamonkey","silk","sleipnir-mac","sleipnir-mobile","sleipnir-windows","sogou-mobile","tor","uc","vivaldi","waterfox","web","yandex"],n={firefox:"firefox-nightly",chrome:"chrome-canary",opera:"opera-developer",safari:"webkit-nightly"},r=e.browser.name.toLowerCase(),o=_.indexOf(t,r),a=t[o]||null;return a?(e.browser.development&&(a=n[a]),"/assets/img/browsers/"+a+"_256x256.png"):null}function n(e){e=e.toLowerCase();var t=null;return"browserVersions"in window&&window.browserVersions[e]&&(t=window.browserVersions[e].stable),t}function r(e){e=e.toLowerCase();var t=null;return"browserVersions"in window&&window.browserVersions[e]&&(t=window.browserVersions[e].latest),t}function o(){var n=i.getResult();n.browser.stableVersion=void 0;var r=n.browser.name.toLowerCase();return"browserVersions"in window&&window.browserVersions[r]&&(n.browser.stableVersion=window.browserVersions[r].stable,n.browser.latestVersion=window.browserVersions[r].latest),n.browser.development=e(n),n.browser.urls={download:void 0,homepage:void 0,icon:t(n)},n}function a(){return s}var i=new UAParser,s=[{name:"Google Chrome",slug:"chrome",icon:"/assets/img/browsers/chrome_256x256.png",development:!1,url:"https://www.google.com/chrome/browser/desktop/index.html",stableVersion:n("chrome"),latestVersion:r("chrome"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!1,sharedArrayBuffer:!1,simd:!1,canvas:!0,webGl:!0,webGl2:!1,webAudio:!0,fullscreen:!0,pointerLock:!0,indexedDb:!0,serviceWorker:!0,webSocket:!0,webRtc:!0,domLevel3:!0,touch:!0,gamepad:!0},mobile:!1},{name:"Microsoft Edge",slug:"edge",icon:"/assets/img/browsers/edge_256x256.png",development:!1,url:"https://www.microsoft.com/en-us/download/details.aspx?id=48126",stableVersion:n("edge"),latestVersion:r("edge"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!1,sharedArrayBuffer:!1,simd:!1,canvas:!0,webGl:!0,webGl2:!1,webAudio:!0,fullscreen:!0,pointerLock:!0,indexedDb:!0,serviceWorker:!0,webSocket:!0,webRtc:!0,domLevel3:!0,touch:!0,gamepad:!0},mobile:!1},{name:"Mozilla Firefox",slug:"firefox",icon:"/assets/img/browsers/firefox_256x256.png",development:!1,url:"https://www.mozilla.org/en-US/firefox/new/",stableVersion:n("firefox"),latestVersion:r("firefox"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!1,sharedArrayBuffer:!1,simd:!1,canvas:!0,webGl:!0,webGl2:!1,webAudio:!0,fullscreen:!0,pointerLock:!0,indexedDb:!0,serviceWorker:!0,webSocket:!0,webRtc:!0,domLevel3:!0,touch:!1,gamepad:!0},mobile:!1},{name:"Apple Safari",slug:"safari",icon:"/assets/img/browsers/safari_256x256.png",development:!1,url:"https://support.apple.com/en-us/HT204416",stableVersion:n("safari"),latestVersion:r("safari"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!1,sharedArrayBuffer:!1,simd:!1,canvas:!0,webGl:!0,webGl2:!1,webAudio:!0,fullscreen:!0,pointerLock:!1,indexedDb:!0,serviceWorker:!1,webSocket:!0,webRtc:!1,domLevel3:!0,touch:!1,gamepad:!1},mobile:!1},{name:"Webkit Nightly",slug:"webkit",icon:"/assets/img/browsers/webkit-nightly_256x256.png",development:!0,url:"https://nightly.webkit.org/",stableVersion:r("safari"),latestVersion:r("safari"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!1,sharedArrayBuffer:!1,simd:!1,canvas:!0,webGl:!0,webGl2:!1,webAudio:!0,fullscreen:!0,pointerLock:!1,indexedDb:!0,serviceWorker:!1,webSocket:!0,webRtc:!0,domLevel3:!0,touch:!1,gamepad:!0},mobile:!1},{name:"Google Chrome Canary",slug:"chrome",icon:"/assets/img/browsers/chrome-canary_256x256.png",development:!0,url:"https://www.google.com/chrome/browser/canary.html",stableVersion:r("chrome"),latestVersion:r("chrome"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!1,sharedArrayBuffer:!1,simd:!1,canvas:!0,webGl:!0,webGl2:!1,webAudio:!0,fullscreen:!0,pointerLock:!0,indexedDb:!0,serviceWorker:!0,webSocket:!0,webRtc:!0,domLevel3:!0,touch:!0,gamepad:!0},mobile:!1},{name:"Mozilla Firefox Nightly",slug:"firefox",icon:"/assets/img/browsers/firefox-nightly_256x256.png",development:!0,url:"https://nightly.mozilla.org/",stableVersion:r("firefox"),latestVersion:r("firefox"),supportedFeatures:{optimizedJavaScript:!0,asm:!0,webAssembly:!0,sharedArrayBuffer:!0,simd:!0,canvas:!0,webGl:!0,webGl2:!0,webAudio:!0,fullscreen:!0,pointerLock:!0,indexedDb:!0,serviceWorker:!0,webSocket:!0,webRtc:!0,domLevel3:!0,touch:!1,gamepad:!0},mobile:!1}];return{getCurrentBrowser:o,getBrowsers:a}}),angular.module("app").filter("byActiveDemoGame",function(){return function(e,t){var n={};return _.each(e,function(e,r){if(e.desktopDemo||e.mobileDemo){t||(n[r]=e);var o=t&&"mobile"===t.device.type;(o&&e.mobileDemo||!o&&e.desktopDemo)&&(n[r]=e)}}),n}}),angular.module("app").filter("byActiveGame",function(){return function(e,t){var n={};return _.each(e,function(e,r){if(e.desktopTest||e.mobileTest){t||(n[r]=e);var o=t&&"mobile"===t.device.type;(o&&e.mobileTest||!o&&e.desktopTest)&&(n[r]=e)}}),n}}),angular.module("app").filter("byCustomBrowserOrder",function(){return function(e){var t=_.partition(e,function(e){return!e.development});return t[0]=_.shuffle(t[0]),t[1]=_.shuffle(t[1]),_.flatten(t)}}),angular.module("app").filter("byCustomResourceOrder",function(){return function(e){var t=_.partition(e,function(e){return!/github\.com/i.test(e.url)});return t[0]=_.shuffle(t[0]),_.flatten(t)}}),angular.module("app").filter("byGameFolderSizeOrder",function(){return function(e){var t=_.keys(e);_.each(t,function(t){e[t].key=t});var n=_.values(e);n=_.sortBy(n,function(e){return e.folderSize});var r={};return _.each(n,function(e){r[e.key]=e,delete r[e.key].key}),r}}),angular.module("app").filter("byRandomGameOrder",function(){return function(e){var t=_.shuffle(_.keys(e)),n={};return _.each(t,function(t){n[t]=e[t]}),n}}),angular.module("app").filter("byPageType",function(){return function(e,t){return _.filter(e,function(e){return e.type&&e.type===t})}}),angular.module("app").directive("captureArrows",["$timeout","$rootScope","easing","navigation",function(e,t,n,r){return{restrict:"C",scope:!1,link:function(n,o){n.triggerArrow=function(t){angular.element("body").addClass("arrow-"+t),e(function(){angular.element("body").removeClass("arrow-"+t)},250),r.navigateByDirection(t)["catch"](function(e){if(!_.isString(e))throw e})},o.on("keydown",function(e){if(!t.blurred()){var r;switch(e.which){case 37:r="left";break;case 38:r="up";break;case 39:r="right";break;case 40:r="down";break;default:return}n.triggerArrow(r)}})}}}]),angular.module("app").directive("captureDiagnosticKey",["$state",function(e){return{restrict:"C",scope:!1,link:function(t,n){function r(n){123===n&&(e.go("app.page",{slug:"diagnostics"}),t.$apply())}n.on("keydown",function(e){r(e.which)})}}}]),angular.module("app").directive("captureKonami",function(){return{restrict:"C",scope:!1,link:function(e,t){function n(t){var n=[38,38,40,40,37,39,37,39,66,65],o=r.length||0;return 10===o?(32!==t&&13!==t||(console.log("KONAMI!!!!"),e.status="KONAMI!!!",e.$apply()),void(r=[])):void(n[o]===t&&r.push(t))}var r=[];t.on("keydown",function(e){n(e.which)})}}}),angular.module("app").directive("captureMouse",["$timeout",function(e){return{restrict:"C",scope:!1,link:function(t,n){function r(){angular.element("body").addClass("mouse-move"),e(function(){angular.element("body").removeClass("mouse-move")},250)}function o(){angular.element("body").addClass("mouse-click"),e(function(){angular.element("body").removeClass("mouse-click")},250)}n.on("mousemove",function(){r()}),n.on("click",function(){o()})}}}]),angular.module("app").directive("circleGrid",["$timeout",function(e){return{restrict:"C",link:function(t,n){function r(){for(var e=_.random(g,h),t=null,n="",r=0;e>r;r++)t=_.random(1,2),n+='<div class="smoke'+t+'"></div>';return n}function o(){var e=r(),t=$('<div class="grid-container">'+e+'<div class="circle-container"></div></div>');$(n).prepend(t)}function a(){var e=$(n).find(".smoke1,.smoke2"),t=$(window).width(),r=document.body.scrollHeight,o=-100;e.each(function(){$(this).css({marginTop:_.random(o,r),marginLeft:_.random(o,t)})})}function i(){for(var e=$(window).width(),t=document.body.scrollHeight,n=Math.floor(e/w),r=Math.floor(t/w),o=n*r,a=0;o>a;a++)$(".circle-container").append('<div class="circle-outer"><div class="circle-inner"></div></div>')}function s(e){var t=$(this),n=t.offset(),r={x:n.left+t.outerWidth()/2,y:n.top+t.outerHeight()/2},o=new Math.Vector(r.x-e.pageX,r.y-e.pageY),a=t.outerWidth()/2;if(!(o.length()>=a)){var i=o.normal().multeq(a).sub(o),s={left:n.left+i.x,top:n.top+i.y},u=parseInt(t.css("padding-left"));s.left<-u?s.left=-u:s.left+t.outerWidth()-u>$(document).width()&&(s.left=$(document).width()-t.outerWidth()+u),s.top<-u?s.top=-u:s.top+t.outerHeight()-u>$(document).height()&&(s.top=$(document).height()-t.outerHeight()+u),t.css("opacity",.25),t.offset(s)}}function u(){$(this).bind("mousemove",s)}function c(){var e=$(this);e.unbind("mousemove",s),e.animate({top:0,left:0,opacity:.07},{easing:"swing",duration:500})}function l(){$(".circle-outer").bind("mouseover",u),$(".circle-outer").bind("mouseout",c)}function d(){$(".grid-container").remove()}function m(){o(),i(),a(),l()}function p(){d(),m()}function f(e){return _.includes(v,e)}var g=5,h=10,w=45,v=["faq","home","media","resources","rights","upgrade"];Math.Vector=function(e,t){this.x=e,this.y=t},Math.Vector.prototype={clone:function(){return new Math.Vector(this.x,this.y)},negate:function(){return this.x=-this.x,this.y=-this.y,this},neg:function(){return this.clone().negate()},addeq:function(e){return this.x+=e.x,this.y+=e.y,this},subeq:function(e){return this.addeq(e.neg())},add:function(e){return this.clone().addeq(e)},sub:function(e){return this.clone().subeq(e)},multeq:function(e){return this.x*=e,this.y*=e,this},diveq:function(e){return this.x/=e,this.y/=e,this},mult:function(e){return this.clone().multeq(e)},div:function(e){return this.clone().diveq(e)},dot:function(e){return this.x*e.x+this.y*e.y},length:function(){return Math.sqrt(this.dot(this))},normal:function(){return this.clone().diveq(this.length())}},e(function(){if(t.isMobile===!1){if(!f(t.stateParams.slug))return d();m(),t.$on("$stateChangeSuccess",function(e,t,n){return f(n.slug)?void p():d()}),$(window).resize(function(){d(),f(t.stateParams.slug)&&m()})}})}}}]),angular.module("app").directive("chartType",function(){return{restrict:"A",require:["?chartData","?unitWidth","?unitHeight","?unitMargin"],link:function(e,t,n){t.attr("id")||t.attr("id",_.uniqueId("d3-"));var r=n.chartType,o=n.chartData,a=n.unitWidth||10,i=n.unitHeight||a,s=n.unitMargin||1,u=function(){var e=a*_.max(o),t=i*o.length+s*(o.length-1),n=l.append("svg").attr({preserveAspectRatio:"none","shape-rendering":"crispEdges",width:e,height:t,viewBox:function(){return"0 0 "+e+" "+t}}).style({width:"100%",height:"100%"}),r=[];_.each(o,function(e,t){r.push({x:0,y:t*i+t*s,width:e*a,height:i})}),n.selectAll("rect").data(r).enter().append("rect").attr({x:function(e){return e.x},y:function(e){return e.y},width:function(e){return e.width},height:function(e){return e.height}})},c=function(){var e=0,t=0,n=[];_.each(o,function(r,o){var i=o>0?n[o-1].cy+n[o-1].r:0;n.push({cx:r*a,cy:r*a+i,r:r*a}),e=_.max([e,r*a*2]),t=r*a+i+r*a});var r=l.append("svg").attr({preserveAspectRatio:"none",width:e,height:t,viewBox:function(){return"0 0 "+e+" "+t}}).style({width:"100%",height:"100%"});r.selectAll("circle").data(n).enter().append("circle").attr({cx:function(e){return e.cx},cy:function(e){return e.cy},r:function(e){return e.r}})};if(r&&o){var l=d3.select("#"+t.attr("id"));switch(o=JSON.parse(o),r){case"bar":u();break;case"circle":c()}}}}}),angular.module("app").factory("developerResource",function(){function e(){return t}var t=[{name:"Mozilla Developer Network",icon:"/assets/img/resources/mdn.png",url:"https://developer.mozilla.org/"},{name:"Microsoft Developer Network",icon:"/assets/img/resources/msdn.png",url:"https://insider.windows.com/"},{name:"Google Developer Network",icon:"/assets/img/resources/chromium.png",url:"https://developers.google.com/games/"}];return{getResources:e}}),angular.module("app").directive("developerResourceListing",["$filter","developerResource",function(e,t){return{restrict:"C",link:function(n){var r=e("byCustomResourceOrder");n.resources=r(t.getResources())}}}]),angular.module("app").directive("diagnosticChart",["$compile",function(e){return{restrict:"C",link:function(t,n){console.log(t.currentBrowser);var r='<img style="float: right; max-width:60px;" src="'+t.currentBrowser.browser.urls.icon+'"/>';r+="<p>"+t.currentBrowser.ua+"</p>",r+='<table class="table table-compact">',r+='<tr><th colspan="2">BROWSER</th></tr>',r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser name</td><td>"+t.currentBrowser.browser.name+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser major</td><td>"+t.currentBrowser.browser.major+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser version</td><td>"+t.currentBrowser.browser.version+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser stable</td><td>"+t.currentBrowser.browser.stableVersion+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;browser latest</td><td>"+t.currentBrowser.browser.latestVersion+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;latest</td><td>"+t.currentBrowser.browser.latest+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;development</td><td>"+t.currentBrowser.browser.development+"</td></tr>",r+='<tr><th colspan="2">ENGINE</th></tr>',r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;name</td><td>"+t.currentBrowser.engine.name+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;version</td><td>"+t.currentBrowser.engine.version+"</td></tr>",r+='<tr><th colspan="2">OS</th></tr>',r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;name</td><td>"+t.currentBrowser.os.name+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;version</td><td>"+t.currentBrowser.os.version+"</td></tr>",r+='<tr><th colspan="2">CPU</th></tr>',r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;architecture</td><td>"+t.currentBrowser.cpu.architecture+"</td></tr>",r+='<tr><th colspan="2">DEVICE</th></tr>',r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;model</td><td>"+t.currentBrowser.device.model+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;type</td><td>"+t.currentBrowser.device.type+"</td></tr>",r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;vendor</td><td>"+t.currentBrowser.device.vendor+"</td></tr>",r+='<tr><th colspan="2">FEATURES</th></tr>',_.each(t.currentBrowser.browser.features,function(e,t){r+='<tr><th colspan="2">'+t.toUpperCase()+" SUPPORT</th></tr>",_.each(e,function(e,t){r+="<tr><td>&nbsp;&nbsp;&nbsp;&nbsp;"+t+"</td><td>"+e+"</td></tr>"})}),r+="</table>",n.html(r).show(),e(n.contents())(t)}}}]),angular.module("app").factory("easing",function(){function e(e,t,n,r){return n*(e/=r)*e+t}return{easeInQuad:e}}),angular.module("app").directive("viewFaq",["$timeout","$document","$rootScope",function(e,t,n){return{restrict:"C",scope:!0,link:function(r,o){function a(e){if(!n.blurred())switch(e.which){case 37:c.slick("slickPrev");break;case 39:c.slick("slickNext");break;default:return}}function i(){u=o.find(".slick-slide").toArray().reduce(function(e,t){return t=$(t),e[t.data("slick-index")]=t,e},{})}function s(e){_.forEach(u,function(t,n){n===e-1||n===e+1?(t.addClass("secondary"),t.removeClass("tertiary")):n===e-2||n===e+2?(t.addClass("tertiary"),t.removeClass("secondary")):(t.removeClass("secondary"),t.removeClass("tertiary"))})}if(!(o.width()<1099)){e(function(){n.onLeftScroll=function(){c.slick("slickPrev")},n.onRightScroll=function(){c.slick("slickNext")}});var u,c=o.find(".js-slick").slick({centerMode:!0,infinite:!1,initialSlide:0,variableWidth:!0,nextArrow:'<div class="nav-arrow nav-right slick-next"><button class="nav-button"></button></div>',prevArrow:'<div class="nav-arrow nav-left slick-prev"><button class="nav-button"></button></div>'});e(function(){i(),s(0),t.on("keydown",a)}),c.on("beforeChange",function(e,t,n,r){s(r)}),o.on("$destroy",function(){t.off("keydown",a),n.onLeftScroll=null,n.onRightScroll=null})}}}}]),angular.module("app").directive("viewFeatures",["$filter","$state","$timeout","browser","game","gameSupport",function(e,t,n,r,o,a){return{restrict:"C",link:function(i,s){function u(e){TweenMax.to(g,.3,{ease:"Quint.easeOut",css:{y:e}})}function c(e){TweenMax.to(w,.3,{ease:"Quint.easeOut",css:{x:e}})}function l(){$("div.msg-results").addClass("show-definitions")}function d(){$("div.msg-results").removeClass("show-definitions")}if(!i.selectedTab){i.selectedTab="games",i.enableFilters=!1,i.enableSearch=!1;var m=e("byCustomBrowserOrder"),p=e("byActiveGame"),f=e("byGameFolderSizeOrder");i.browsers=m(r.getBrowsers()),i.games=p(o.getGames(),i.currentBrowser),i.games=f(i.games),i.getCurrentBrowserFeatureClass=function(e){return a.hasFeature(e)?"supported":"not-supported"},i.getGameFeatureClass=function(e,t){var n="not-in-use";return _.each(i.games,function(r,o){o===e&&_.includes(r.features,t)&&(n="in-use")}),n},i.getBrowserFeatureClass=function(e,t){return/edge/i.test(e.name)&&"webRtc"===t?"not-supported":e.supportedFeatures[t]?"supported":"not-supported"},i.getResultClass=function(e){var t=i.$parent.results;if(!t)return"test-failed";var n=t[e];return n?n.error?"Game timed out"===n.error.message?"test-timeout":"test-failed":n.status&&0!==n.status.length&&n.results?"test-"+n.status:"test-failed":"test-failed"},i.getFps=function(e){var t=i.$parent.results;if(!t)return 0;var n=t[e];return n&&n.results&&!isNaN(n.results.fps)?Math.floor(n.results.fps):0},i.getTotalTime=function(e){var t=i.$parent.results;if(!t)return 0;var n=t[e];if(!n||!n.results||isNaN(n.results.totalTime))return 0;var r=Math.floor(n.results.totalTime),o=r/1e3/60,a=Math.floor(o%1*60).toString();return Math.floor(o)+":"+(1===a.length?"0"+a:a)},i.getFramesDropped=function(e){var t=0;if(i.$parent.results){var n=i.$parent.results[e];n&&n.results&&!isNaN(n.results.numStutterEvents)&&(t=Math.floor(n.results.numStutterEvents))}return t}}i.rerunTest=function(){i.$parent.testState="intro",t.go("app.page",{slug:"tests"})};var g=s.find(".highlight-row"),h=TweenMax.to(g,.5,{paused:!0,ease:"Cubic.easeInOut",css:{opacity:.15}}),w=s.find(".highlight-column"),v=TweenMax.to(w,.5,{paused:!0,ease:"Cubic.easeInOut",css:{opacity:.15}});n(function(){s.find(".feature-set").toArray().forEach(function(e){var t=$(e);t.on("mouseover",function(){u(parseInt(t.css("margin-top").replace("px",""))+t.position().top+.5*t.height()),h.play()}),t.on("mouseout",function(){h.reverse()})});var e=s.find(".feature-set.your-browser")[0],t=s.find(".game").length,n=$(".show-test-results .msg-results .btn");n.css({marginTop:54+90*t}),s.find(".feature-set .js-column").toArray().forEach(function(t){var n=$(t);n.on("mouseover",function(){var r;r=$.contains(e,t)?n.position().left+n.width():n.position().left+.5*n.width(),c(r),v.play()}),n.on("mouseout",function(){v.reverse()})}),s.find(".header li:not(.section-title)").toArray().forEach(function(e){var t=$(e);t.on("mouseover",function(){c(.995*(t.parent().position().left+t.position().left+.4*t.width())),v.play()}),t.on("mouseout",function(){v.reverse()})}),s.find(".your-browser").toArray().forEach(function(e){var t=$(e),n=900;t.on("mouseover",function(){TweenMax.to(g,.2,{ease:"Cubic.easeInOut",width:n})}),t.on("mouseout",function(){TweenMax.to(g,.2,{ease:"Cubic.easeInOut",width:"100%"})})});var r=s.find("svg.test-definitions");r.bind("click",l),r.bind("mouseover",l),r.bind("mouseout",d);var o=s.find(".popover");o.bind("click",d)},0)}}}]),angular.module("app").directive("feedback",["$http",function(e){return{restrict:"C",link:function(t,n){n.on("submit",function(){var r=n.find("textarea");if(!r.val())return console.error("nothing to submit");var o=function(){r.val(""),t.showConfirmation(!0)},a=function(){t.showConfirmation(!1)};e.post("/feedback",{text:r.val()}).success(o).error(a)})}}}]),angular.module("app").factory("game",function(){function e(){return n}var t="https://s3.amazonaws.com/owg/",n={sponzadynamicshadows:{name:"Sponza Dynamic Shadows",icon:t+"sponza/icon.png",screenshot:t+"sponza/reference.png",url:t+"sponza/Demos/SponzaDynamicShadows/index.html",width:1366,height:768,features:["webGl","domLevel3"],folderSize:78560,timeout:6e4,credits:[{category:"WebGL JavaScript Framework",name:"BabylonJS",url:"http://www.babylonjs.com/"}],mobileTest:!0,mobileDemo:!1,desktopTest:!0,desktopDemo:!1,fullscreen:!0},heroesofparagon:{name:"Heroes of Paragon",icon:t+"heroesofparagon/icon.png",screenshot:t+"heroesofparagon/reference.png",url:t+"heroesofparagon/index.html",width:1366,height:768,features:["optimizedJavaScript","webGl","webAudio","indexedDb","domLevel3"],folderSize:244488,timeout:12e4,credits:[{category:"Unity3D",name:"EVERYDAYiPLAY",url:"https://everydayiplay.com/"}],mobileTest:!1,mobileDemo:!1,desktopTest:!0,desktopDemo:!0,fullscreen:!0},suntemple:{name:"Sun Temple",icon:t+"suntemple/icon.jpg",screenshot:t+"suntemple/reference.png",url:t+"suntemple/index.html",width:1366,height:768,features:["optimizedJavaScript","webGl","indexedDb","domLevel3"],folderSize:203144,timeout:12e4,credits:[{category:"Unreal Engine 4.10",name:"Sun Temple",url:"https://www.unrealengine.com/"}],mobileTest:!1,mobileDemo:!1,desktopTest:!0,desktopDemo:!1,fullscreen:!1},casino:{name:"Casino",icon:t+"casino/icon.jpg",screenshot:t+"casino/reference.png",url:t+"casino/index.html",width:1366,height:768,features:["webGl","domLevel3"],folderSize:157720,timeout:12e4,credits:[{category:"PlayCanvas",name:"Casino",url:"https://playcanvas.com/industries/gambling"}],mobileTest:!1,mobileDemo:!1,desktopTest:!0,desktopDemo:!0,fullscreen:!0},alphabear:{name:"Alphabear",icon:t+"alphabear/icon.jpg",screenshot:t+"alphabear/reference.png",url:t+"alphabear/index.html",width:1366,height:768,features:["webGl","domLevel3"],folderSize:51968,timeout:12e4,credits:[{category:"SpryFox",name:"Alphabear",url:"http://spryfox.com/our-games/alphabear/"}],mobileTest:!1,mobileDemo:!1,desktopTest:!0,desktopDemo:!0,fullscreen:!1},hurry:{name:"Hurry!",icon:t+"hurry/icon.jpg",screenshot:t+"hurry/reference.png",url:t+"hurry/index.html",width:1117,height:768,features:["canvas","domLevel3"],folderSize:2712,timeout:12e4,credits:[{category:"Hugh Kennedy",name:"Hurry!",url:"https://github.com/hughsk/ludum-dare-27"}],mobileTest:!0,mobileDemo:!1,desktopTest:!0,desktopDemo:!1,fullscreen:!1},skisafari:{name:"Ski Safari",icon:t+"skisafari/icon.jpg",screenshot:t+"skisafari/reference.png",url:t+"skisafari/index.html",width:1366,height:768,features:["webGl","domLevel3"],folderSize:96512,timeout:12e4,credits:[{category:"Sleepy Z Studios",name:"Ski Safari",url:"http://skisafari2.com/"}],mobileTest:!1,mobileDemo:!1,desktopTest:!0,desktopDemo:!0,fullscreen:!1},medusae:{name:"Medusae",icon:t+"medusae/icon.jpg",screenshot:t+"medusae/reference.png",url:t+"medusae/index.html",width:1366,height:768,features:["webGl"],folderSize:9328,timeout:12e4,credits:[{category:"Jay Weeks",name:"Medusae",url:"https://github.com/jpweeks/particulate-medusae"}],mobileTest:!0,mobileDemo:!0,desktopTest:!0,desktopDemo:!0,fullscreen:!0}};return{getGames:e}}),angular.module("app").factory("gameBrowser",["browser","gameSupport",function(e,t){function n(){var n=e.getCurrentBrowser(),r=t.getHierarchy(!0),o={};return n.browser.features=r,_.each(n.browser.features,function(e,t){_.each(e,function(e,t){o[t]=e})}),n.browser.supportedFeatures=o,n}return{getCurrentBrowser:n}}]),angular.module("app").directive("gameDemos",["game","gameSupport","$compile","$filter","$templateCache","$timeout",function(e,t,n,r,o,a){return{restrict:"C",scope:!0,link:function(i,s,u){function c(e){var t=$(".demo-viewer"),n=$("iframe");return n&&n.attr("src")?(n.attr("src","/assets/games/blank.html"),void a(function(){n.remove(),t.html(""),e()},100)):(t.html(""),e())}var l=r("byActiveDemoGame");i.games=l(e.getGames(),i.currentBrowser);var d={};_.each(t.getFeatures(),function(e){d[e]={selected:!1,filterable:!1}});var m=[];_.each(i.games,function(e){m=m.concat(e.features)}),m=_.uniq(m).sort(),_.each(m,function(e){d[e].selected=!0,d[e].filterable=!0}),i.features=d,i.playDemo=function(e){i.selectedGame=i.games[e];var t=o.get("demo.html"),r=$(".modal-body");if(r){var a=$("<iframe>",{id:"game-frame",src:i.selectedGame.url});a.load(function(){var e=this;setTimeout(function(){e.contentWindow.focus()},100)}),r.html(t).show(),n(r.contents())(i);var s=$(".game-container");s&&s.html(a),window.onmessage=function(e){switch(e.data.msg){case"inheritCanvasSize":console.log("inheritCanvasSize",e.data)}},i.showModal()}},i.stopDemo=function(){i.closeModal(),c(function(){$(".demo-viewer").html("")})}}}}]),angular.module("app").directive("gameDemosControl",["$timeout","$rootScope",function(e,t){return{restrict:"C",scope:!1,link:function(e,n){$(".intro button").on("click",function(){n.addClass("open"),"tags"==$(this).data("target")?TweenMax.to($(".tags"),.5,{left:-20,ease:Back.easeOut.config(.7)}):(TweenMax.to($(".search"),.5,{right:-20,ease:Back.easeOut.config(.7)}),$(".search input").focus()),$(".view-demos").addClass("lock"),t.blur("mobile-demos"),n.find(".close").on("click",function(){n.removeClass("open"),$(".view-demos").removeClass("lock"),TweenMax.to($(".tags"),.5,{left:"-120%",ease:Back.easeOut.config(.7)}),TweenMax.to($(".search"),.5,{right:"-120%",ease:Back.easeOut.config(.7)}),t.unblur("mobile-demos")})})}}}]),angular.module("app").directive("gameChart",["$compile","game",function(e,t){return{restrict:"C",link:function(n,r){var o=t.getGames(),a='<table class="table">',i=!!n.results,s=["canvas","webgl","webgl2","gamepad"];a+='<tr><th colspan="2"></th>',_.each(s,function(e){a+="<th>"+e+"</th>"}),i&&(a+="<th>results</th>"),a+="</tr>",_.each(o,function(e,t){a+="<tr><td>"+e.name+'</td><td><img style="max-width:100px;" src="'+e.icon+'"/></td>',_.each(s,function(t){a+=_.contains(e.features,t)?"<td>yes</td>":"<td>no</td>"}),i&&(a+="<td>"+Math.round(100*(n.results[t].stopTime-n.results[t].startTime))/100+"ms</td>"),a+="</tr>"}),a+="</table>",r.html(a).show(),e(r.contents())(n)}}}]),angular.module("app").factory("gameSupport",function(){function e(){return!0}function t(){return!0}function n(){return!1}function r(){return!!("indexedDB"in window||"mozIndexedDB"in window||"webkitIndexedDB"in window||"msIndexedDB"in window)}function o(){return!!navigator.serviceWorker}function a(){var e=document.createElement("canvas");return!!(e&&e.getContext&&e.getContext("2d"))}function i(){if("WebGLRenderingContext"in window){var e=document.createElement("canvas");if(e)return!!e.getContext("webgl")}return!1}function s(){if("WebGL2RenderingContext"in window){var e=document.createElement("canvas");if(e)return!!e.getContext("webgl",{version:2})}return!1}function u(){return!!("AudioContext"in window||"webkitAudioContext"in window)}function c(){return!!("WebSocket"in window)}function l(){return!!("RTCPeerConnection"in window||"mozRTCPeerConnection"in window||"webkitRTCPeerConnection"in window||"msRTCPeerConnection"in window)}function d(){return!!("Gamepad"in window)}function m(){return!!("Touch"in window)}function p(){return!!("DeviceMotionEvent"in window&&window.DeviceMotionEvent.acceleration)}function f(){return!!("onmousemove"in window)}function g(){return!!KeyboardEvent}function h(){var e=document.createElement("div");return!!(e&&e.requestFullscreen||e.msRequestFullscreen||e.mozRequestFullScreen||e.webkitRequestFullscreen)}function w(){return!!("screen"in window&&(window.screen.orientation||window.screen.mozOrientation||window.screen.webkitOrientation||window.screen.msOrientation))}function v(){return!!(navigator.battery||navigator.mozBattery||navigator.webkitBattery)}function b(){return!!navigator.vibrate}function y(){return!!("visibilityState"in document||"hidden"in document)}function k(){return!!navigator.geolocation}function $(){var e=-1;return"hardwareConcurrency"in navigator&&(e=navigator.hardwareConcurrency),e}function C(){return!!("performance"in window&&performance.now)}function x(){return!!("SIMD"in window)}function S(){return!!("imul"in Math)}function T(){return!!("fround"in Math)}function B(){return!!("ArrayBuffer"in window&&"transfer"in ArrayBuffer)}function A(){var e=document.createElement("div");return!!(e.requestPointerLock||e.mozRequestPointerLock||e.webkitRequestPointerLock||e.msRequestPointerLock)}function M(){try{var e=new Blob;return!!e}catch(t){}return!1}function G(){return!(M()||!("BlobBuilder"in window||"MozBlobBuilder"in window||"WebKitBlobBuilder"in window))}function D(){return!!("SharedArrayBuffer"in window)}function z(){return!!("Worker"in window)}function R(){return!!("requestAnimationFrame"in window)}function E(){window.es={versions:["1.1","1.2","1.3","1.4","1.5","1.6","1.7","1.8","1.9","2.0"],version:""};for(var e=0;e<window.es.versions.length;e++){var t=document.createElement("script");t.setAttribute("language","JavaScript"+window.es.versions[e]),t.text='window.es.version = "'+window.es.versions[e]+'";',document.getElementsByTagName("head")[0].appendChild(t);
}return parseFloat(window.es.version)}function L(){return E()>=1.5}function O(e,t){var n=null,r=P(t);return _.includes(r,e)&&_.each(W,function(t){_.each(t,function(t,r){r.toLowerCase()===e.toLowerCase()&&(n=t)})}),n}function F(e){var t=[];return _.each(e,function(e){t.push(O(e))}),_.every(t,_.identity)}function I(e){return e?_.keys(W):_.keys(q)}function P(e){var t=[],n=e?W:q;return _.each(n,function(e){_.each(e,function(e,n){t.push(n)})}),t}function V(e){return e?W:q}var q={cpu:{asm:e(),optimizedJavaScript:L(),webAssembly:n(),sharedArrayBuffer:D(),simd:x()},graphics:{canvas:a(),webGl:i(),webGl2:s()},audio:{webAudio:u()},experience:{fullscreen:h(),pointerLock:A()},storage:{indexedDb:r(),serviceWorker:o()},multiplayer:{webSocket:c(),webRtc:l()},input:{domLevel3:t(),touch:m(),gamepad:d()}},W={cpu:{asm:e(),optimizedJavaScript:L(),webAssembly:n(),sharedArrayBuffer:D(),simd:x(),logicalCores:$(),performance:C(),mathImul:S(),mathFround:T(),arrayBufferTransfer:B(),blobConstructor:M(),blobBuilder:G(),webWorkers:z(),requestAnimationFrame:R(),esVersion:E()},graphics:{canvas:a(),webGl:i(),webGl2:s()},audio:{webAudio:u()},experience:{fullscreen:h(),pointerLock:A(),orientation:w(),battery:v(),vibrate:b(),visibility:y(),geoLocation:k()},storage:{indexedDb:r(),serviceWorker:o()},multiplayer:{webSocket:c(),webRtc:l()},input:{domLevel3:t(),touch:m(),gamepad:d(),motion:p(),pointer:f(),keyboard:g()}};return{getCategories:I,getFeatures:P,getHierarchy:V,hasFeature:O,hasFeatures:F}}),angular.module("app").filter("gravatar",["md5",function(e){return function(t){return"//www.gravatar.com/avatar/"+e.hash(t)}}]),angular.module("app").directive("html",["$location","$state","$window","page","gameBrowser",function(e,t,n,r,o){return{restrict:"E",link:function(a){a.page=r.data,a._=_,a.results=null,a.status=null,a.currentBrowser=o.getCurrentBrowser(),a.browserName=a.currentBrowser.browser.name.toLowerCase(),a.currentVersionSnippet=a.currentBrowser.browser.version,a.currentVersionSnippet.toString().length<=6&&(a.currentVersionSnippet="Version "+a.currentVersionSnippet),a.isMobile="mobile"===a.currentBrowser.device.type,a.state=t,a.testStateClass=null,a.$on("$stateChangeStart",function(t,n,o){a.stateClass=o.slug,a.stateName=n.name,a.statePath=e.url(),a.stateUrl=e.absUrl(),a.stateParams=o,a.page=r.normalizeData(a.pages[a.stateClass])}),a.$on("$stateChangeSuccess",function(e,t){n.ga("send","pageview",{page:t.url})})},controller:["$scope","$templateCache",function(e,t){var n={},o=t.getKeys();_.each(o,function(e){var o={slug:e.replace(/\.html$/,""),html:t.get(e),text:$("<div>"+t.get(e)+"</div>").text().replace(/[\r\n\s]+/g," ").trim()},a=$(o.html).filter("input[metadata]");_.each(a,function(e){o[e.name]=e.value}),n[o.slug]=r.normalizeData(o)}),e.pages=n}]}}]),angular.module("app").directive("logo",function(){return{restrict:"C",templateUrl:"logo.html"}}),angular.module("app").factory("md5",function(){function e(e,t){var i=e[0],s=e[1],u=e[2],c=e[3];i=n(i,s,u,c,t[0],7,-680876936),c=n(c,i,s,u,t[1],12,-389564586),u=n(u,c,i,s,t[2],17,606105819),s=n(s,u,c,i,t[3],22,-1044525330),i=n(i,s,u,c,t[4],7,-176418897),c=n(c,i,s,u,t[5],12,1200080426),u=n(u,c,i,s,t[6],17,-1473231341),s=n(s,u,c,i,t[7],22,-45705983),i=n(i,s,u,c,t[8],7,1770035416),c=n(c,i,s,u,t[9],12,-1958414417),u=n(u,c,i,s,t[10],17,-42063),s=n(s,u,c,i,t[11],22,-1990404162),i=n(i,s,u,c,t[12],7,1804603682),c=n(c,i,s,u,t[13],12,-40341101),u=n(u,c,i,s,t[14],17,-1502002290),s=n(s,u,c,i,t[15],22,1236535329),i=r(i,s,u,c,t[1],5,-165796510),c=r(c,i,s,u,t[6],9,-1069501632),u=r(u,c,i,s,t[11],14,643717713),s=r(s,u,c,i,t[0],20,-373897302),i=r(i,s,u,c,t[5],5,-701558691),c=r(c,i,s,u,t[10],9,38016083),u=r(u,c,i,s,t[15],14,-660478335),s=r(s,u,c,i,t[4],20,-405537848),i=r(i,s,u,c,t[9],5,568446438),c=r(c,i,s,u,t[14],9,-1019803690),u=r(u,c,i,s,t[3],14,-187363961),s=r(s,u,c,i,t[8],20,1163531501),i=r(i,s,u,c,t[13],5,-1444681467),c=r(c,i,s,u,t[2],9,-51403784),u=r(u,c,i,s,t[7],14,1735328473),s=r(s,u,c,i,t[12],20,-1926607734),i=o(i,s,u,c,t[5],4,-378558),c=o(c,i,s,u,t[8],11,-2022574463),u=o(u,c,i,s,t[11],16,1839030562),s=o(s,u,c,i,t[14],23,-35309556),i=o(i,s,u,c,t[1],4,-1530992060),c=o(c,i,s,u,t[4],11,1272893353),u=o(u,c,i,s,t[7],16,-155497632),s=o(s,u,c,i,t[10],23,-1094730640),i=o(i,s,u,c,t[13],4,681279174),c=o(c,i,s,u,t[0],11,-358537222),u=o(u,c,i,s,t[3],16,-722521979),s=o(s,u,c,i,t[6],23,76029189),i=o(i,s,u,c,t[9],4,-640364487),c=o(c,i,s,u,t[12],11,-421815835),u=o(u,c,i,s,t[15],16,530742520),s=o(s,u,c,i,t[2],23,-995338651),i=a(i,s,u,c,t[0],6,-198630844),c=a(c,i,s,u,t[7],10,1126891415),u=a(u,c,i,s,t[14],15,-1416354905),s=a(s,u,c,i,t[5],21,-57434055),i=a(i,s,u,c,t[12],6,1700485571),c=a(c,i,s,u,t[3],10,-1894986606),u=a(u,c,i,s,t[10],15,-1051523),s=a(s,u,c,i,t[1],21,-2054922799),i=a(i,s,u,c,t[8],6,1873313359),c=a(c,i,s,u,t[15],10,-30611744),u=a(u,c,i,s,t[6],15,-1560198380),s=a(s,u,c,i,t[13],21,1309151649),i=a(i,s,u,c,t[4],6,-145523070),c=a(c,i,s,u,t[11],10,-1120210379),u=a(u,c,i,s,t[2],15,718787259),s=a(s,u,c,i,t[9],21,-343485551),e[0]=d(i,e[0]),e[1]=d(s,e[1]),e[2]=d(u,e[2]),e[3]=d(c,e[3])}function t(e,t,n,r,o,a){return t=d(d(t,e),d(r,a)),d(t<<o|t>>>32-o,n)}function n(e,n,r,o,a,i,s){return t(n&r|~n&o,e,n,a,i,s)}function r(e,n,r,o,a,i,s){return t(n&o|r&~o,e,n,a,i,s)}function o(e,n,r,o,a,i,s){return t(n^r^o,e,n,a,i,s)}function a(e,n,r,o,a,i,s){return t(r^(n|~o),e,n,a,i,s)}function i(t){txt="";var n,r=t.length,o=[1732584193,-271733879,-1732584194,271733878];for(n=64;n<=t.length;n+=64)e(o,s(t.substring(n-64,n)));t=t.substring(n-64);var a=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(n=0;n<t.length;n++)a[n>>2]|=t.charCodeAt(n)<<(n%4<<3);if(a[n>>2]|=128<<(n%4<<3),n>55)for(e(o,a),n=0;16>n;n++)a[n]=0;return a[14]=8*r,e(o,a),o}function s(e){var t,n=[];for(t=0;64>t;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}function u(e){for(var t="",n=0;4>n;n++)t+=m[e>>8*n+4&15]+m[e>>8*n&15];return t}function c(e){for(var t=0;t<e.length;t++)e[t]=u(e[t]);return e.join("")}function l(e){return c(i(e))}function d(e,t){return e+t&4294967295}function d(e,t){var n=(65535&e)+(65535&t),r=(e>>16)+(t>>16)+(n>>16);return r<<16|65535&n}var m="0123456789abcdef".split("");return"5d41402abc4b2a76b9719d911017c592"!=l("hello"),{hash:l}}),angular.module("app").directive("metadata",function(){return{}}),angular.module("app").directive("modal",["$rootScope",function(e){var t={sponzadynamicshadows:{name:"Sponza Dynamic Shadows",icon:"/assets/games/sponza.jpg",url:"/assets/games/sponza.html",width:1366,height:768,features:["optimizedJavaScript","webGl"],timeout:6e4,credits:[{category:"WebGL JavaScript Framework",name:"BabylonJS",url:"http://www.babylonjs.com/",$$hashKey:"object:39"}],mobile:!1,desktop:!0,status:"success",startTime:4134.35,timer:"00:35",timeoutPercentage:0,interval:{$$state:{status:2,value:"cancelled",processScheduled:!1},$$intervalId:36},stopTime:39645.955,results:{totalTime:35535,wrongPixels:34,cpuTime:14013,cpuIdle:.6056595835690157,fps:56.28206318787234,pageLoadTime:162.35000000000002,numStutterEvents:32,result:"FAIL"}},suntemple:{name:"Sun Temple",icon:"/assets/games/suntemple.png",url:"/assets/games/suntemple.html",width:1366,height:768,features:["optimizedJavaScript","webGl"],timeout:12e4,credits:[{category:"Unreal Engine 4.10",name:"Sun Temple",url:"https://www.unrealengine.com/",$$hashKey:"object:59"}],mobile:!1,desktop:!0,status:"success",startTime:102041.78,timer:"01:12",timeoutPercentage:0,interval:{$$state:{status:2,value:"cancelled",processScheduled:!1},$$intervalId:252},stopTime:175307.795,results:{totalTime:73291,wrongPixels:3,cpuTime:69251,cpuIdle:.05512089924838826,fps:38.203880054279516,pageLoadTime:60899.490000000005,numStutterEvents:99,result:"PASS"}}};return{restrict:"E",templateUrl:"modal.html",scope:!1,link:function(n){n.modalTitle="",n.modalContent="",n.modalButton="Close",n.showModal=function(){$("#modal").modal("show"),$("#modal div.modal-header").css("display",n.modalTitle?"block":"none"),$("#modal div.modal-footer").css("display",n.modalButton?"block":"none")},n.closeModal=function(){$("#modal").modal("hide")},n.setModalTitle=function(e){n.modalTitle=e},n.setModalContent=function(e){n.modalContent=e},n.setModalButton=function(e){n.modalButton=e},n.showSampleResults=function(){n.setModalTitle("Sample Data"),n.setModalContent("<pre>"+JSON.stringify(t,null,4)+"</pre>"),n.setModalButton("Close Sample"),n.showModal()},n.fullscreenModal=function(e){var t=document.getElementById(e);t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen()},$("#modal").on("show.bs.modal",function(){e.blur(),$("body").css("overflow","hidden"),$("nav-arrow").addClass("hidden")}),$("#modal").on("hide.bs.modal",function(){e.unblur(),$("body").css("overflow","auto"),$("nav-arrow").removeClass("hidden")})}}}]),angular.module("app").directive("navArrow",["navigation","$state",function(e,t){return{restrict:"E",templateUrl:"navArrowButton.html",scope:{},link:function(n,r,o){function a(e){l.eventCallback("onReverseComplete",e),l.reverse()}function i(e){l.eventCallback("onComplete",e),l.play()}function s(){t.transitionDirection=u}var u=n.direction=o.direction,c={paused:!0,ease:"Quart.easeInOut",css:{}};switch(u){case"up":c.css.y="-120";break;case"down":c.css.y="120";break;case"left":c.css.x="-150%";break;case"right":c.css.x="150%"}var l=TweenMax.to(r.find(".nav-arrow"),.2,c);n.$on("$stateChangeStart",function(r,o,s){function c(){var t=e.getDescriptor(s.slug);if(t&&u){var r=t.directions[u];r?(n.slug=r.id,n.name=r.name):(n.slug=null,n.name=null)}}return t.params.slug?void i(function(){var e,t,r=_.once(function(){e&&e(),clearTimeout(t),c(),a()});e=n.$on("gsapifyRouter:enterSuccess",r),t=setTimeout(r,201)}):c()}),r.click(s),r.on("$destroy",function(){r.unbind("click",s)})}}}]),angular.module("app").directive("navMain",["$document","$timeout","$rootScope",function(e,t,n){return{restrict:"E",templateUrl:"navMain.html",scope:{},link:function(r,o){r.showMenu=!1;var a=e[0],i=o[0].querySelector(".nav-main__icon"),s=function(){r.showMenu=!0,n.blur(),t(function(){a.addEventListener("click",u)})},u=function(){a.removeEventListener("click",u),r.showMenu=!1,n.unblur()};i.addEventListener("click",s),o.on("$destroy",function(){i.removeEventListener("click",s),a.removeEventListener("click",u)})}}}]),angular.module("app").directive("navMainButton",["$state",function(e){return{restrict:"E",templateUrl:"navMainButton.html",transclude:!0,scope:{},link:function(t,n,r){null!==r.slug&&(t.slug=r.slug),t.navigate=function(){t.slug&&e.go("app.page",{slug:t.slug})},t.isActive=t.slug?e.params.slug===t.slug:!1,t.$on("$stateChangeSuccess",function(e,n,r){t.isActive=t.slug?r.slug===t.slug:!1})}}}]),angular.module("app").directive("navSecondary",function(){return{restrict:"C",templateUrl:"navSecondary.html"}}),angular.module("app").factory("navigation",["$state","$q",function(e,t){function n(e){return p[e]}function r(r){var o=e.params.slug;if(!o)throw new Error("`$state.params.slug` was undefined.");if(e.params.slug){var a=n(e.params.slug).directions[r];return a?(e.transitionDirection=r,e.go("app.page",{slug:a.id})):t.reject("Invalid direction specified: "+r)}}var o={id:"resources",name:"Resources",directions:{}},a={id:"media",name:"Logos & Font",directions:{}},i={id:"home",name:"Home",directions:{}},s={id:"features",name:"Features",directions:{}},u={id:"rights",name:"Content Rights",directions:{}},c={id:"upgrade",name:"Upgrade Your Browser",directions:{}},l={id:"faq",name:"FAQ",directions:{}},d={id:"timeline",name:"Timeline",directions:{}},m={id:"tests",name:"Run Test",directions:{}};o.directions.right=i,o.directions.down=a,a.directions.right=s,a.directions.up=o,a.directions.down=u,i.directions.right=d,i.directions.left=o,i.directions.down=_.clone(s),i.directions.down.name="Run the Test",s.directions.up=i,s.directions.down=c,s.directions.left=a,c.directions.up=s,c.directions.left=u,u.directions.up=a,u.directions.right=c,l.directions.down=d,d.directions.up=l,d.directions.left=i;var p={resources:o,media:a,home:i,features:s,rights:u,upgrade:c,faq:l,timeline:d,tests:m};return{getDescriptor:n,navigateByDirection:r}}]),angular.module("app").directive("notification",function(){return{restrict:"C",templateUrl:"notification.html",scope:!1,link:function(e,t){if(!e.currentBrowser.browser.latest){var n=e.currentBrowser.browser.name,r=e.currentBrowser.browser.stable.replace(/\..*$/,"");e.status="Upgrade "+n+" to "+r+"!"}e.$watch("status",function(e){e?(t.parent("body").addClass("notification"),t.find(".inner").addClass("active")):(t.parent("body").removeClass("notification"),t.find(".inner").removeClass("active"))})}}}),angular.module("app").directive("pad",function(){return{restrict:"A",scope:!1,link:function(e,t){t.find("g[direction]").each(function(t,n){var r=angular.element(n).attr("direction");angular.element(n).on("click",function(){e.triggerArrow(r)})})}}}),angular.module("app").factory("page",function(){var e={},t=function(e){return e&&e.slug?{slug:e.slug,title:e.title||"",description:e.description||"",type:e.type||"page",url:e.url||"/"+e.slug+".html",imageUrl:e.imageUrl||"",html:e.html||"",text:e.text||"",keywords:e.keywords||""}:null},n=function(n){e=t(_.extend(e,n))};return{data:e,normalizeData:t,setData:n}}),angular.module("app").directive("privacyLink",["$window",function(e){return{restrict:"C",scope:!1,link:function(t,n){n.on("click",function(){e.open("https://www.mozilla.org/privacy/websites/")})}}}]),angular.module("app").directive("viewReport",function(){return{restrict:"C",scope:!0,link:function(e,t){var n=$(".content"),r=t.find(".confirmation"),o=t.find(".confirmation .success"),a=t.find(".confirmation .error"),i=t.find(".confirmation button.close");e.resetConfirmation=function(){r.addClass("is-hidden"),o.addClass("is-hidden"),a.addClass("is-hidden")},e.showConfirmation=function(t){e.resetConfirmation(),document.body.scrollTop=document.documentElement.scrollTop=0,t?o.removeClass("is-hidden"):a.removeClass("is-hidden"),n.addClass("blur"),r.removeClass("is-hidden")},e.hideConfirmation=function(){n.removeClass("blur"),r.addClass("is-hidden")},i.on("click",function(){e.hideConfirmation()})}}}),angular.module("app").filter("slugify",function(){return function(e){return e.toString().toLowerCase().replace(/\s+/g,"-").replace(/[^\w-]+/g,"").replace(/-+/g,"-").replace(/_+/g,"_").replace(/^[_-]/,"").replace(/[_-]$/g,"")}}),angular.module("app").directive("snippet",["$compile","$templateCache",function(e,t){return{restrict:"A",link:function(n,r,o){var a=t.get(o.snippet+".html");a&&(r.html(a).show(),e(r.contents())(n))}}}]),angular.module("app").config(["$provide",function(e){e.decorator("$templateCache",["$delegate",function(e){var t=[],n=e.put;return e.put=function(e,r){n(e,r),t.push(e)},e.getKeys=function(){return t},e}])}]),angular.module("app").directive("testDrive",["$compile","$filter","$state","$templateCache","$interval","$timeout","game",function(e,t,n,r,o,a,i){return{restrict:"C",scope:!1,link:function(e){function r(){console.log("record() not implemented")}function s(){return e.activeGameKey?"running"===e.games[e.activeGameKey].status:!1}function u(){s()&&(e.games[e.activeGameKey].error=new Error("Player skipped game"),B(e.activeGameKey))}function c(){e.$evalAsync(function(){e.$parent.testState="cancelled",e.activeGameIndex=R.length-1,e.games[e.activeGameKey].error=new Error("Player cancelled test"),B(e.activeGameKey)})}function l(t){C(function(){e.$evalAsync(function(){return t in e.games?(e.activeGameKey=t,e.games[t].startTime=window.performance.now(),e.games[t].timer="",e.games[t].timeoutPercentage=0,e.games[t].status="running",void(e.games[t].interval=o(function(){var n=window.performance.now(),r=n-e.games[t].startTime;r>e.games[t].timeout&&(e.games[t].error=new Error("Game timed out"),e.games[t].status="timeout",B(t));var o=("0"+Math.floor(r/1e3/60)).substr(-2),a=("0"+Math.floor(r/1e3-60*o)).substr(-2);e.games[t].timer=o+":"+a},1e3))):console.error(new Error("Unrecognized game: "+t))})})}function d(){e.$evalAsync(function(){r(),e.$parent.results=e.games,e.activeGameKey=null,"cancelled"!==e.$parent.testState&&(e.$parent.testState="completed"),$(".status .timer").show(),$(".game-tracker").hide()})}function m(){null!==G&&(a.cancel(G),G=null),e.$evalAsync(function(){e.$parent.testState="in-progress",e.activeGameKey=e.activeGameKey||R[0],p(e.games[e.activeGameKey].url+"?playback",{width:e.games[e.activeGameKey].width,height:e.games[e.activeGameKey].height,frameBorder:0})})}function p(e,t){t.src=e;var n=$("#game-container");if(n){var r=$("<iframe>",t);r.load(function(){t.width&&t.height&&this.contentWindow.postMessage({msg:"iframeSize",width:t.width,height:t.height},"*")}),n.html(r)}}function f(e){var t=$("#game-container"),n=$("iframe");return n&&n.attr("src")?(n.attr("src","/assets/games/blank.html"),void a(function(){n.remove(),t.html(""),e()},100)):(t.html(""),e())}function g(){f(function(){e.activeGameKey=null,e.activeGameIndex=0,m()})}function h(){n.go("app.page",{slug:"features"})}function w(){e.$parent.setModalTitle("Your Test Results"),e.$parent.setModalContent("<pre>"+JSON.stringify(e.$parent.results,null,4)+"</pre>"),e.setModalButton("Close Results"),e.$parent.showModal()}function v(){k(0)}function b(){e.$evalAsync(function(){e.loadingPercent=""})}function y(){if(A){if(!M.length)return a(y,50);e.$evalAsync(function(){var t=_.head(M)||0;M=_.slice(M,1).sort();var n=(100*t).toFixed(2);e.loadingPercent=n+"%",a(y,50)})}}function k(t){0===t&&(A=!0,M=[0],y());var n=.15,r=parseInt(e.loadingPercent.replace(/\%$/,"")||0)/100,o=_.last(M);if(o!==r){if(t-Math.max(o,r)<=n)return M.push(t);for(var a=1e4*r,i=200,s=1e3;1e4*t>a;)a=Math.min(_.random(i,s)+a,1e4),M.push(a/1e4)}}function C(e){a(function(){k(1),0===M.length?(A=!1,e()):C(e)},50)}function x(e){var t=0,n=50,r=200,o=1e3;k(t);var a=function(){1e4>t?(t=Math.min(_.random(r,o)+t,1e4),k(t/1e4),setTimeout(a,n)):l(e)};a()}function S(t){e.loadingPercent?(console.log("starting game",t),l(t)):(console.log("starting game (artificial load)",t),x(t))}function T(){console.log("pauseGame has not been implemented yet")}function B(t,n){console.log("stopping game",t,n),b(),e.games[t].stopTime=window.performance.now(),o.cancel(e.games[t].interval),e.games[t].error&&"Game timed out"===e.games[t].error.message&&(e.games[t].status="timeout",e.$parent.testState="timeout"),n?(e.games[t].results=n,e.games[t].status="success"):"timeout"!==e.games[t].status&&(e.games[t].status="failed"),f(function(){if(e.activeGameIndex+1===R.length)d();else if(e.activeGameIndex=e.activeGameIndex+1,e.activeGameKey=R[e.activeGameIndex],e.games[e.activeGameKey].status="loading","timeout"===e.$parent.testState){e.timeoutCountdown=5;var t=o(function(){return e.timeoutCountdown<=0?o.cancel(t):void e.timeoutCountdown--},1e3,5);G=a(function(){G=null,o.cancel(t),m()},5e3)}else m()})}var A=!1,M=[],G=null,D=t("byActiveGame"),z=t("byGameFolderSizeOrder");e.isSkippable=s,e.loadingPercent="",e.games=i.getGames(),e.games=D(e.games,e.currentBrowser),e.games=z(e.games),_.each(e.games,function(t,n){e.games[n].status="queue"});var R=_.keys(e.games);e.activeGameKey=null,e.activeGameIndex=0,e.activeGameCount=R.length,e.$parent.$watch("testState",function(t){e.$parent.testStateClass="test-state-"+t}),e.$parent.testState&&"in-progress"!==e.$parent.testState&&"intro"!==e.$parent.testState&&"timeout"!==e.$parent.testState||(null!==e.$parent.results?(e.$parent.testState="in-progress",a(g,0)):e.$parent.testState="intro"),e.run=m,e.skip=u,e.cancel=c,e.restart=g,e.viewResults=h,e.viewResultsModal=w,window.onmessage=function(e){switch(e.data.msg){case"startGame":S(e.data.key);break;case"pauseGame":T(e.data.key);break;case"stopGame":B(e.data.key,e.data.results);break;case"preloadGame":v(e.data.key);break;case"preloadProgress":k(e.data.progress)}}}}}]),angular.module("app").directive("viewTimeline",["$timeout",function(e){return{restrict:"C",scope:!0,link:function(t,n){function r(){c.on("mouseover",function(e){l.forEach(function(t){t[0]===e.currentTarget?(t.addClass("active"),t.removeClass("inactive")):(t.removeClass("active"),t.addClass("inactive"))})}),c.on("mouseout",function(){l.forEach(function(e){e.removeClass("inactive"),e.removeClass("active")})}),i.on("mouseover",function(e){d.removeClass("show-content"),s.forEach(function(t){t[0]===e.currentTarget?(t.addClass("active"),t.removeClass("inactive")):(t.removeClass("active"),t.addClass("inactive"))}),d.addClass("active"),u[0]!==e.currentTarget&&l.forEach(function(e){e[0]!==d[0]&&(e.removeClass("active"),e.addClass("inactive"))})}),i.on("mouseout",function(){d.removeClass("active"),s.forEach(function(e){e.removeClass("inactive"),e.removeClass("active")}),l.forEach(function(e){e.removeClass("active"),e.removeClass("inactive")})})}function o(){return{delay:.5+8*Math.random(),css:{autoAlpha:0,scale:.666+1.333*Math.random()}}}function a(){setTimeout(function(){n.find(".components").height(n.find(".timeline-bg-polyfill")[0].getBoundingClientRect().height)},500)}var i=n.find(".component"),s=i.toArray().map(function(e){return $(e)}),u=s.pop(),c=u.find(".component-content > div"),l=c.toArray().map(function(e){return $(e)}),d=n.find(".future-today");e(r,0),"ie"!==t.browserName&&"edge"!==t.browserName||(a(),$(window).resize(function(){a()}));var m=n.find(".dot-halo").toArray();m.forEach(function(e){TweenMax.set(e,{css:{autoAlpha:1,scale:0,transformOrigin:"50% 50%"}});var t=_.merge(o(),{ease:"Quint.easeOut",repeat:-1,onRepeat:function(){this.updateTo(o(),!0)}});TweenMax.to(e,3,t)});var p=3,f=n.find(".today-dot"),g=new TimelineMax({repeat:-1});TweenMax.set(f.find("#inner-halo-1"),{css:{autoAlpha:.7,scale:.7,transformOrigin:"50% 50%"}}),TweenMax.set(f.find("#inner-halo-2"),{css:{autoAlpha:.7,scale:.7,transformOrigin:"50% 50%"}}),g.add(TweenMax.to(f.find("#inner-halo-1"),.625*p,{ease:"Power2.easeInOut",css:{autoAlpha:0,scale:1.9,transformOrigin:"50% 50%"}}),0),g.add(TweenMax.to(f.find("#inner-halo-1"),.75*p,{ease:"Power2.easeInOut",css:{autoAlpha:.7,scale:.7,transformOrigin:"50% 50%"}}),p),g.add(TweenMax.to(f.find("#inner-halo-2"),p,{ease:"Power2.easeInOut",css:{autoAlpha:0,scale:1.75,transformOrigin:"50% 50%"}}),0),g.add(TweenMax.to(f.find("#inner-halo-2"),p,{ease:"Power2.easeInOut",css:{autoAlpha:.7,scale:.7,transformOrigin:"50% 50%"}}),p),g.add(TweenMax.to(f.find("#outter-halo"),p,{ease:"Back.easeInOut",css:{scale:1.35,autoAlpha:.12,transformOrigin:"50% 50%"}}),0),g.add(TweenMax.to(f.find("#outter-halo"),p,{ease:"Back.easeInOut",css:{scale:1,autoAlpha:.5,transformOrigin:"50% 50%"}}),p),g.add(TweenMax.to(f.find(".dot-blue"),p,{ease:"Back.easeInOut",css:{scale:1.3,transformOrigin:"50% 50%"}}),0),g.add(TweenMax.to(f.find(".dot-blue"),p,{ease:"Back.easeInOut",css:{scale:1,transformOrigin:"50% 50%"}}),p),n.find(".future .future-dot").toArray().forEach(function(e){var t=50+15*Math.random()+"% "+(50+15*Math.random())+"%";TweenMax.to(n.find(e),12+13*Math.random(),{ease:"Power0.easeIn",repeat:-1,css:{rotation:360,transformOrigin:t}})})}}}]),angular.module("app").filter("trustAsResourceUrl",["$sce",function(e){return function(t){return e.trustAsResourceUrl(t)}}]),angular.module("app").directive("viewUpgrade",["browser","$timeout",function(e,t){return{restrict:"C",scope:!0,link:function(n){n.selectedTab||(n.selectedTab="stable");var r=_.partition(_.shuffle(e.getBrowsers()),function(e){return!e.development});n.stableBrowsers=r[0],n.experimentalBrowsers=r[1],t(function(){var e=$(window).width();e>=1100?$(".experimentalBrowsers").css({display:"block",position:"relative",top:0,marginTop:-343,opacity:0,zIndex:-10}):$(".experimentalBrowsers").css({display:"block",position:"absolute",opacity:0,zIndex:-10}),$(".stableBrowsers").css({display:"block",opacity:1});var t=$("a.browser-stable");TweenMax.staggerFrom(t,.8,{opacity:0,y:600,ease:Back.easeOut.config(.7)},.1),n.selectStableBrowsers=function(){n.selectedTab="stable";var t=$("a.browser-stable"),r=$("a.browser-experimental");$(".stableBrowsers").css({display:"block",opacity:1,zIndex:10}),$(".experimentalBrowsers").css({zIndex:-10}),1100>e&&$(".view-upgrade .container").css({maxHeight:2e3}),TweenMax.staggerTo(t,.8,{opacity:1,y:0,ease:Back.easeOut.config(.7)},.1),TweenMax.staggerTo(r,.8,{opacity:0,y:600,ease:Back.easeOut.config(.7)},.1)},n.selectExperimentalBrowsers=function(){n.selectedTab="experimental";var t=$("a.browser-stable"),r=$("a.browser-experimental");e>=1100?$(".experimentalBrowsers").css({position:"relative",top:0,marginTop:-343,opacity:1,zIndex:10}):($(".experimentalBrowsers").css({position:"absolute",opacity:1,zIndex:10}),$(".view-upgrade .container").css({maxHeight:1300})),TweenMax.staggerTo(r,.8,{opacity:1,y:0,ease:Back.easeOut.config(.7)},.1),TweenMax.staggerTo(t,.8,{opacity:0,y:600,ease:Back.easeOut.config(.7)},.1)}})}}}]);
//# sourceMappingURL=app.min.js.map
