!function(){"use strict";angular.module("hj.gsapifyRouter",["ui.router","ngAnimate"]).constant("TweenMax",TweenMax).provider("gsapifyRouter",function(){var t=this;t.initialTransitionEnabled=!1,t.transitions={},t.transitions.above={duration:1,ease:"Quart.easeInOut",css:{y:"-100%"}},t.transitions.below={duration:1,ease:"Quart.easeInOut",css:{y:"100%"}},t.transitions.left={duration:1,ease:"Quint.easeInOut",css:{x:"-100%"}},t.transitions.right={duration:1,ease:"Quint.easeInOut",css:{x:"100%"}},t.transitions.fade={duration:.5,css:{opacity:0}},t.transitions.fadeDelayed={duration:.5,delay:.5,css:{opacity:0}},t.transitions.none={duration:0,css:{}},t.defaults={enter:"none",leave:"none"},t.transition=function(e,r){t.transitions[e]=r},t.scrollRecallEvent="leaveSuccess",t.$get=["$rootScope","$state","$document","$injector","$timeout","$q","$log","TweenMax",function(e,r,n,i,a,o,s,u){var c=function(e,r,n,a){var o={transition:t.defaults["in"===a?"enter":"leave"],priority:0};if(e.data&&e.data["gsapifyRouter."+r]&&e.data["gsapifyRouter."+r][n]){var s=e.data["gsapifyRouter."+r][n][a];if(s){var u=Object.prototype.toString.call(s);"[object Array]"!==u&&"[object Function]"!==u||(o=i.invoke(s)),"[object Object]"===u&&(o=angular.extend(o,s),Object.keys(o).forEach(function(t){var e=Object.prototype.toString.call(o[t]);"[object Array]"!==e&&"[object Function]"!==e||(o[t]=i.invoke(o[t]))})),"[object String]"===u&&(o.transition=s)}}return o},l=function(e){var r,n=Object.prototype.toString.call(e);if("[object Object]"===n&&(r=e),"[object String]"===n){r=t.transitions[e];var a=Object.prototype.toString.call(r);"[object Array]"!==a&&"[object Function]"!==a||(r=i.invoke(r))}return r},f=function(t){var n=o.defer();t.css("visibility","hidden"),t.addClass("gsapify-router-in-setup");var i,f=t.attr("ui-view")||t.attr("data-ui-view"),v=r.current,p=r.previous,d=c(v,f,"enter","in"),y=c(p,f,"leave","in");i=y.priority>d.priority?y:d;var g=i.trigger||c(p,f,"leave","out").trigger,m=l(i.transition);if(!m)return s.error("gsapifyRouter: Invalid transition '"+m+"'");var b=m.duration,$=angular.copy(m);if($.onStart=function(){t.css("visibility","visible"),t.removeClass("gsapify-router-in-setup"),t.addClass("gsapify-router-in")},$.onComplete=function(){t.addClass("gsapify-router-in-end"),n.resolve({element:t,view:f})},!$.css||0===Object.keys($.css).length||0===b)return $.onStart(),a($.onComplete),n.promise;if(g)var S=e.$on(g,function(){S(),u.from(t,b,$)});else u.from(t,b,$);return n.promise},v=function(t){var n=o.defer();t.removeClass("gsapify-router-in gsapify-router-in-end"),t.addClass("gsapify-router-out-setup");var i,f=t.attr("ui-view")||t.attr("data-ui-view"),v=r.current,p=r.previous,d=c(p,f,"leave","out"),y=c(v,f,"enter","out");i=y.priority>d.priority?y:d;var g=i.trigger||c(v,f,"enter","in").trigger,m=l(i.transition);if(!m)return s.error("gsapifyRouter: Invalid transition '"+m+"'");var b=m.duration,$=angular.copy(m);if($.onStart=function(){t.removeClass("gsapify-router-out-setup"),t.addClass("gsapify-router-out")},$.onComplete=function(){t.remove(),n.resolve({element:t,view:f})},!$.css||0===Object.keys($.css).length||0===b)return $.onStart(),a($.onComplete),n.promise;if(g)var S=e.$on(g,function(){S(),u.to(t,b,$)});else u.to(t,b,$);return n.promise};return{enter:f,leave:v,transitions:t.transitions,defaults:t.defaults,initialTransitionEnabled:t.initialTransitionEnabled,scrollRecallEvent:t.scrollRecallEvent}}]}).config(["$stateProvider",function(t){t.state("gsapifyRouterBlankState",{})}]).run(["$rootScope","$state","gsapifyRouter","$timeout",function(t,e,r,n){e.history=[],e.previous={},t.$on("$stateChangeSuccess",function(t,i,a,o,s){if(e.previous=o,e.previousParams=s,e.history.push({name:o.name,params:s}),r.initialTransitionEnabled){r.initialTransitionEnabled=!1;var u=[e.current.name,e.current.params];e.go("gsapifyRouterBlankState"),n(function(){e.go.apply(null,u)})}})}]).directive("gsapifyRouter",["$state",function(t){return{priority:0,restrict:"C",link:function(e,r,n){n.$set("data-state",t.current.name)}}}]).service("scrollRecallService",["$rootScope","$window","$document","$timeout","$state","gsapifyRouter",function(t,e,r,n,i,a){var o={view:null},s=function(){var t={name:i.current.name,params:i.params};return JSON.stringify(t)},u={},c=s();return t.$on("$stateChangeStart",function(){o.view&&(u[c]={x:e.scrollX,y:e.scrollY})}),t.$on("$stateChangeSuccess",function(){o.view&&(c=s())}),t.$on("gsapifyRouter:"+a.scrollRecallEvent,function(t,r){if(o.view){var n=r.attr("ui-view")||r.attr("data-ui-view");if(n===o.view){var a=i.history[i.history.length-2];if(a){var s=JSON.stringify(a);if(c===s)return void e.scrollTo(u[s].x,u[s].y)}e.scrollTo(0,0)}}}),o}]).directive("scrollRecall",["scrollRecallService",function(t){return{priority:0,restrict:"A",link:function(e,r,n){t.view=n.uiView}}}]).animation(".gsapify-router",["$rootScope","gsapifyRouter",function(t,e){return{enter:function(r,n){var i=r.attr("data-state");return"gsapifyRouterBlankState"!==i&&(t.$broadcast("gsapifyRouter:enterStart",r),e.enter(r).then(function(e){t.$broadcast("gsapifyRouter:enterSuccess",r,e),n()})),function(t){return 1===angular.version.major&&angular.version.minor<=3?void(t===!0&&r.remove()):void(t!==!1&&r.remove())}},leave:function(r,n){var i=r.attr("data-state");"gsapifyRouterBlankState"!==i&&(t.$broadcast("gsapifyRouter:leaveStart",r),e.leave(r).then(function(e){t.$broadcast("gsapifyRouter:leaveSuccess",r,e),n()}))}}}])}();